(window.webpackJsonp=window.webpackJsonp||[]).push([[8],Array(132).concat([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(149),i=n(144);function a(e,t){return!t||"object"!==Object(r.a)(t)&&"function"!=typeof t?Object(i.a)(e):t}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(184);function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(r.a)(e,t)}},function(e,t,n){"use strict";var r=n(142),i=n(152);function a(e){return"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60)}function o(e){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e)}var s=35632,u=35633;function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed",n=e.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return n?n[1]:t}function l(e,t,n,r){for(var i=e.split(/\r?\n/),a={},o={},l=r||c(t)||"(unnamed)",d="".concat(function(e){switch(e){case s:return"fragment";case u:return"vertex";default:return"unknown type"}}(n)," shader ").concat(l),v=0;v<i.length;v++){var g=i[v];if(!(g.length<=1)){var b=g.split(":"),p=b[0],m=parseInt(b[2],10);if(isNaN(m))throw new Error("GLSL compilation error in ".concat(d,": ").concat(e));"WARNING"!==p?a[m]=g:o[m]=g}}var y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",r=e.split(/\r?\n/),i=String(r.length+t-1).length;return r.map(function(e,r){var a=r+t,o=String(a).length,s=h(a,i-o);return s+n+e})}(t);return{shaderName:d,errors:f(a,y),warnings:f(o,y)}}function f(e,t){for(var n="",r=0;r<t.length;r++){var i=t[r];if((e[r+3]||e[r+2]||e[r+1])&&(n+="".concat(i,"\n"),e[r+1])){var a=e[r+1],o=a.split(":",3),s=o[0],u=parseInt(o[1],10)||0,c=a.substring(o.join(":").length+1).trim();n+=h("^^^ ".concat(s,": ").concat(c,"\n\n"),u)}}return n}function h(e,t){for(var n="",r=0;r<t;++r)n+=" ";return"".concat(n).concat(e)}var d=n(153),v=n(143);function g(e){var t=100,n=e.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){var r=parseInt(n[1],10);Number.isFinite(r)&&(t=r)}return t}var b=n(155),p=n(164),m=n(173),y=n(170),_=n.n(y);function O(e,t){_()(e instanceof b.a||e instanceof p.a||e instanceof m.a);var n=e.constructor,r=e.gl,i=e.width,a=e.height,o=e.format,s=e.type,u=e.dataFormat,c=e.border,l=e.mipmaps;return new n(r,Object.assign({width:i,height:a,format:o,type:s,dataFormat:u,border:c,mipmaps:l},t))}n.d(t,"c",function(){return r.c}),n.d(t,"a",function(){return r.a}),n.d(t,"b",function(){return r.b}),n.d(t,"m",function(){return i.c}),n.d(t,"n",function(){return i.d}),n.d(t,"e",function(){return i.b}),n.d(t,"d",function(){return i.a}),n.d(t,"p",function(){return a}),n.d(t,"f",function(){return o}),n.d(t,"o",function(){return l}),n.d(t,"k",function(){return c}),n.d(t,"h",function(){return d.a}),n.d(t,"q",function(){return d.d}),n.d(t,"j",function(){return v.b}),n.d(t,"i",function(){return v.a}),n.d(t,"l",function(){return g}),n.d(t,"g",function(){return O})},function(e,t,n){"use strict";function r(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";var r=n(168),i=n(160);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=i.b.navigator||{},n=e.userAgent||t.userAgent||"",r=-1!==n.indexOf("MSIE "),a=-1!==n.indexOf("Trident/");return r||a}var o=n(138),s={};function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";s[e]=s[e]||1;var t=s[e]++;return"".concat(e,"-").concat(t)}function c(e){return Object(o.a)("number"==typeof e,"Input must be a number"),e&&0==(e&e-1)}function l(e){var t=!0;for(var n in e){t=!1;break}return t}var f=n(162);function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isInteger,r=void 0!==n&&n;if(Array.isArray(e)||ArrayBuffer.isView(e))return function(e,t){for(var n=t.maxElts,r=void 0===n?16:n,i=t.size,a=void 0===i?1:i,o="[",s=0;s<e.length&&s<r;++s)s>0&&(o+=",".concat(s%a==0?" ":"")),o+=h(e[s],t);var u=e.length>r?"...":"]";return"".concat(o).concat(u)}(e,t);if(!Number.isFinite(e))return String(e);if(Math.abs(e)<1e-16)return r?"0":"0.";if(r)return e.toFixed(0);if(Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);var i=e.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function d(e,t,n,r){var i="See luma.gl ".concat(n," Upgrade Guide at http://uber.github.io/luma.gl/#/documentation/overview/upgrade-guide"),a=Object.getPrototypeOf(e);r.forEach(function(e){a.methodName||(a[e]=function(){throw f.a.removed("Calling removed method ".concat(t,".").concat(e,": "),i),new Error(e)})})}n.d(t,"c",function(){return r.a}),n.d(t,"e",function(){return a}),n.d(t,"i",function(){return u}),n.d(t,"f",function(){return c}),n.d(t,"d",function(){return l}),n.d(t,"g",function(){return f.a}),n.d(t,"b",function(){return h}),n.d(t,"a",function(){return o.a}),n.d(t,"h",function(){return d})},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"b",function(){return f}),n.d(t,"c",function(){return h});var r=n(150),i=n(166),a=n(169),o=n(156);n.d(t,"a",function(){return o.c});var s=n(139),u=n(138),c={framebuffer:function(e,t){var n=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,n)},blend:function(e,t){return t?e.enable(3042):e.disable(3042)},blendColor:function(e,t){return e.blendColor.apply(e,Object(i.a)(t))},blendEquation:function(e,t){t=l(t)?t:[t,t],e.blendEquationSeparate.apply(e,Object(i.a)(t))},blendFunc:function(e,t){t=l(t)&&2===t.length?Object(i.a)(t).concat(Object(i.a)(t)):t,e.blendFuncSeparate.apply(e,Object(i.a)(t))},clearColor:function(e,t){return e.clearColor.apply(e,Object(i.a)(t))},clearDepth:function(e,t){return e.clearDepth(t)},clearStencil:function(e,t){return e.clearStencil(t)},colorMask:function(e,t){return e.colorMask.apply(e,Object(i.a)(t))},cull:function(e,t){return t?e.enable(2884):e.disable(2884)},cullFace:function(e,t){return e.cullFace(t)},depthTest:function(e,t){return t?e.enable(2929):e.disable(2929)},depthFunc:function(e,t){return e.depthFunc(t)},depthMask:function(e,t){return e.depthMask(t)},depthRange:function(e,t){return e.depthRange.apply(e,Object(i.a)(t))},dither:function(e,t){return t?e.enable(3024):e.disable(3024)},derivativeHint:function(e,t){e.hint(35723,t)},frontFace:function(e,t){return e.frontFace(t)},mipmapHint:function(e,t){return e.hint(33170,t)},lineWidth:function(e,t){return e.lineWidth(t)},polygonOffsetFill:function(e,t){return t?e.enable(32823):e.disable(32823)},polygonOffset:function(e,t){return e.polygonOffset.apply(e,Object(i.a)(t))},sampleCoverage:function(e,t){return e.sampleCoverage.apply(e,Object(i.a)(t))},scissorTest:function(e,t){return t?e.enable(3089):e.disable(3089)},scissor:function(e,t){return e.scissor.apply(e,Object(i.a)(t))},stencilTest:function(e,t){return t?e.enable(2960):e.disable(2960)},stencilMask:function(e,t){var n=t=l(t)?t:[t,t],i=Object(r.a)(n,2),a=i[0],o=i[1];e.stencilMaskSeparate(1028,a),e.stencilMaskSeparate(1029,o)},stencilFunc:function(e,t){var n=t=l(t)&&3===t.length?Object(i.a)(t).concat(Object(i.a)(t)):t,a=Object(r.a)(n,6),o=a[0],s=a[1],u=a[2],c=a[3],f=a[4],h=a[5];e.stencilFuncSeparate(1028,o,s,u),e.stencilFuncSeparate(1029,c,f,h)},stencilOp:function(e,t){var n=t=l(t)&&3===t.length?Object(i.a)(t).concat(Object(i.a)(t)):t,a=Object(r.a)(n,6),o=a[0],s=a[1],u=a[2],c=a[3],f=a[4],h=a[5];e.stencilOpSeparate(1028,o,s,u),e.stencilOpSeparate(1029,c,f,h)},viewport:function(e,t){return e.viewport.apply(e,Object(i.a)(t))}};function l(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function f(e,t){for(var n in Object(o.d)(e,t),t){var r=c[n];r&&r(e,t[n],n)}}function h(e,t,n){if(Object(s.d)(t))return n(e);var r,i=t.nocatch,o=void 0===i||i;if(Object(u.a)(!t.frameBuffer),Object(a.c)(e),f(e,t),o)r=n(e),Object(a.b)(e);else try{r=n(e)}finally{Object(a.b)(e)}return r}},function(e,t,n){"use strict";n.d(t,"d",function(){return s}),n.d(t,"c",function(){return f}),n.d(t,"b",function(){return d}),n.d(t,"a",function(){return v});var r=n(132),i=n(160),a=n(168),o=null,s=function(){throw new Error("luma.gl: loaded under Node.js without headless gl installed, meaning that WebGL contexts can not be created. This may not be an error. For example, this is a typical configuration for isorender applications running on the server.")};if(!a.a)try{s=n(218),o=n(219)}catch(e){}var u=function e(){Object(r.a)(this,e)},c=o||i.a,l=c.WebGLRenderingContext,f=void 0===l?u:l,h=(c.WebGLProgram,c.WebGLShader,c.WebGLBuffer),d=void 0===h?u:h;c.WebGLFramebuffer,c.WebGLRenderbuffer,c.WebGLTexture,c.WebGLUniformLocation,c.WebGLActiveInfo,c.WebGLShaderPrecisionFormat;var v=i.a.WebGL2RenderingContext||function e(){Object(r.a)(this,e)};i.a.Image},function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o}),n.d(t,"c",function(){return s});var r=n(138),i=n(162);function a(e,t){if("string"!=typeof t)return t;var n=Number(t);if(!isNaN(n))return n;var i=e[t=t.replace(/^.*\./,"")];return Object(r.a)(void 0!==i,"Accessing undefined constant GL.".concat(t)),i}function o(e,t){for(var n in t=Number(t),e)if(e[n]===t)return"GL.".concat(n);return String(t)}function s(e,t){return void 0===t&&i.a.removed("glKey(value)","glKey(gl, value)","6.0")(),o(e,t)}},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",function(){return r})},,function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(132),i=n(133),a=n(186),o=n(137),s=n(139),u=n(138),c="Resource subclass must define virtual methods",l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,e),Object(o.e)(t);var i=n.id,a=n.userData,u=void 0===a?{}:a;this.gl=t,this.id=i||Object(s.i)(this.constructor.name),this.userData=u,this._bound=!1,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this._addStats()}return Object(i.a)(e,[{key:"toString",value:function(){return"".concat(this.constructor.name,"(").concat(this.id,")")}},{key:"delete",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).deleteChildren,t=void 0!==e&&e,n=this._handle&&this._deleteHandle(this._handle);return this._handle=null,this._removeStats(),n&&t&&n.filter(Boolean).forEach(function(e){e.delete()}),this}},{key:"bind",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof t?(this._bindHandle(t),this):(this._bound?e=t():(this._bindHandle(this.handle),this._bound=!0,e=t(),this._bound=!1,this._bindHandle(null)),e)}},{key:"unbind",value:function(){this.bind(null)}},{key:"getParameter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(o.j)(this.gl,e),Object(u.a)(e);var n=(this.constructor.PARAMETERS||{})[e];if(n){var r=Object(o.n)(this.gl);if(!((!("webgl2"in n)||r)&&(!("extension"in n)||this.gl.getExtension(n.extension)))){var i=n.webgl1,a="webgl2"in n?n.webgl2:n.webgl1;return r?a:i}}return this._getParameter(e,t)}},{key:"getParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=t.parameters,r=t.keys,i=this.constructor.PARAMETERS||{},a=Object(o.n)(this.gl),s={},u=n||Object.keys(i),c=!0,l=!1,f=void 0;try{for(var h,d=u[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var v=h.value,g=i[v];if(g&&(!("webgl2"in g)||a)&&(!("extension"in g)||this.gl.getExtension(g.extension))){var b=r?Object(o.i)(this.gl,v):v;s[b]=this.getParameter(v,e),r&&"GLenum"===g.type&&(s[b]=Object(o.i)(this.gl,s[b]))}}}catch(e){l=!0,f=e}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}return s}},{key:"setParameter",value:function(e,t){e=Object(o.j)(this.gl,e),Object(u.a)(e);var n=(this.constructor.PARAMETERS||{})[e];if(n){var r=Object(o.n)(this.gl);if(!((!("webgl2"in n)||r)&&(!("extension"in n)||this.gl.getExtension(n.extension))))throw new Error("Parameter not available on this platform");"GLenum"===n.type&&(t=Object(o.j)(t))}return this._setParameter(e,t),this}},{key:"setParameters",value:function(e){for(var t in e)this.setParameter(t,e[t]);return this}},{key:"stubRemovedMethods",value:function(e,t,n){return Object(s.h)(this,e,t,n)}},{key:"initialize",value:function(e){}},{key:"_createHandle",value:function(){throw new Error(c)}},{key:"_deleteHandle",value:function(){throw new Error(c)}},{key:"_bindHandle",value:function(){throw new Error(c)}},{key:"_getOptsFromHandle",value:function(){throw new Error(c)}},{key:"_getParameter",value:function(e,t){throw new Error(c)}},{key:"_setParameter",value:function(e,t){throw new Error(c)}},{key:"_context",value:function(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function(){var e=this.constructor.name,t=a.default.stats;t.resourceCount=t.resourceCount||0,t.resourceMap=t.resourceMap||{},t.resourceCount++,t.resourceMap[e]=t.resourceMap[e]||{created:0,active:0},t.resourceMap[e].created++,t.resourceMap[e].active++}},{key:"_removeStats",value:function(){var e=this.constructor.name;a.default.stats.resourceMap[e].active--}},{key:"handle",get:function(){return this._handle}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n(132),i=n(133),a=n(135),o=n(134),s=n(136),u=n(144),c=n(146),l=n(167),f=n(137),h=n(153),d=n(139),v=n(138),g=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,t),(n=Object(a.a)(this,Object(o.a)(t).call(this,e,i))).stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),n.target=i.target||(n.gl.webgl2?36662:34962),n._initialize(i),Object.seal(Object(u.a)(Object(u.a)(n))),n}return Object(s.a)(t,e),Object(i.a)(t,[{key:"getElementCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/l.a.getBytesPerElement(e))}},{key:"getVertexCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/l.a.getBytesPerVertex(e))}},{key:"initialize",value:function(e){return this._initialize(e)}},{key:"setProps",value:function(e){return"data"in e&&this.setData(e),this}},{key:"setAccessor",value:function(e){return this.accessor=e,this}},{key:"reallocate",value:function(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}},{key:"setData",value:function(e){return this.initialize(e)}},{key:"subData",value:function(e){ArrayBuffer.isView(e)&&(e={data:e});var t=e,n=t.data,r=t.offset,i=void 0===r?0:r,a=t.srcOffset,o=void 0===a?0:a,s=e.byteLength||e.length;Object(v.a)(n);var u=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(u,this.handle),0!==o||void 0!==s?(Object(f.d)(this.gl),this.gl.bufferSubData(this.target,i,n,o,s)):this.gl.bufferSubData(u,i,n),this.gl.bindBuffer(u,null),this.debugData=null,this.accessor.type||this.setAccessor(new l.a(this.accessor,{type:Object(h.b)(n)})),this}},{key:"copyData",value:function(e){var t=e.sourceBuffer,n=e.readOffset,r=void 0===n?0:n,i=e.writeOffset,a=void 0===i?0:i,o=e.size,s=this.gl;return Object(f.d)(s),s.bindBuffer(36662,t.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,r,a,o),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dstData,n=void 0===t?null:t,r=e.srcByteOffset,i=void 0===r?0:r,a=e.dstOffset,o=void 0===a?0:a,s=e.length,u=void 0===s?0:s;Object(f.d)(this.gl);var c,l,d=Object(h.c)(this.accessor.type||5126,{clamped:!1}),g=this._getAvailableElementCount(i),b=o;n?c=(l=n.length)-b:l=b+(c=Math.min(g,u||g));var p=Math.min(g,c);return u=u||p,Object(v.a)(u<=p),n=n||new d(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,i,n,o,u),this.gl.bindBuffer(36662,null),n}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?this.target:t,r=e.index,i=void 0===r?this.accessor&&this.accessor.index:r,a=e.offset,o=void 0===a?0:a,s=e.size;return 35345===n||35982===n?void 0!==s?this.gl.bindBufferRange(n,i,this.handle,o,s):(Object(v.a)(0===o),this.gl.bindBufferBase(n,i,this.handle)):this.gl.bindBuffer(n,this.handle),this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?this.target:t,r=e.index,i=void 0===r?this.accessor&&this.accessor.index:r;return 35345===n||35982===n?this.gl.bindBufferBase(n,i,null):this.gl.bindBuffer(n,null),this}},{key:"getDebugData",value:function(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:10}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function(){this.debugData=null}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e.bytes&&d.g.deprecated("bytes","byteLength");var t=e.byteLength||e.bytes||0;return this.usage=e.usage||35044,this.setAccessor(new l.a(e,e.accessor)),e.data?this._setData(e.data):this._setByteLength(t)}},{key:"_setData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Object(v.a)(ArrayBuffer.isView(e));var n=this._getTarget();this.gl.bindBuffer(n,this.handle),this.gl.bufferData(n,e,t),this.gl.bindBuffer(n,null),this.usage=t,this.debugData=e.slice(0,10),this.byteLength=e.byteLength,this.bytesUsed=e.byteLength;var r=Object(h.b)(e);return Object(v.a)(r),this.setAccessor(new l.a(this.accessor,{type:r})),this}},{key:"_setByteLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Object(v.a)(e>=0);var n=e;0===e&&(n=new Float32Array(0));var r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,t),this.gl.bindBuffer(r,null),this.usage=t,this.debugData=null,this.byteLength=e,this.bytesUsed=e,this}},{key:"_getTarget",value:function(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function(e){var t=e/Object(h.c)(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-t}},{key:"_createHandle",value:function(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteBuffer(this.handle)}},{key:"_getParameter",value:function(e){this.gl.bindBuffer(this.target,this.handle);var t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}},{key:"updateAccessor",value:function(e){return d.g.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)"),this.accessor=new l.a(this.accessor,e),this}},{key:"setByteLength",value:function(e){return d.g.deprecated("setByteLength","reallocate"),this.reallocate(e)}},{key:"data",get:function(){d.g.removed("Buffer.data","N/A","v6.0")}},{key:"bytes",get:function(){return d.g.deprecated("Buffer.bytes","Buffer.byteLength","v6.1"),this.byteLength}}]),t}(c.a)},,function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";(function(e,r){n.d(t,"b",function(){return o}),n.d(t,"a",function(){return s});var i=n(149),a={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document,process:"object"===(void 0===r?"undefined":Object(i.a)(r))&&r},o=a.window||a.self||a.global,s=a.process||{};console}).call(this,n(148),n(159))},function(e,t,n){"use strict";n.d(t,"c",function(){return c}),n.d(t,"d",function(){return l}),n.d(t,"b",function(){return f}),n.d(t,"a",function(){return h});var r=n(142),i=n(138),a=34962,o=32874,s="Invalid WebGLRenderingContext",u="Requires WebGL2";function c(e){return Boolean(e&&(e instanceof r.c||e.ARRAY_BUFFER===a))}function l(e){return Boolean(e&&(e instanceof r.a||e.TEXTURE_BINDING_3D===o))}function f(e){Object(i.a)(c(e),s)}function h(e){Object(i.a)(l(e),u)}},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return o}),n.d(t,"d",function(){return s});var r="Failed to deduce GL constant from typed array";function i(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(r)}}function a(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clamped,n=void 0===t||t;switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return n?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function o(e){var t=e.data,n=e.width,r=e.height,i=e.bytesPerPixel,a=void 0===i?4:i,o=e.temp,s=n*a;o=o||new Uint8Array(s);for(var u=0;u<r/2;++u){var c=u*s,l=(r-u-1)*s;o.set(t.subarray(c,c+s)),t.copyWithin(c,l,l+s),t.set(o,l)}}function s(e){for(var t=e.data,n=e.width,r=e.height,i=Math.round(n/2),a=Math.round(r/2),o=new Uint8Array(i*a*4),s=0;s<a;s++)for(var u=0;u<i;u++)for(var c=0;c<4;c++)o[4*(s*i+u)+c]=t[4*(2*s*n+2*u)+c];return{data:o,width:i,height:a}}},,function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(132),i=n(135),a=n(134),o=n(133),s=n(136),u=n(144),c=n(161),l=n(137),f=function(e){function t(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,t),Object(l.e)(e),(n=Object(i.a)(this,Object(a.a)(t).call(this,e,Object.assign({},o,{target:3553})))).initialize(o),Object.seal(Object(u.a)(Object(u.a)(n))),n}return Object(s.a)(t,e),Object(o.a)(t,null,[{key:"isSupported",value:function(e,t){return c.a.isSupported(e,t)}}]),Object(o.a)(t,[{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,t=this.gl;if(void 0===e)throw new Error("Texture.bind: must specify texture unit");return this.textureUnit=e,t.activeTexture(33984+e),t.bindTexture(this.target,this.handle),e}},{key:"unbind",value:function(){var e=this.gl;if(void 0===this.textureUnit)throw new Error("Texture.unbind: texture unit not specified");return e.activeTexture(33984+this.textureUnit),e.bindTexture(this.target,null),this.textureUnit}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}}]),t}(c.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"d",function(){return p}),n.d(t,"b",function(){return y}),n.d(t,"c",function(){return _});var r,i,a,o=n(166),s=n(140),u=n(137),c=(n(138),r={},Object(s.a)(r,3042,!1),Object(s.a)(r,32773,new Float32Array([0,0,0,0])),Object(s.a)(r,32777,32774),Object(s.a)(r,34877,32774),Object(s.a)(r,32969,1),Object(s.a)(r,32968,0),Object(s.a)(r,32971,1),Object(s.a)(r,32970,0),Object(s.a)(r,3106,new Float32Array([0,0,0,0])),Object(s.a)(r,3107,[!0,!0,!0,!0]),Object(s.a)(r,2884,!1),Object(s.a)(r,2885,1029),Object(s.a)(r,2929,!1),Object(s.a)(r,2931,1),Object(s.a)(r,2932,513),Object(s.a)(r,2928,new Float32Array([0,1])),Object(s.a)(r,2930,!0),Object(s.a)(r,3024,!0),Object(s.a)(r,36006,null),Object(s.a)(r,2886,2305),Object(s.a)(r,33170,4352),Object(s.a)(r,2849,1),Object(s.a)(r,32823,!1),Object(s.a)(r,32824,0),Object(s.a)(r,10752,0),Object(s.a)(r,32938,1),Object(s.a)(r,32939,!1),Object(s.a)(r,3089,!1),Object(s.a)(r,3088,new Int32Array([0,0,1024,1024])),Object(s.a)(r,2960,!1),Object(s.a)(r,2961,0),Object(s.a)(r,2968,4294967295),Object(s.a)(r,36005,4294967295),Object(s.a)(r,2962,519),Object(s.a)(r,2967,0),Object(s.a)(r,2963,4294967295),Object(s.a)(r,34816,519),Object(s.a)(r,36003,0),Object(s.a)(r,36004,4294967295),Object(s.a)(r,2964,7680),Object(s.a)(r,2965,7680),Object(s.a)(r,2966,7680),Object(s.a)(r,34817,7680),Object(s.a)(r,34818,7680),Object(s.a)(r,34819,7680),Object(s.a)(r,2978,new Int32Array([0,0,1024,1024])),Object(s.a)(r,3333,4),Object(s.a)(r,3317,4),Object(s.a)(r,37440,!1),Object(s.a)(r,37441,!1),Object(s.a)(r,37443,37444),Object(s.a)(r,35723,4352),Object(s.a)(r,36010,null),Object(s.a)(r,35977,!1),Object(s.a)(r,3330,0),Object(s.a)(r,3332,0),Object(s.a)(r,3331,0),Object(s.a)(r,3314,0),Object(s.a)(r,32878,0),Object(s.a)(r,3316,0),Object(s.a)(r,3315,0),Object(s.a)(r,32877,0),r),l=function(e,t,n){return t?e.enable(n):e.disable(n)},f=function(e,t,n){return e.hint(n,t)},h=function(e,t,n){return e.pixelStorei(n,t)},d=(i={},Object(s.a)(i,3042,l),Object(s.a)(i,32773,function(e,t){return e.blendColor.apply(e,Object(o.a)(t))}),Object(s.a)(i,32777,"blendEquation"),Object(s.a)(i,34877,"blendEquation"),Object(s.a)(i,32969,"blendFunc"),Object(s.a)(i,32968,"blendFunc"),Object(s.a)(i,32971,"blendFunc"),Object(s.a)(i,32970,"blendFunc"),Object(s.a)(i,3106,function(e,t){return e.clearColor.apply(e,Object(o.a)(t))}),Object(s.a)(i,3107,function(e,t){return e.colorMask.apply(e,Object(o.a)(t))}),Object(s.a)(i,2884,l),Object(s.a)(i,2885,function(e,t){return e.cullFace(t)}),Object(s.a)(i,2929,l),Object(s.a)(i,2931,function(e,t){return e.clearDepth(t)}),Object(s.a)(i,2932,function(e,t){return e.depthFunc(t)}),Object(s.a)(i,2928,function(e,t){return e.depthRange.apply(e,Object(o.a)(t))}),Object(s.a)(i,2930,function(e,t){return e.depthMask(t)}),Object(s.a)(i,3024,l),Object(s.a)(i,35723,f),Object(s.a)(i,36006,function(e,t){var n=Object(u.n)(e)?36009:36160;return e.bindFramebuffer(n,t)}),Object(s.a)(i,2886,function(e,t){return e.frontFace(t)}),Object(s.a)(i,33170,f),Object(s.a)(i,2849,function(e,t){return e.lineWidth(t)}),Object(s.a)(i,32823,l),Object(s.a)(i,32824,"polygonOffset"),Object(s.a)(i,10752,"polygonOffset"),Object(s.a)(i,35977,l),Object(s.a)(i,32938,"sampleCoverage"),Object(s.a)(i,32939,"sampleCoverage"),Object(s.a)(i,3089,l),Object(s.a)(i,3088,function(e,t){return e.scissor.apply(e,Object(o.a)(t))}),Object(s.a)(i,2960,l),Object(s.a)(i,2961,function(e,t){return e.clearStencil(t)}),Object(s.a)(i,2968,function(e,t){return e.stencilMaskSeparate(1028,t)}),Object(s.a)(i,36005,function(e,t){return e.stencilMaskSeparate(1029,t)}),Object(s.a)(i,2962,"stencilFuncFront"),Object(s.a)(i,2967,"stencilFuncFront"),Object(s.a)(i,2963,"stencilFuncFront"),Object(s.a)(i,34816,"stencilFuncBack"),Object(s.a)(i,36003,"stencilFuncBack"),Object(s.a)(i,36004,"stencilFuncBack"),Object(s.a)(i,2964,"stencilOpFront"),Object(s.a)(i,2965,"stencilOpFront"),Object(s.a)(i,2966,"stencilOpFront"),Object(s.a)(i,34817,"stencilOpBack"),Object(s.a)(i,34818,"stencilOpBack"),Object(s.a)(i,34819,"stencilOpBack"),Object(s.a)(i,2978,function(e,t){return e.viewport.apply(e,Object(o.a)(t))}),Object(s.a)(i,3333,h),Object(s.a)(i,3317,h),Object(s.a)(i,37440,h),Object(s.a)(i,37441,h),Object(s.a)(i,37443,h),Object(s.a)(i,3330,h),Object(s.a)(i,3332,h),Object(s.a)(i,3331,h),Object(s.a)(i,36010,function(e,t){return e.bindFramebuffer(36008,t)}),Object(s.a)(i,3314,h),Object(s.a)(i,32878,h),Object(s.a)(i,3316,h),Object(s.a)(i,3315,h),Object(s.a)(i,32877,h),i),v={blendEquation:function(e,t){return e.blendEquationSeparate(t[32777],t[34877])},blendFunc:function(e,t){return e.blendFuncSeparate(t[32969],t[32968],t[32971],t[32970])},polygonOffset:function(e,t){return e.polygonOffset(t[32824],t[10752])},sampleCoverage:function(e,t){return e.sampleCoverage(t[32938],t[32939])},stencilFuncFront:function(e,t){return e.stencilFuncSeparate(1028,t[2962],t[2967],t[2963])},stencilFuncBack:function(e,t){return e.stencilFuncSeparate(1029,t[34816],t[36003],t[36004])},stencilOpFront:function(e,t){return e.stencilOpSeparate(1028,t[2964],t[2965],t[2966])},stencilOpBack:function(e,t){return e.stencilOpSeparate(1029,t[34817],t[34818],t[34819])}},g=function(e,t){return e.isEnabled(t)},b=(a={},Object(s.a)(a,3042,g),Object(s.a)(a,2884,g),Object(s.a)(a,2929,g),Object(s.a)(a,3024,g),Object(s.a)(a,32823,g),Object(s.a)(a,32926,g),Object(s.a)(a,32928,g),Object(s.a)(a,3089,g),Object(s.a)(a,2960,g),Object(s.a)(a,35977,g),a);function p(e,t){var n={};for(var r in t){var i=Number(r),a=d[r];a&&("string"==typeof a?n[a]=!0:a(e,t[r],i))}var o=e.state&&e.state.cache;if(o){var s=Object.assign({},o,t);for(var u in n){(0,v[u])(e,s)}}}function m(e,t){var n=b[t];return n?n(e,Number(t)):e.getParameter(Number(t))}function y(e,t){t=t||c;var n=Array.isArray(t)?t:Object.keys(t),r={},i=!0,a=!1,o=void 0;try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;r[l]=m(e,l)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return r}function _(e){p(e,Object.assign({},c,{}))}},,,function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!l){var e=s(h);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function v(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new v(e,t)),1!==c.length||l||s(d)},v.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return i}),n.d(t,"a",function(){return a});var r={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document},i=r.window||r.self||r.global,a=r.global||r.self||r.window}).call(this,n(148))},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r,i=n(132),a=n(135),o=n(134),s=n(133),u=n(136),c=n(140),l=n(146),f=n(147),h=n(141),d=n(137),v=n(139),g=n(138),b=[9729,9728],p=(r={},Object(c.a)(r,6407,{dataFormat:6407,types:[5121,33635]}),Object(c.a)(r,6408,{dataFormat:6408,types:[5121,32819,32820]}),Object(c.a)(r,6406,{dataFormat:6406,types:[5121]}),Object(c.a)(r,6409,{dataFormat:6409,types:[5121]}),Object(c.a)(r,6410,{dataFormat:6410,types:[5121]}),Object(c.a)(r,33326,{dataFormat:6403,types:[5126],gl2:!0}),Object(c.a)(r,33328,{dataFormat:33319,types:[5126],gl2:!0}),Object(c.a)(r,34837,{dataFormat:6407,types:[5126],gl2:!0}),Object(c.a)(r,34836,{dataFormat:6408,types:[5126],gl2:!0}),r);var m=function(e){function t(e,n){var r;Object(i.a)(this,t);var s=n.id,u=void 0===s?Object(v.i)("texture"):s,c=n.handle,l=n.target;return(r=Object(a.a)(this,Object(o.a)(t).call(this,e,{id:u,handle:c}))).target=l,r.hasFloatTexture=e.getExtension("OES_texture_float"),r.textureUnit=void 0,r}return Object(u.a)(t,e),Object(s.a)(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.format,r=t.linearFiltering,i=!0;return n&&(i=(i=i&&function(e,t){var n=p[t];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;var r=Object(d.n)(e)&&n.gl2||n.gl1;return"string"==typeof r?e.getExtension(r):r}(e,n))&&(!r||function(e,t){var n=p[t];switch(n&&n.types[0]){case 5126:return e.getExtension("OES_texture_float_linear");case 5131:return e.getExtension("OES_texture_half_float_linear");default:return!0}}(e,n))),i}}]),Object(s.a)(t,[{key:"toString",value:function(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=e.pixels,r=void 0===n?null:n,i=e.format,a=void 0===i?6408:i,o=e.type,s=void 0===o?5121:o,u=e.border,l=void 0===u?0:u,f=e.recreate,h=void 0!==f&&f,d=e.parameters,g=void 0===d?{}:d,b=e.pixelStore,p=void 0===b?{}:b,m=e.textureUnit,y=void 0===m?void 0:m,_=e.unpackFlipY,O=void 0===_||_,E=e.mipmaps,w=void 0===E||E;t||(t=r);var j=e.width,x=e.height,A=e.dataFormat,k=this._deduceParameters({format:a,type:s,dataFormat:A,compressed:!1,data:t,width:j,height:x});j=k.width,x=k.height,A=k.dataFormat,this.width=j,this.height=x,this.format=a,this.type=s,this.dataFormat=A,this.border=l,this.textureUnit=y,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle));var T=Object(c.a)({},37440,O),S=Object.assign({},T,p);this._isNPOT()&&w&&(v.g.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),w=!1,this._updateForNPOT(g)),this.mipmaps=w,this.setImageData({data:t,width:j,height:x,format:a,type:s,dataFormat:A,border:l,mipmaps:w,parameters:S}),w&&this.generateMipmap(),this.setParameters(g),h&&(this.data=t)}},{key:"resize",value:function(e){var t=e.width,n=e.height;return t!==this.width||n!==this.height?this.initialize({width:t,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:!1}):this}},{key:"generateMipmap",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindTexture(this.target,this.handle),Object(h.c)(this.gl,t,function(){e.gl.generateMipmap(e.target)}),this.gl.bindTexture(this.target,null),this}},{key:"setImageData",value:function(e){var t=e.target,n=void 0===t?this.target:t,r=e.pixels,i=void 0===r?null:r,a=e.data,o=void 0===a?null:a,s=e.width,u=void 0===s?this.width:s,c=e.height,l=void 0===c?this.height:c,f=e.level,v=void 0===f?0:f,b=e.format,p=void 0===b?this.format:b,m=e.type,y=void 0===m?this.type:m,_=e.dataFormat,O=void 0===_?this.dataFormat:_,E=e.offset,w=void 0===E?0:E,j=e.border,x=void 0===j?this.border:j,A=e.compressed,k=void 0!==A&&A,T=e.parameters,S=void 0===T?{}:T;o||(o=i);var P=this._deduceParameters({format:p,type:y,dataFormat:O,compressed:k,data:o,width:u,height:l});y=P.type,O=P.dataFormat,k=P.compressed,u=P.width,l=P.height;var L=this.gl;L.bindTexture(this.target,this.handle);var F,I=this._getDataType({data:o,compressed:k});o=I.data,F=I.dataType,Object(h.c)(this.gl,S,function(){switch(F){case"null":L.texImage2D(n,v,p,u,l,x,O,y,o);break;case"typed-array":L.texImage2D(n,v,p,u,l,x,O,y,o,w);break;case"buffer":Object(d.d)(L),L.bindBuffer(35052,o.handle||o),L.texImage2D(n,v,p,u,l,x,O,y,w),L.bindBuffer(35052,null);break;case"browser-object":Object(d.n)(L)?L.texImage2D(n,v,p,u,l,x,O,y,o):L.texImage2D(n,v,p,O,y,o);break;case"compressed":L.compressedTexImage2D(n,v,p,u,l,x,o);break;default:Object(g.a)(!1,"Unknown image data type")}})}},{key:"setSubImageData",value:function(e){var t=this,n=e.target,r=void 0===n?this.target:n,i=e.pixels,a=void 0===i?null:i,o=e.data,s=void 0===o?null:o,u=e.x,c=void 0===u?0:u,l=e.y,v=void 0===l?0:l,g=e.width,b=void 0===g?this.width:g,p=e.height,m=void 0===p?this.height:p,y=e.level,_=void 0===y?0:y,O=e.format,E=void 0===O?this.format:O,w=e.type,j=void 0===w?this.type:w,x=e.dataFormat,A=void 0===x?this.dataFormat:x,k=e.compressed,T=void 0!==k&&k,S=e.offset,P=void 0===S?0:S,L=e.border,F=(void 0===L&&this.border,e.parameters),I=void 0===F?{}:F,R=this._deduceParameters({format:E,type:j,dataFormat:A,compressed:T,data:s,width:b,height:m});if(j=R.type,A=R.dataFormat,T=R.compressed,b=R.width,m=R.height,s||(s=a),s&&s.data){var M=s;s=M.data,b=M.shape[0],m=M.shape[1]}s instanceof f.a&&(s=s.handle),this.gl.bindTexture(this.target,this.handle),Object(h.c)(this.gl,I,function(){T?t.gl.compressedTexSubImage2D(r,_,c,v,b,m,E,s):null===s?t.gl.texSubImage2D(r,_,c,v,b,m,A,j,null):ArrayBuffer.isView(s)?t.gl.texSubImage2D(r,_,c,v,b,m,A,j,s,P):s instanceof d.b?(Object(d.d)(t.gl),t.gl.bindBuffer(35052,s),t.gl.texSubImage2D(r,_,c,v,b,m,A,j,P),t.gl.bindBuffer(35052,null)):Object(d.n)(t.gl)?t.gl.texSubImage2D(r,_,c,v,b,m,A,j,s):t.gl.texSubImage2D(r,_,c,v,A,j,s)}),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function(e){var t=e.target,n=(void 0===t&&this.target,e.framebuffer),r=(e.offset,e.x),i=void 0===r?0:r,a=e.y,o=void 0===a?0:a,s=e.width,u=e.height,c=e.level,l=void 0===c?0:c,f=e.internalFormat,h=void 0===f?6408:f,d=e.border,v=void 0===d?0:d;n&&n.bind(),this.bind(),this.gl.copyTexImage2D(this.target,l,h,i,o,s,u,v),this.unbind(),n&&n.unbind()}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;if(void 0===e)throw new Error("Texture.bind: must specify texture unit");return this.textureUnit=e,this.gl.activeTexture(33984+e),this.gl.bindTexture(this.target,this.handle),e}},{key:"unbind",value:function(){if(void 0===this.textureUnit)throw new Error("Texture.unbind: texture unit not specified");return this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,null),this.textureUnit}},{key:"_getDataType",value:function(e){var t=e.data,n=e.compressed;return void 0!==n&&n?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof f.a?{data:t.handle,dataType:"buffer"}:t instanceof d.b?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}},{key:"setImage3D",value:function(e){var t=e.level,n=void 0===t?0:t,r=e.internalformat,i=void 0===r?6408:r,a=e.width,o=e.height,s=e.depth,u=void 0===s?1:s,c=e.border,l=void 0===c?0:c,h=e.format,d=e.type,v=void 0===d?5121:d,g=e.offset,b=void 0===g?0:g,p=e.pixels;return ArrayBuffer.isView(p)?(this.gl.texImage3D(this.target,n,i,a,o,u,l,h,v,p),this):(p instanceof f.a&&(this.gl.bindBuffer(35052,p.handle),this.gl.texImage3D(this.target,n,i,a,o,u,l,h,v,b)),this)}},{key:"_deduceParameters",value:function(e){var t=e.format,n=e.data,r=e.width,i=e.height,a=e.dataFormat,o=e.type,s=e.compressed,u=p[t];a=a||u&&u.dataFormat,o=o||u&&u.types[0],s=s||u&&u.compressed;var c=this._deduceImageSize({data:n,width:r,height:i});return{dataFormat:a,type:o,compressed:s,width:r=c.width,height:i=c.height,format:t,data:n}}},{key:"_deduceImageSize",value:function(e){var t,n=e.data,r=e.width,i=e.height;return t="undefined"!=typeof ImageData&&n instanceof ImageData?{width:n.width,height:n.height}:"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement?{width:n.naturalWidth,height:n.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&n instanceof HTMLCanvasElement?{width:n.width,height:n.height}:"undefined"!=typeof HTMLVideoElement&&n instanceof HTMLVideoElement?{width:n.videoWidth,height:n.videoHeight}:n?{width:r,height:i}:{width:r>=0?r:1,height:i>=0?i:1},Object(g.a)(t,"Could not deduced texture size"),Object(g.a)(void 0===r||t.width===r,"Deduced texture width does not match supplied width"),Object(g.a)(void 0===i||t.height===i,"Deduced texture height does not match supplied height"),t}},{key:"_createHandle",value:function(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function(){this.gl.deleteTexture(this.handle)}},{key:"_getParameter",value:function(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}},{key:"_setParameter",value:function(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:Object(g.a)(!1);break;default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function(){return!(Object(d.n)(this.gl)||Object(v.f)(this.width)&&Object(v.f)(this.height))}},{key:"_updateForNPOT",value:function(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function(e,t){if(this._isNPOT())switch(e){case 10241:-1===b.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071)}return t}}]),t}(l.a)},function(e,t,n){"use strict";var r=n(149),i=n(166),a=n(132),o=n(133),s=n(181),u="2.0.1",c=Object(s.a)();var l=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";Object(a.a)(this,e),this.storage=function(e){try{var t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),t}catch(e){return null}}(r),this.id=t,this.config={},Object.assign(this.config,n),this._loadConfiguration()}return Object(o.a)(e,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(e){return this.config={},this.updateConfiguration(e)}},{key:"updateConfiguration",value:function(e){if(Object.assign(this.config,e),this.storage){var t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}return this}},{key:"_loadConfiguration",value:function(){var e={};if(this.storage){var t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}]),e}(),f=n(151);function h(){if(!c){var e=f.a.hrtime();return e[0]+e[1]/1e6}return f.b.performance?f.b.performance.now():Date.now()}h();function d(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,i=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>r&&(n=Math.min(n,r/e.width));var a=e.width*n,o=e.height*n,s=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(a/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(a,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),s]}var v={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function g(e){return"string"==typeof e?v[e.toUpperCase()]||v.WHITE:e}function b(e,t){if(!e)throw new Error("Assertion failed. ".concat(t))}var p={debug:c&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},m={enabled:!1,priority:0};function y(){}var _={};var O=function(){function e(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;Object(a.a)(this,e),this.id=t,this.VERSION=u,this._startTs=h(),this._deltaTs=h(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new l("__probe-".concat(this.id,"__"),m),this.userData={},this.timeStamp("".concat(this.id," started")),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"],n=Object.getPrototypeOf(e),r=Object.getOwnPropertyNames(n),i=!0,a=!1,o=void 0;try{for(var s,u=function(){var n=s.value;"function"==typeof e[n]&&(t.find(function(e){return n===e})||(e[n]=e[n].bind(e)))},c=r[Symbol.iterator]();!(i=(s=c.next()).done);i=!0)u()}catch(e){a=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}}(this),Object.seal(this)}return Object(o.a)(e,[{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getPriority",value:function(){return this._storage.config.priority}},{key:"getLevel",value:function(){return this._storage.config.priority}},{key:"getTotal",value:function(){return Number((h()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number((h()-this._deltaTs).toPrecision(10))}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:e}),this}},{key:"setLevel",value:function(e){return this._storage.updateConfiguration({priority:e}),this}},{key:"warn",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this._getLogFunction({message:e,args:n,method:p.warn,once:!0})}},{key:"error",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this._getLogFunction({message:e,args:n,method:p.error})}},{key:"deprecated",value:function(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}},{key:"removed",value:function(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}},{key:"probe",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction({priority:e,message:t,args:r,method:p.log,time:!0,once:!0})}},{key:"log",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction({priority:e,message:t,args:r,method:p.debug})}},{key:"info",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction({priority:e,message:t,args:r,method:console.info})}},{key:"once",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction({priority:e,message:t,args:r,method:p.debug||p.info,once:!0})}},{key:"table",value:function(e,t,n){if(t){var r=function(e){for(var t in e)for(var n in e[t])return n||"untitled";return"empty"}(t);return this._getLogFunction({priority:e,message:t,args:n&&[n],tag:r,method:console.table||y})}return y}},{key:"image",value:function(e){var t=e.priority,n=e.image,r=e.message,i=void 0===r?"":r,a=e.scale,o=void 0===a?1:a;return t>this.getPriority()?y:c?this._logImageInBrowser({image:n,message:i,scale:o}):this._logImageInNode({image:n,message:i,scale:o})}},{key:"_logImageInNode",value:function(e){var t=e.image,r=(e.message,e.scale),i=void 0===r?1:r,a=null;try{a=n(216)}catch(e){}return a?function(){return a(t,{fit:"box",width:"".concat(Math.round(80*i),"%")}).then(function(e){return console.log(e)})}:y}},{key:"_logImageInBrowser",value:function(e){var t=e.image,n=e.message,r=void 0===n?"":n,a=e.scale,o=void 0===a?1:a;if("string"==typeof t){var s=new Image;return s.onload=function(){var e,t=d(s,r,o);(e=console).log.apply(e,Object(i.a)(t))},s.src=t,y}var u,c=t.nodeName||"";if("img"===c.toLowerCase())return(u=console).log.apply(u,Object(i.a)(d(t,r,o))),y;if("canvas"===c.toLowerCase()){var l=new Image;return l.onload=function(){var e;return(e=console).log.apply(e,Object(i.a)(d(l,r,o)))},l.src=t.toDataURL(),y}return y}},{key:"time",value:function(e,t){return this._getLogFunction({priority:e,message:t,method:console.time?console.time:console.info})}},{key:"timeEnd",value:function(e,t){return this._getLogFunction({priority:e,message:t,method:console.timeEnd?console.timeEnd:console.info})}},{key:"timeStamp",value:function(e,t){return this._getLogFunction({priority:e,message:t,method:console.timeStamp||y})}},{key:"group",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1},r=(n=this._normalizeArguments({priority:e,message:t,opts:n})).collapsed;return this._getLogFunction({priority:e,message:t,opts:n,method:(r?console.groupCollapsed:console.group)||console.info})}},{key:"groupCollapsed",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(e,t,Object.assign({},n,{collapsed:!0}))}},{key:"groupEnd",value:function(e){return this._getLogFunction({priority:e,message:"",method:console.groupEnd||y})}},{key:"withGroup",value:function(e,t,n){var r=this._normalizeArguments({priority:e,message:t});this.group(r);try{n()}finally{this.groupEnd(r.message)}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(e){return 0===(e=this._normalizePriority(e))||this.isEnabled()&&this.getPriority()>=e}},{key:"_getElapsedTime",value:function(){var e=this.getTotal(),t=this.getDelta();return this._deltaTs=h(),{total:e,delta:t}}},{key:"_getLogFunction",value:function(e){if(this._shouldLog(e.priority)){var t=e.method;e=this._parseArguments(e),b(t);var n=e.message,r=e.tag||e.message;if(e.once){if(_[r])return y;_[r]=h()}return n=this._decorateMessage(n,e),t.bind.apply(t,[console,n].concat(Object(i.a)(e.args)))}return y}},{key:"_parseArguments",value:function(e){var t=this._normalizeArguments(e),n=this._getElapsedTime(),r=n.delta,i=n.total;return Object.assign(e,t,{delta:r,total:i})}},{key:"_normalizePriority",value:function(e){var t;switch(Object(r.a)(e)){case"number":t=e;break;case"object":t=e.priority||0;break;default:t=0}return b(Number.isFinite(t)&&t>=0),t}},{key:"_normalizeArguments",value:function(e){var t=e.priority,n=e.message,i=e.args,a=void 0===i?[]:i,o=e.opts,s={priority:this._normalizePriority(t),message:n,args:a};switch(Object(r.a)(t)){case"string":case"function":void 0!==n&&a.unshift(n),Object.assign(s,{message:t});break;case"object":Object.assign(s,t)}return"function"==typeof s.message&&(s.message=this._shouldLog(s.priority)?s.message():""),b("string"==typeof s.message||"object"===Object(r.a)(s.message)),Object.assign(s,o)}},{key:"_decorateMessage",value:function(e,t){if("string"==typeof e){var n="";if(t.time){var r=this._getElapsedTime().total;n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=Math.max(t-e.length,0);return"".concat(" ".repeat(n)).concat(e)}((s=r)<10?"".concat(s.toFixed(2),"ms"):s<100?"".concat(s.toFixed(1),"ms"):s<1e3?"".concat(s.toFixed(0),"ms"):"".concat((s/1e3).toFixed(2),"s"))}e=t.time?"".concat(this.id,": ").concat(n,"  ").concat(e):"".concat(this.id,": ").concat(e),i=e,a=t.color,o=t.background,c||"string"!=typeof i||(a&&(a=g(a),i="[".concat(a,"m").concat(i,"[39m")),o&&(a=g(o),i="[".concat(o+10,"m").concat(i,"[49m"))),e=i}var i,a,o,s;return e}},{key:"priority",set:function(e){return this._storage.updateConfiguration({priority:e}),this},get:function(){return this._storage.config.priority}}]),e}();O.VERSION=u;t.a=new O({id:"luma"}).enable()},,function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(132),i=n(133),a=n(135),o=n(134),s=n(136),u=n(144),c=n(161),l=n(138),f=[34069,34070,34071,34072,34073,34074],h=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,t),(n=Object(a.a)(this,Object(o.a)(t).call(this,e,Object.assign({},i,{target:34067})))).initialize(i),Object.seal(Object(u.a)(Object(u.a)(n))),n}return Object(s.a)(t,e),Object(i.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.format,n=void 0===t?6408:t,r=e.mipmaps,i=void 0===r||r,a=e.width,o=void 0===a?1:a,s=e.height,u=void 0===s?1:s,c=e.type,f=void 0===c?5121:c,h=e.dataFormat,d=this._deduceParameters({format:n,type:f,dataFormat:h});f=d.type,h=d.dataFormat;var v=this._deduceImageSize({data:e[34069],width:o,height:u});o=v.width,u=v.height,Object(l.a)(o===u),this.setCubeMapImageData(e),i&&this.generateMipmap(e),this.opts=e}},{key:"subImage",value:function(e){var t=e.face,n=e.data,r=e.x,i=void 0===r?0:r,a=e.y,o=void 0===a?0:a,s=e.mipmapLevel,u=void 0===s?0:s;return this._subImage({target:t,data:n,x:i,y:o,mipmapLevel:u})}},{key:"setCubeMapImageData",value:function(e){var t=e.width,n=e.height,r=e.pixels,i=e.data,a=e.border,o=void 0===a?0:a,s=e.format,u=void 0===s?6408:s,c=e.type,l=void 0===c?5121:c,h=(e.generateMipmap,this.gl);if(r=r||i,this.bind(),this.width||this.height)for(var d=0;d<f.length;d++){var v=f[d];h.texImage2D(v,0,u,t,n,o,u,l,r[v])}else for(var g=0;g<f.length;g++){var b=f[g];h.texImage2D(b,0,u,u,l,r[b])}}},{key:"bind",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).index;return void 0!==e&&this.gl.activeTexture(33984+e),this.gl.bindTexture(34067,this.handle),e}},{key:"unbind",value:function(){return this.gl.bindTexture(34067,null),this}}]),t}(c.a);h.FACES=f},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i}),n.d(t,"d",function(){return o}),n.d(t,"e",function(){return c}),n.d(t,"c",function(){return l});var r={};function i(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(e));return e}function a(e){return Math.round(e/r.EPSILON)*r.EPSILON}function o(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).precision,n=void 0===t?r.precision||4:t;return e=a(e),parseFloat(e.toPrecision(n))}function s(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&void 0!==e.length}function u(e,t){if(s(e)){for(var n=(i=e).clone?i.clone():new Array(i),r=0;r<n.length;++r)n[r]=t(n[r],r,n);return n}var i;return t(e)}function c(e){return u(e,function(e){return e/180*Math.PI})}function l(e,t){if(s(e)&&s(t)){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!l(e[n],t[n]))return!1;return!0}return Math.abs(e-t)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))}r.EPSILON=1e-12,r.debug=!0,r.precision=4,r.printTypes=!1,r.printDegrees=!1,r.printRowMajor=!0},function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";var r=n(184);function i(e,t,n){return(i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&Object(r.a)(a,n.prototype),a}).apply(null,arguments)}var a=n(132),o=n(133),s=n(153),u=n(162),c=n(138);n.d(t,"a",function(){return f});var l={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},f=function(){function e(){var t=this;Object(a.a)(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach(function(e){return t._assign(e)}),Object.freeze(this)}return Object(o.a)(e,null,[{key:"getBytesPerElement",value:function(e){return Object(s.c)(e.type||5126).BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function(e){return Object(c.a)(e.size),Object(s.c)(e.type||5126).BYTES_PER_ELEMENT*e.size}},{key:"resolve",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i(e,[l].concat(n))}}]),Object(o.a)(e,[{key:"toString",value:function(){return JSON.stringify(this)}},{key:"_assign",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==e.type&&(this.type!==e.type&&u.a.warn("accessor type mismatch"),this.type=e.type,5124!==e.type&&5125!==e.type||(this.integer=!0)),void 0!==e.size&&(this.size!==e.size&&u.a.warn("accessor size mismatch"),this.size=e.size),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.instanced&&(u.a.deprecated("Accessor.instanced","Accessor.divisor"),this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(u.a.deprecated("Accessor.isInstanced","Accessor.divisor"),this.divisor=e.isInstanced?1:0),void 0!==e.index&&(this.index=e.index?1:0),this}},{key:"BYTES_PER_ELEMENT",get:function(){return e.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function(){return e.getBytesPerVertex(this)}}]),e}()},function(e,t,n){"use strict";(function(e){var r=n(149),i=n(215),a=!("object"===(void 0===e?"undefined":Object(r.a)(e))&&"[object process]"===String(e)&&!e.browser)||i.a;t.a=a}).call(this,n(159))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return d}),n.d(t,"c",function(){return v}),n.d(t,"b",function(){return g});var r=n(132),i=n(133),a=n(140),o=n(156),s=n(138),u=function(e,t){var n=Array.isArray(e)||ArrayBuffer.isView(e),r=Array.isArray(t)||ArrayBuffer.isView(t);if(n&&r&&e.length===t.length){for(var i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}return e===t},c={enable:function(e,t){return e(Object(a.a)({},t,!0))},disable:function(e,t){return e(Object(a.a)({},t,!1))},pixelStorei:function(e,t,n){return e(Object(a.a)({},t,n))},hint:function(e,t,n){return e(Object(a.a)({},t,n))},bindFramebuffer:function(e,t,n){var r;switch(t){case 36160:return e((r={},Object(a.a)(r,36006,n),Object(a.a)(r,36010,n),r));case 36009:return e(Object(a.a)({},36006,n));case 36008:return e(Object(a.a)({},36010,n));default:return null}},blendColor:function(e,t,n,r,i){return e(Object(a.a)({},32773,new Float32Array([t,n,r,i])))},blendEquation:function(e,t){var n;return e((n={},Object(a.a)(n,32777,t),Object(a.a)(n,34877,t),n))},blendEquationSeparate:function(e,t,n){var r;return e((r={},Object(a.a)(r,32777,t),Object(a.a)(r,34877,n),r))},blendFunc:function(e,t,n){var r;return e((r={},Object(a.a)(r,32969,t),Object(a.a)(r,32968,n),Object(a.a)(r,32971,t),Object(a.a)(r,32970,n),r))},blendFuncSeparate:function(e,t,n,r,i){var o;return e((o={},Object(a.a)(o,32969,t),Object(a.a)(o,32968,n),Object(a.a)(o,32971,r),Object(a.a)(o,32970,i),o))},clearColor:function(e,t,n,r,i){return e(Object(a.a)({},3106,new Float32Array([t,n,r,i])))},clearDepth:function(e,t){return e(Object(a.a)({},2931,t))},clearStencil:function(e,t){return e(Object(a.a)({},2961,t))},colorMask:function(e,t,n,r,i){return e(Object(a.a)({},3107,[t,n,r,i]))},cullFace:function(e,t){return e(Object(a.a)({},2885,t))},depthFunc:function(e,t){return e(Object(a.a)({},2932,t))},depthRange:function(e,t,n){return e(Object(a.a)({},2928,new Float32Array([t,n])))},depthMask:function(e,t){return e(Object(a.a)({},2930,t))},frontFace:function(e,t){return e(Object(a.a)({},2886,t))},lineWidth:function(e,t){return e(Object(a.a)({},2849,t))},polygonOffset:function(e,t,n){var r;return e((r={},Object(a.a)(r,32824,t),Object(a.a)(r,10752,n),r))},sampleCoverage:function(e,t,n){var r;return e((r={},Object(a.a)(r,32938,t),Object(a.a)(r,32939,n),r))},scissor:function(e,t,n,r,i){return e(Object(a.a)({},3088,new Int32Array([t,n,r,i])))},stencilMask:function(e,t){var n;return e((n={},Object(a.a)(n,2968,t),Object(a.a)(n,36005,t),n))},stencilMaskSeparate:function(e,t,n){return e(Object(a.a)({},1028===t?2968:36005,n))},stencilFunc:function(e,t,n,r){var i;return e((i={},Object(a.a)(i,2962,t),Object(a.a)(i,2967,n),Object(a.a)(i,2963,r),Object(a.a)(i,34816,t),Object(a.a)(i,36003,n),Object(a.a)(i,36004,r),i))},stencilFuncSeparate:function(e,t,n,r,i){var o;return e((o={},Object(a.a)(o,1028===t?2962:34816,n),Object(a.a)(o,1028===t?2967:36003,r),Object(a.a)(o,1028===t?2963:36004,i),o))},stencilOp:function(e,t,n,r){var i;return e((i={},Object(a.a)(i,2964,t),Object(a.a)(i,2965,n),Object(a.a)(i,2966,r),Object(a.a)(i,34817,t),Object(a.a)(i,34818,n),Object(a.a)(i,34819,r),i))},stencilOpSeparate:function(e,t,n,r,i){var o;return e((o={},Object(a.a)(o,1028===t?2964:34817,n),Object(a.a)(o,1028===t?2965:34818,r),Object(a.a)(o,1028===t?2966:34819,i),o))},viewport:function(e,t,n,r,i){return e(Object(a.a)({},2978,new Int32Array([t,n,r,i])))}};function l(e,t){var n=e[t].bind(e);e[t]=function(){var t=arguments.length<=0?void 0:arguments[0];return t in e.state.cache||(e.state.cache[t]=n.apply(void 0,arguments)),e.state.enable?e.state.cache[t]:n.apply(void 0,arguments)},Object.defineProperty(e[t],"name",{value:"".concat(t,"-from-cache"),configurable:!1})}function f(e,t,n){var r=e[t].bind(e);e[t]=function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var s,u=n.apply(void 0,[e.state._updateCache].concat(a)),c=u.valueChanged,l=u.oldValue;c&&((s=e.state).log.apply(s,["gl.".concat(t)].concat(a)),r.apply(void 0,a));return l},Object.defineProperty(e[t],"name",{value:"".concat(t,"-to-cache"),configurable:!1})}var h=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.copyState,a=void 0!==i&&i,s=n.log,u=void 0===s?function(){}:s;Object(r.a)(this,e),this.gl=t,this.stateStack=[],this.enable=!0,this.cache=a?Object(o.b)(t):Object.assign({},o.a),this.log=u,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return Object(i.a)(e,[{key:"push",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.stateStack.push({})}},{key:"pop",value:function(){Object(s.a)(this.stateStack.length>0);var e=this.stateStack[this.stateStack.length-1];Object(o.d)(this.gl,e,this.cache),this.stateStack.pop()}},{key:"_updateCache",value:function(e){var t,n=!1,r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var i in e)Object(s.a)(void 0!==i),u(e[i],this.cache[i])||(n=!0,t=this.cache[i],!r||i in r||(r[i]=this.cache[i]),this.cache[i]=e[i]);return{valueChanged:n,oldValue:t}}}]),e}();function d(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.enable,i=void 0===r||r,a=n.copyState;if(Object(s.a)(void 0!==a),!t.state){var o=void 0!==e?e:window;for(var u in o.polyfillContext&&o.polyfillContext(t),t.state=new h(t,{copyState:a,enable:i}),c){f(t,u,c[u])}l(t,"getParameter"),l(t,"isEnabled")}return t.state.enable=i,t}function v(e){e.state||d(e,{copyState:!1}),e.state.push()}function g(e){Object(s.a)(e.state),e.state.pop()}}).call(this,n(148))},function(e,t,n){"use strict";(function(t){function r(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function i(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var a=n(220),o=Object.prototype.hasOwnProperty,s=Array.prototype.slice,u="foo"===function(){}.name;function c(e){return Object.prototype.toString.call(e)}function l(e){return!i(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var f=e.exports=p,h=/\s*function\s+([^\(\s]*)\s*/;function d(e){if(a.isFunction(e)){if(u)return e.name;var t=e.toString().match(h);return t&&t[1]}}function v(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function g(e){if(u||!a.isFunction(e))return a.inspect(e);var t=d(e);return"[Function"+(t?": "+t:"")+"]"}function b(e,t,n,r,i){throw new f.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function p(e,t){e||b(e,!0,t,"==",f.ok)}function m(e,t,n,o){if(e===t)return!0;if(i(e)&&i(t))return 0===r(e,t);if(a.isDate(e)&&a.isDate(t))return e.getTime()===t.getTime();if(a.isRegExp(e)&&a.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(l(e)&&l(t)&&c(e)===c(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return!1;var u=(o=o||{actual:[],expected:[]}).actual.indexOf(e);return-1!==u&&u===o.expected.indexOf(t)||(o.actual.push(e),o.expected.push(t),function(e,t,n,r){if(null==e||null==t)return!1;if(a.isPrimitive(e)||a.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=y(e),o=y(t);if(i&&!o||!i&&o)return!1;if(i)return e=s.call(e),t=s.call(t),m(e,t,n);var u,c,l=E(e),f=E(t);if(l.length!==f.length)return!1;for(l.sort(),f.sort(),c=l.length-1;c>=0;c--)if(l[c]!==f[c])return!1;for(c=l.length-1;c>=0;c--)if(u=l[c],!m(e[u],t[u],n,r))return!1;return!0}(e,t,n,o))}return n?e===t:e==t}function y(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function _(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function O(e,t,n,r){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=function(e){var t;try{e()}catch(e){t=e}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&b(i,n,"Missing expected exception"+r);var o="string"==typeof r,s=!e&&i&&!n;if((!e&&a.isError(i)&&o&&_(i,n)||s)&&b(i,n,"Got unwanted exception"+r),e&&i&&n&&!_(i,n)||!e&&i)throw i}f.AssertionError=function(e){var t;this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=v(g((t=this).actual),128)+" "+t.operator+" "+v(g(t.expected),128),this.generatedMessage=!0);var n=e.stackStartFunction||b;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var r=new Error;if(r.stack){var i=r.stack,a=d(n),o=i.indexOf("\n"+a);if(o>=0){var s=i.indexOf("\n",o+1);i=i.substring(s+1)}this.stack=i}}},a.inherits(f.AssertionError,Error),f.fail=b,f.ok=p,f.equal=function(e,t,n){e!=t&&b(e,t,n,"==",f.equal)},f.notEqual=function(e,t,n){e==t&&b(e,t,n,"!=",f.notEqual)},f.deepEqual=function(e,t,n){m(e,t,!1)||b(e,t,n,"deepEqual",f.deepEqual)},f.deepStrictEqual=function(e,t,n){m(e,t,!0)||b(e,t,n,"deepStrictEqual",f.deepStrictEqual)},f.notDeepEqual=function(e,t,n){m(e,t,!1)&&b(e,t,n,"notDeepEqual",f.notDeepEqual)},f.notDeepStrictEqual=function e(t,n,r){m(t,n,!0)&&b(t,n,r,"notDeepStrictEqual",e)},f.strictEqual=function(e,t,n){e!==t&&b(e,t,n,"===",f.strictEqual)},f.notStrictEqual=function(e,t,n){e===t&&b(e,t,n,"!==",f.notStrictEqual)},f.throws=function(e,t,n){O(!0,e,t,n)},f.doesNotThrow=function(e,t,n){O(!1,e,t,n)},f.ifError=function(e){if(e)throw e};var E=Object.keys||function(e){var t=[];for(var n in e)o.call(e,n)&&t.push(n);return t}}).call(this,n(148))},function(e,t,n){var r=n(21).f,i=Function.prototype,a=/^\s*function ([^ (]*)/;"name"in i||n(14)&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},,function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(132),i=n(135),a=n(134),o=n(133),s=n(136),u=n(144),c=n(137),l=n(141),f=n(161),h=n(147),d=function(e){function t(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,t),Object(c.d)(e),(n=Object(i.a)(this,Object(a.a)(t).call(this,e,Object.assign({},o,{target:o.target||32879})))).width=null,n.height=null,n.depth=null,Object.seal(Object(u.a)(Object(u.a)(n))),n.setImageData(o),o.generateMipmap&&n.generateMipmap(),n}return Object(s.a)(t,e),Object(o.a)(t,null,[{key:"isSupported",value:function(e){return Object(c.n)(e)}}]),Object(o.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opts=Object.assign({},this.opts,t);var n=this.opts,r=n.pixels,i=n.settings;i&&(Object(l.c)(i,function(){r&&e.setImage3D(e.opts)}),this.setParameters(t))}},{key:"setImage3D",value:function(e){var t=e.level,n=void 0===t?0:t,r=e.internalformat,i=void 0===r?6408:r,a=e.width,o=e.height,s=e.depth,u=void 0===s?1:s,c=e.border,l=void 0===c?0:c,f=e.format,d=e.type,v=void 0===d?5121:d,g=e.offset,b=void 0===g?0:g,p=e.pixels;ArrayBuffer.isView(p)?this.gl.texImage3D(this.target,n,i,a,o,u,l,f,v,p):p instanceof h.a&&(this.gl.bindBuffer(35052,p.handle),this.gl.texImage3D(this.target,n,i,a,o,u,l,f,v,b),this.gl.bindBuffer(35052,p.handle))}}]),t}(f.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(132),i=n(133),a=n(135),o=n(134),s=n(136),u=n(185),c=n(165),l=function(e,t){if(!e)throw new Error(t)},f=function(e){function t(){return Object(r.a)(this,t),Object(a.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(i.a)(t,[{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"lengthSquared",value:function(){for(var e=0,t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}},{key:"distance",value:function(e){return Math.sqrt(this.distanceSquared(e))}},{key:"distanceSquared",value:function(e){for(var t=0,n=0;n<this.ELEMENTS;++n){var r=this[n]-e[n];t+=r*r}return Object(c.a)(t)}},{key:"dot",value:function(e){for(var t=0,n=0;n<this.ELEMENTS;++n)t+=this[n]*e[n];return Object(c.a)(t)}},{key:"normalize",value:function(){var e=this.magnitude();if(0!==e)for(var t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}},{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++)for(var i=t[r],a=0;a<this.ELEMENTS;++a)this[a]+=i[a];return this.check()}},{key:"subtract",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++)for(var i=t[r],a=0;a<this.ELEMENTS;++a)this[a]-=i[a];return this.check()}},{key:"multiply",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++)for(var i=t[r],a=0;a<this.ELEMENTS;++a)this[a]*=i[a];return this.check()}},{key:"divide",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++)for(var i=t[r],a=0;a<this.ELEMENTS;++a)this[a]/=i[a];return this.check()}},{key:"scale",value:function(e){if(Array.isArray(e))return this.multiply(e);for(var t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}},{key:"scaleAndAdd",value:function(e,t){for(var n=0;n<this.ELEMENTS;++n)this[n]=this[n]*t+e[n];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(e){return this.distance(e)}},{key:"distanceToSquared",value:function(e){return this.distanceSquared(e)}},{key:"getComponent",value:function(e){return l(e>=0&&e<this.ELEMENTS,"index is out of range"),Object(c.a)(this[e])}},{key:"setComponent",value:function(e,t){return l(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}},{key:"addVectors",value:function(e,t){return this.copy(e).add(t)}},{key:"subVectors",value:function(e,t){return this.copy(e).subtract(t)}},{key:"multiplyVectors",value:function(e,t){return this.copy(e).multiply(t)}},{key:"addScaledVector",value:function(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=Object(c.a)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=Object(c.a)(e)}}]),t}(u.a)},,,function(e,t,n){for(var r,i=n(5),a=n(10),o=n(32),s=o("typed_array"),u=o("view"),c=!(!i.ArrayBuffer||!i.DataView),l=c,f=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<9;)(r=i[h[f++]])?(a(r.prototype,s,!0),a(r.prototype,u,!0)):l=!1;e.exports={ABV:c,CONSTR:l,TYPED:s,VIEW:u}},function(e,t,n){var r=n(30),i=n(28);e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=i(t);if(t!==n)throw RangeError("Wrong length!");return n}},function(e,t,n){var r=n(71),i=n(48).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){"use strict";var r=n(31),i=n(66),a=n(28);e.exports=function(e){for(var t=r(this),n=a(t.length),o=arguments.length,s=i(o>1?arguments[1]:void 0,n),u=o>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);c>s;)t[s++]=e;return t}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});var r=n(149),i=n(182);function a(){return!("object"===(void 0===e?"undefined":Object(r.a)(e))&&"[object process]"===String(e)&&!e.browser)||Object(i.a)()}}).call(this,n(159))},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});var r=n(149);function i(t){if("undefined"!=typeof window&&"object"===Object(r.a)(window.process)&&"renderer"===window.process.type)return!0;if(void 0!==e&&"object"===Object(r.a)(e.versions)&&Boolean(e.versions.electron))return!0;var n="object"===("undefined"==typeof navigator?"undefined":Object(r.a)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,i=t||n;return!!(i&&i.indexOf("Electron")>=0)}}).call(this,n(159))},function(e,t,n){"use strict";(function(e){var t,r=n(140),i=n(217);function a(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}function o(e){return e&&!0}var s=(t={},Object(r.a)(t,"OES_vertex_array_object",{meta:{suffix:"OES"},createVertexArray:function(){a(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),Object(r.a)(t,"ANGLE_instanced_arrays",{meta:{suffix:"ANGLE"},vertexAttribDivisor:function(e,t){a(0===t,"WebGL instanced rendering not supported")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),Object(r.a)(t,"WEBGL_draw_buffers",{meta:{suffix:"WEBGL"},drawBuffers:function(){a(!1)}}),Object(r.a)(t,"EXT_disjoint_timer_query",{meta:{suffix:"EXT"},createQuery:function(){a(!1)},deleteQuery:function(){a(!1)},beginQuery:function(){a(!1)},endQuery:function(){},getQuery:function(e,t){return this.getQueryObject(e,t)},getQueryParameter:function(e,t){return this.getQueryObject(e,t)},queryCounter:function(){},getQueryObject:function(){}}),Object(r.a)(t,"EXT_disjoint_timer_query_webgl2",{meta:{suffix:"EXT"},queryCounter:null}),Object(r.a)(t,"OVERRIDES",{readBuffer:function(e,t,n){o(e)&&t(n)},getVertexAttrib:function(e,t,n,r){var i,a=function(e,t){return{webgl2:o(e),ext:e.getExtension(t)}}(e,"ANGLE_instanced_arrays"),s=a.webgl2,u=a.ext;switch(r){case 35069:i=!!s&&void 0;break;case 35070:i=s||u?void 0:0}return void 0!==i?i:t(n,r)},getProgramParameter:function(e,t,n,r){if(!o(e))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return t(n,r)},getInternalformatParameter:function(e,t,n,r,i){if(!o(e))switch(i){case 32937:return new Int32Array([0])}return e.getInternalformatParameter(n,r,i)},getTexParameter:function(e,t,n,r){switch(r){case 34046:var i=e.luma.extensions.EXT_texture_filter_anisotropic;r=i&&i.TEXTURE_MAX_ANISOTROPY_EXT||34046}return t(n,r)},getParameter:i.a,hint:function(e,t,n,r){return t(n,r)}}),t);function u(e,t){var n=t.extension,r=t.target,i=t.target2,o=s[n];a(o);var u=o.meta,c=(void 0===u?{}:u).suffix,l=void 0===c?"":c,f=e.getExtension(n);Object.keys(o).forEach(function(t){var n="".concat(t).concat(l),a=null;"meta"===t||"function"==typeof e[t]||(f&&"function"==typeof f[n]?a=function(){return f[n].apply(f,arguments)}:"function"==typeof o[t]&&(a=o[t].bind(r))),a&&(r[t]=a,i[t]=a)})}(void 0!==e?e:window).polyfillContext=function(e){if(e.luma=e.luma||{},function(e){e.luma.extensions={};var t=e.getSupportedExtensions(),n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e.luma[s]=e.getExtension(s)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}(e),!e.luma.polyfilled){for(var t in s)"overrides"!==t&&u(e,{extension:t,target:e.luma,target2:e});!function(e,t){var n=t.target,r=t.target2,i=s.OVERRIDES;Object.keys(i).forEach(function(t){if("function"==typeof i[t]){var a=e[t]?e[t].bind(e):function(){},o=i[t].bind(null,e,a);n[t]=o,r[t]=o}})}(e,{target:e.luma,target2:e}),e.luma.polyfilled=!0}return e}}).call(this,n(148))},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(132),i=n(133),a=n(135),o=n(134),s=n(136),u=n(165);var c=function(e){function t(){return Object(r.a)(this,t),Object(a.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(i.a)(t,[{key:"clone",value:function(){return(new this.constructor).copy(this).check()}},{key:"copy",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=e[t];return this.check()}},{key:"set",value:function(){for(var e=0;e<this.ELEMENTS;++e)this[e]=(e<0||arguments.length<=e?void 0:arguments[e])||0;return this.check()}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)this[n]=e[n+t];return this.check()}},{key:"toString",value:function(){return this.formatString(u.b)}},{key:"formatString",value:function(e){for(var t="",n=0;n<this.ELEMENTS;++n)t+=(n>0?", ":"")+Object(u.d)(this[n],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)e[t+n]=this[n];return e}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"equals",value:function(e){if(!e||this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(!Object(u.c)(this[t],e[t]))return!1;return!0}},{key:"exactEquals",value:function(e){if(!e||this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}},{key:"negate",value:function(){for(var e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}},{key:"inverse",value:function(){for(var e=0;e<this.ELEMENTS;++e)this[e]=1/this[e];return this.check()}},{key:"lerp",value:function(e,t,n){void 0===n&&(n=t,t=e,e=this);for(var r=0;r<this.ELEMENTS;++r){var i=e[r];this[r]=i+n*(t[r]-i)}return this.check()}},{key:"min",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}},{key:"max",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}},{key:"clamp",value:function(e,t){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e[n]),t[n]);return this.check()}},{key:"validate",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,t=e&&e.length===this.ELEMENTS,n=0;n<this.ELEMENTS;++n)t=t&&Number.isFinite(e[n]);return t}},{key:"check",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(u.b.debug&&!this.validate(e))throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"sub",value:function(e){return this.subtract(e)}},{key:"setScalar",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}},{key:"addScalar",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}},{key:"subScalar",value:function(e){return this.addScalar(-e)}},{key:"multiplyScalar",value:function(e){return this.scale(e)}},{key:"divideScalar",value:function(e){return this.scale(1/e)}},{key:"clampScalar",value:function(e,t){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e),t);return this.check()}}]),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Array))},function(e,t,n){"use strict";n.r(t);var r=n(168),i=n(160),a=n(162);n(183);n.d(t,"global",function(){return i.a});if(i.a.luma&&"6.3.0"!==i.a.luma.VERSION)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(i.a.luma.VERSION," vs ").concat("6.3.0"));i.a.luma||(r.a&&a.a.log(0,"luma.gl ".concat("6.3.0"," - ").concat("set luma.log.priority=1 (or higher) to trace rendering"))(),i.a.luma=i.a.luma||{VERSION:"6.3.0",version:"6.3.0",log:a.a,stats:{},globals:{modules:{},nodeIO:{}}});t.default=i.a.luma},,,,,,,,,,,,,,,,,,,,function(e,t,n){n(207)("Float32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){"use strict";if(n(14)){var r=n(33),i=n(5),a=n(22),o=n(24),s=n(177),u=n(208),c=n(15),l=n(68),f=n(46),h=n(10),d=n(69),v=n(30),g=n(28),b=n(178),p=n(66),m=n(67),y=n(23),_=n(49),O=n(11),E=n(31),w=n(74),j=n(80),x=n(81),A=n(179).f,k=n(75),T=n(32),S=n(3),P=n(79),L=n(72),F=n(76),I=n(50),R=n(16),M=n(78),N=n(77),B=n(180),D=n(209),C=n(21),U=n(210),G=C.f,W=U.f,V=i.RangeError,z=i.TypeError,H=i.Uint8Array,X=Array.prototype,q=u.ArrayBuffer,Q=u.DataView,K=P(0),Y=P(2),$=P(3),J=P(4),Z=P(5),ee=P(6),te=L(!0),ne=L(!1),re=I.values,ie=I.keys,ae=I.entries,oe=X.lastIndexOf,se=X.reduce,ue=X.reduceRight,ce=X.join,le=X.sort,fe=X.slice,he=X.toString,de=X.toLocaleString,ve=S("iterator"),ge=S("toStringTag"),be=T("typed_constructor"),pe=T("def_constructor"),me=s.CONSTR,ye=s.TYPED,_e=s.VIEW,Oe=P(1,function(e,t){return Ae(F(e,e[pe]),t)}),Ee=a(function(){return 1===new H(new Uint16Array([1]).buffer)[0]}),we=!!H&&!!H.prototype.set&&a(function(){new H(1).set({})}),je=function(e,t){var n=v(e);if(n<0||n%t)throw V("Wrong offset!");return n},xe=function(e){if(O(e)&&ye in e)return e;throw z(e+" is not a typed array!")},Ae=function(e,t){if(!(O(e)&&be in e))throw z("It is not a typed array constructor!");return new e(t)},ke=function(e,t){return Te(F(e,e[pe]),t)},Te=function(e,t){for(var n=0,r=t.length,i=Ae(e,r);r>n;)i[n]=t[n++];return i},Se=function(e,t,n){G(e,t,{get:function(){return this._d[n]}})},Pe=function(e){var t,n,r,i,a,o,s=E(e),u=arguments.length,l=u>1?arguments[1]:void 0,f=void 0!==l,h=k(s);if(null!=h&&!w(h)){for(o=h.call(s),r=[],t=0;!(a=o.next()).done;t++)r.push(a.value);s=r}for(f&&u>2&&(l=c(l,arguments[2],2)),t=0,n=g(s.length),i=Ae(this,n);n>t;t++)i[t]=f?l(s[t],t):s[t];return i},Le=function(){for(var e=0,t=arguments.length,n=Ae(this,t);t>e;)n[e]=arguments[e++];return n},Fe=!!H&&a(function(){de.call(new H(1))}),Ie=function(){return de.apply(Fe?fe.call(xe(this)):xe(this),arguments)},Re={copyWithin:function(e,t){return D.call(xe(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return J(xe(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return B.apply(xe(this),arguments)},filter:function(e){return ke(this,Y(xe(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return Z(xe(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ee(xe(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){K(xe(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ne(xe(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(xe(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return ce.apply(xe(this),arguments)},lastIndexOf:function(e){return oe.apply(xe(this),arguments)},map:function(e){return Oe(xe(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return se.apply(xe(this),arguments)},reduceRight:function(e){return ue.apply(xe(this),arguments)},reverse:function(){for(var e,t=xe(this).length,n=Math.floor(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this},some:function(e){return $(xe(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return le.call(xe(this),e)},subarray:function(e,t){var n=xe(this),r=n.length,i=p(e,r);return new(F(n,n[pe]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,g((void 0===t?r:p(t,r))-i))}},Me=function(e,t){return ke(this,fe.call(xe(this),e,t))},Ne=function(e){xe(this);var t=je(arguments[1],1),n=this.length,r=E(e),i=g(r.length),a=0;if(i+t>n)throw V("Wrong length!");for(;a<i;)this[t+a]=r[a++]},Be={entries:function(){return ae.call(xe(this))},keys:function(){return ie.call(xe(this))},values:function(){return re.call(xe(this))}},De=function(e,t){return O(e)&&e[ye]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Ce=function(e,t){return De(e,t=m(t,!0))?f(2,e[t]):W(e,t)},Ue=function(e,t,n){return!(De(e,t=m(t,!0))&&O(n)&&y(n,"value"))||y(n,"get")||y(n,"set")||n.configurable||y(n,"writable")&&!n.writable||y(n,"enumerable")&&!n.enumerable?G(e,t,n):(e[t]=n.value,e)};me||(U.f=Ce,C.f=Ue),o(o.S+o.F*!me,"Object",{getOwnPropertyDescriptor:Ce,defineProperty:Ue}),a(function(){he.call({})})&&(he=de=function(){return ce.call(this)});var Ge=d({},Re);d(Ge,Be),h(Ge,ve,Be.values),d(Ge,{slice:Me,set:Ne,constructor:function(){},toString:he,toLocaleString:Ie}),Se(Ge,"buffer","b"),Se(Ge,"byteOffset","o"),Se(Ge,"byteLength","l"),Se(Ge,"length","e"),G(Ge,ge,{get:function(){return this[ye]}}),e.exports=function(e,t,n,u){var c=e+((u=!!u)?"Clamped":"")+"Array",f="get"+e,d="set"+e,v=i[c],p=v||{},m=v&&x(v),y=!v||!s.ABV,E={},w=v&&v.prototype,k=function(e,n){G(e,n,{get:function(){return function(e,n){var r=e._d;return r.v[f](n*t+r.o,Ee)}(this,n)},set:function(e){return function(e,n,r){var i=e._d;u&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[d](n*t+i.o,r,Ee)}(this,n,e)},enumerable:!0})};y?(v=n(function(e,n,r,i){l(e,v,c,"_d");var a,o,s,u,f=0,d=0;if(O(n)){if(!(n instanceof q||"ArrayBuffer"==(u=_(n))||"SharedArrayBuffer"==u))return ye in n?Te(v,n):Pe.call(v,n);a=n,d=je(r,t);var p=n.byteLength;if(void 0===i){if(p%t)throw V("Wrong length!");if((o=p-d)<0)throw V("Wrong length!")}else if((o=g(i)*t)+d>p)throw V("Wrong length!");s=o/t}else s=b(n),a=new q(o=s*t);for(h(e,"_d",{b:a,o:d,l:o,e:s,v:new Q(a)});f<s;)k(e,f++)}),w=v.prototype=j(Ge),h(w,"constructor",v)):a(function(){v(1)})&&a(function(){new v(-1)})&&M(function(e){new v,new v(null),new v(1.5),new v(e)},!0)||(v=n(function(e,n,r,i){var a;return l(e,v,c),O(n)?n instanceof q||"ArrayBuffer"==(a=_(n))||"SharedArrayBuffer"==a?void 0!==i?new p(n,je(r,t),i):void 0!==r?new p(n,je(r,t)):new p(n):ye in n?Te(v,n):Pe.call(v,n):new p(b(n))}),K(m!==Function.prototype?A(p).concat(A(m)):A(p),function(e){e in v||h(v,e,p[e])}),v.prototype=w,r||(w.constructor=v));var T=w[ve],S=!!T&&("values"==T.name||null==T.name),P=Be.values;h(v,be,!0),h(w,ye,c),h(w,_e,!0),h(w,pe,v),(u?new v(1)[ge]==c:ge in w)||G(w,ge,{get:function(){return c}}),E[c]=v,o(o.G+o.W+o.F*(v!=p),E),o(o.S,c,{BYTES_PER_ELEMENT:t}),o(o.S+o.F*a(function(){p.of.call(v,1)}),c,{from:Pe,of:Le}),"BYTES_PER_ELEMENT"in w||h(w,"BYTES_PER_ELEMENT",t),o(o.P,c,Re),N(c),o(o.P+o.F*we,c,{set:Ne}),o(o.P+o.F*!S,c,Be),r||w.toString==he||(w.toString=he),o(o.P+o.F*a(function(){new v(1).slice()}),c,{slice:Me}),o(o.P+o.F*(a(function(){return[1,2].toLocaleString()!=new v([1,2]).toLocaleString()})||!a(function(){w.toLocaleString.call([1,2])})),c,{toLocaleString:Ie}),R[c]=S?T:P,r||S||h(w,ve,P)}}else e.exports=function(){}},function(e,t,n){"use strict";var r=n(5),i=n(14),a=n(33),o=n(177),s=n(10),u=n(69),c=n(22),l=n(68),f=n(30),h=n(28),d=n(178),v=n(179).f,g=n(21).f,b=n(180),p=n(35),m="prototype",y="Wrong index!",_=r.ArrayBuffer,O=r.DataView,E=r.Math,w=r.RangeError,j=r.Infinity,x=_,A=E.abs,k=E.pow,T=E.floor,S=E.log,P=E.LN2,L=i?"_b":"buffer",F=i?"_l":"byteLength",I=i?"_o":"byteOffset";function R(e,t,n){var r,i,a,o=new Array(n),s=8*n-t-1,u=(1<<s)-1,c=u>>1,l=23===t?k(2,-24)-k(2,-77):0,f=0,h=e<0||0===e&&1/e<0?1:0;for((e=A(e))!=e||e===j?(i=e!=e?1:0,r=u):(r=T(S(e)/P),e*(a=k(2,-r))<1&&(r--,a*=2),(e+=r+c>=1?l/a:l*k(2,1-c))*a>=2&&(r++,a/=2),r+c>=u?(i=0,r=u):r+c>=1?(i=(e*a-1)*k(2,t),r+=c):(i=e*k(2,c-1)*k(2,t),r=0));t>=8;o[f++]=255&i,i/=256,t-=8);for(r=r<<t|i,s+=t;s>0;o[f++]=255&r,r/=256,s-=8);return o[--f]|=128*h,o}function M(e,t,n){var r,i=8*n-t-1,a=(1<<i)-1,o=a>>1,s=i-7,u=n-1,c=e[u--],l=127&c;for(c>>=7;s>0;l=256*l+e[u],u--,s-=8);for(r=l&(1<<-s)-1,l>>=-s,s+=t;s>0;r=256*r+e[u],u--,s-=8);if(0===l)l=1-o;else{if(l===a)return r?NaN:c?-j:j;r+=k(2,t),l-=o}return(c?-1:1)*r*k(2,l-t)}function N(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function B(e){return[255&e]}function D(e){return[255&e,e>>8&255]}function C(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function U(e){return R(e,52,8)}function G(e){return R(e,23,4)}function W(e,t,n){g(e[m],t,{get:function(){return this[n]}})}function V(e,t,n,r){var i=d(+n);if(i+t>e[F])throw w(y);var a=e[L]._b,o=i+e[I],s=a.slice(o,o+t);return r?s:s.reverse()}function z(e,t,n,r,i,a){var o=d(+n);if(o+t>e[F])throw w(y);for(var s=e[L]._b,u=o+e[I],c=r(+i),l=0;l<t;l++)s[u+l]=c[a?l:t-l-1]}if(o.ABV){if(!c(function(){_(1)})||!c(function(){new _(-1)})||c(function(){return new _,new _(1.5),new _(NaN),"ArrayBuffer"!=_.name})){for(var H,X=(_=function(e){return l(this,_),new x(d(e))})[m]=x[m],q=v(x),Q=0;q.length>Q;)(H=q[Q++])in _||s(_,H,x[H]);a||(X.constructor=_)}var K=new O(new _(2)),Y=O[m].setInt8;K.setInt8(0,2147483648),K.setInt8(1,2147483649),!K.getInt8(0)&&K.getInt8(1)||u(O[m],{setInt8:function(e,t){Y.call(this,e,t<<24>>24)},setUint8:function(e,t){Y.call(this,e,t<<24>>24)}},!0)}else _=function(e){l(this,_,"ArrayBuffer");var t=d(e);this._b=b.call(new Array(t),0),this[F]=t},O=function(e,t,n){l(this,O,"DataView"),l(e,_,"DataView");var r=e[F],i=f(t);if(i<0||i>r)throw w("Wrong offset!");if(i+(n=void 0===n?r-i:h(n))>r)throw w("Wrong length!");this[L]=e,this[I]=i,this[F]=n},i&&(W(_,"byteLength","_l"),W(O,"buffer","_b"),W(O,"byteLength","_l"),W(O,"byteOffset","_o")),u(O[m],{getInt8:function(e){return V(this,1,e)[0]<<24>>24},getUint8:function(e){return V(this,1,e)[0]},getInt16:function(e){var t=V(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=V(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return N(V(this,4,e,arguments[1]))},getUint32:function(e){return N(V(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return M(V(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return M(V(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){z(this,1,e,B,t)},setUint8:function(e,t){z(this,1,e,B,t)},setInt16:function(e,t){z(this,2,e,D,t,arguments[2])},setUint16:function(e,t){z(this,2,e,D,t,arguments[2])},setInt32:function(e,t){z(this,4,e,C,t,arguments[2])},setUint32:function(e,t){z(this,4,e,C,t,arguments[2])},setFloat32:function(e,t){z(this,4,e,G,t,arguments[2])},setFloat64:function(e,t){z(this,8,e,U,t,arguments[2])}});p(_,"ArrayBuffer"),p(O,"DataView"),s(O[m],o.VIEW,!0),t.ArrayBuffer=_,t.DataView=O},function(e,t,n){"use strict";var r=n(31),i=n(66),a=n(28);e.exports=[].copyWithin||function(e,t){var n=r(this),o=a(n.length),s=i(e,o),u=i(t,o),c=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===c?o:i(c,o))-u,o-s),f=1;for(u<s&&s<u+l&&(f=-1,u+=l-1,s+=l-1);l-- >0;)u in n?n[s]=n[u]:delete n[s],s+=f,u+=f;return n}},function(e,t,n){var r=n(73),i=n(46),a=n(34),o=n(67),s=n(23),u=n(70),c=Object.getOwnPropertyDescriptor;t.f=n(14)?c:function(e,t){if(e=a(e),t=o(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){"use strict";(function(e){var r=n(0),i=n.n(r),a=n(212),o=n(4),s=n.n(o),u=n(213);function c(e,t){var n,r=(n=e,!isNaN(parseFloat(n))&&isFinite(n)?parseFloat(n):"px"===n.slice(-2)?parseFloat(n.slice(0,-2)):void 0);if("number"==typeof r)return r;var i=function(e){if("%"===e.slice(-1))return parseFloat(e.slice(0,-1))/100}(e);return"number"==typeof i?i*t:void 0}var l={above:"above",inside:"inside",below:"below",invisible:"invisible"};var f="<Waypoint> expected to receive a single React element child.\n\nSee https://goo.gl/LrBNgw for more info.";function h(e){if(e)try{i.a.Children.only(e)}catch(e){throw new Error(f)}}function d(e){return"string"==typeof e.type}var v="<Waypoint> needs a DOM element to compute boundaries. The child you passed is neither a DOM element (e.g. <div>) nor does it use the innerRef prop.\n\nSee https://goo.gl/LrBNgw for more info.";var g=void 0,b=[];function p(e){b.push(e),g||(g=setTimeout(function(){g=null;for(var e=void 0;e=b.shift();)e()},0));var t=!0;return function(){return function(){if(t){t=!1;var n=b.indexOf(e);-1!==n&&(b.splice(n,1),!b.length&&g&&(clearTimeout(g),g=null))}}}()}var m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var y={topOffset:"0px",bottomOffset:"0px",horizontal:!1,onEnter:function(){return function(){}}(),onLeave:function(){return function(){}}(),onPositionChange:function(){return function(){}}(),fireOnRapidScroll:!0},_=void 0!==i.a.PureComponent?i.a.PureComponent:i.a.Component,O=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.refElement=function(e){return t._ref=e},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,_),m(n,[{key:"componentWillMount",value:function(){return function(){h(this.props.children)}}()},{key:"componentDidMount",value:function(){return function(){var e=this;n.getWindow()&&(this.cancelOnNextTick=p(function(){e.cancelOnNextTick=null,function(e,t){if(e&&!d(e)&&!t)throw new Error(v)}(e.props.children,e._ref),e._handleScroll=e._handleScroll.bind(e),e.scrollableAncestor=e._findScrollableAncestor(),e.scrollEventListenerUnsubscribe=Object(a.a)(e.scrollableAncestor,"scroll",e._handleScroll,{passive:!0}),e.resizeEventListenerUnsubscribe=Object(a.a)(window,"resize",e._handleScroll,{passive:!0}),e._handleScroll(null)}))}}()},{key:"componentWillReceiveProps",value:function(){return function(e){h(e.children)}}()},{key:"componentDidUpdate",value:function(){return function(){var e=this;n.getWindow()&&this.scrollableAncestor&&(this.cancelOnNextTick||(this.cancelOnNextTick=p(function(){e.cancelOnNextTick=null,e._handleScroll(null)})))}}()},{key:"componentWillUnmount",value:function(){return function(){n.getWindow()&&(this.scrollEventListenerUnsubscribe&&this.scrollEventListenerUnsubscribe(),this.resizeEventListenerUnsubscribe&&this.resizeEventListenerUnsubscribe(),this.cancelOnNextTick&&this.cancelOnNextTick())}}()},{key:"_findScrollableAncestor",value:function(){return function(){var t=this.props,n=t.horizontal,r=t.scrollableAncestor;if(r)return function(t){return"window"===t?e.window:t}(r);for(var i=this._ref;i.parentNode;){if((i=i.parentNode)===document.body)return window;var a=window.getComputedStyle(i),o=(n?a.getPropertyValue("overflow-x"):a.getPropertyValue("overflow-y"))||a.getPropertyValue("overflow");if("auto"===o||"scroll"===o)return i}return window}}()},{key:"_handleScroll",value:function(){return function(e){if(this._ref){var t=this._getBounds(),n=function(e){return e.viewportBottom-e.viewportTop==0?l.invisible:e.viewportTop<=e.waypointTop&&e.waypointTop<=e.viewportBottom?l.inside:e.viewportTop<=e.waypointBottom&&e.waypointBottom<=e.viewportBottom?l.inside:e.waypointTop<=e.viewportTop&&e.viewportBottom<=e.waypointBottom?l.inside:e.viewportBottom<e.waypointTop?l.below:e.waypointTop<e.viewportTop?l.above:l.invisible}(t),r=this._previousPosition;if(this._previousPosition=n,r!==n){var i={currentPosition:n,previousPosition:r,event:e,waypointTop:t.waypointTop,waypointBottom:t.waypointBottom,viewportTop:t.viewportTop,viewportBottom:t.viewportBottom};this.props.onPositionChange.call(this,i),n===l.inside?this.props.onEnter.call(this,i):r===l.inside&&this.props.onLeave.call(this,i);var a=r===l.below&&n===l.above,o=r===l.above&&n===l.below;this.props.fireOnRapidScroll&&(a||o)&&(this.props.onEnter.call(this,{currentPosition:l.inside,previousPosition:r,event:e,waypointTop:t.waypointTop,waypointBottom:t.waypointBottom,viewportTop:t.viewportTop,viewportBottom:t.viewportBottom}),this.props.onLeave.call(this,{currentPosition:n,previousPosition:l.inside,event:e,waypointTop:t.waypointTop,waypointBottom:t.waypointBottom,viewportTop:t.viewportTop,viewportBottom:t.viewportBottom}))}}}}()},{key:"_getBounds",value:function(){return function(){var e=this.props.horizontal,t=this._ref.getBoundingClientRect(),n=t.left,r=t.top,i=t.right,a=t.bottom,o=e?n:r,s=e?i:a,u=void 0,l=void 0;this.scrollableAncestor===window?(u=e?window.innerWidth:window.innerHeight,l=0):(u=e?this.scrollableAncestor.offsetWidth:this.scrollableAncestor.offsetHeight,l=e?this.scrollableAncestor.getBoundingClientRect().left:this.scrollableAncestor.getBoundingClientRect().top);var f=this.props,h=f.bottomOffset;return{waypointTop:o,waypointBottom:s,viewportTop:l+c(f.topOffset,u),viewportBottom:l+u-c(h,u)}}}()},{key:"render",value:function(){return function(){var e=this,t=this.props.children;if(!t)return i.a.createElement("span",{ref:this.refElement,style:{fontSize:0}});if(d(t)||Object(u.isForwardRef)(t.type)){var n=function(n){e.refElement(n),t.ref&&("function"==typeof t.ref?t.ref(n):t.ref.current=n)};return i.a.cloneElement(t,{ref:n})}return i.a.cloneElement(t,{innerRef:this.refElement})}}()}]),n}();O.propTypes={children:s.a.node,debug:s.a.bool,onEnter:s.a.func,onLeave:s.a.func,onPositionChange:s.a.func,fireOnRapidScroll:s.a.bool,scrollableAncestor:s.a.any,horizontal:s.a.bool,topOffset:s.a.oneOfType([s.a.string,s.a.number]),bottomOffset:s.a.oneOfType([s.a.string,s.a.number])},O.above=l.above,O.below=l.below,O.inside=l.inside,O.invisible=l.invisible,O.getWindow=function(){if("undefined"!=typeof window)return window},O.defaultProps=y,O.displayName="Waypoint",t.a=O}).call(this,n(148))},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=!("undefined"==typeof window||!window.document||!window.document.createElement);var i=void 0;function a(){return void 0===i&&(i=function(){if(!r)return!1;if(!window.addEventListener||!window.removeEventListener||!Object.defineProperty)return!1;var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}}),n=function(){};window.addEventListener("testPassiveEventSupport",n,t),window.removeEventListener("testPassiveEventSupport",n,t)}catch(e){}return e}()),i}function o(e){e.handlers===e.nextHandlers&&(e.nextHandlers=e.handlers.slice())}function s(e){this.target=e,this.events={}}s.prototype.getEventHandlers=function(){return function(e,t){var n,r=String(e)+" "+String((n=t)?!0===n?100:(n.capture<<0)+(n.passive<<1)+(n.once<<2):0);return this.events[r]||(this.events[r]={handlers:[],handleEvent:void 0},this.events[r].nextHandlers=this.events[r].handlers),this.events[r]}}(),s.prototype.handleEvent=function(){return function(e,t,n){var r=this.getEventHandlers(e,t);r.handlers=r.nextHandlers,r.handlers.forEach(function(e){e&&e(n)})}}(),s.prototype.add=function(){return function(e,t,n){var r=this,i=this.getEventHandlers(e,n);o(i),0===i.nextHandlers.length&&(i.handleEvent=this.handleEvent.bind(this,e,n),this.target.addEventListener(e,i.handleEvent,n)),i.nextHandlers.push(t);var a=!0;return function(){if(a){a=!1,o(i);var s=i.nextHandlers.indexOf(t);i.nextHandlers.splice(s,1),0===i.nextHandlers.length&&(r.target&&r.target.removeEventListener(e,i.handleEvent,n),i.handleEvent=void 0)}}}}();var u="__consolidated_events_handlers__";function c(e,t,n,r){e[u]||(e[u]=new s(e));var i=function(e){if(e)return a()?e:!!e.capture}(r);return e[u].add(t,n,i)}},function(e,t,n){"use strict";e.exports=n(214)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,o=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,h=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,v=r?Symbol.for("react.suspense"):60113,g=r?Symbol.for("react.memo"):60115,b=r?Symbol.for("react.lazy"):60116;function p(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case f:case h:case o:case u:case s:return e;default:switch(e=e&&e.$$typeof){case l:case d:case c:return e;default:return t}}case a:return t}}}function m(e){return p(e)===h}t.typeOf=p,t.AsyncMode=f,t.ConcurrentMode=h,t.ContextConsumer=l,t.ContextProvider=c,t.Element=i,t.ForwardRef=d,t.Fragment=o,t.Profiler=u,t.Portal=a,t.StrictMode=s,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===h||e===u||e===s||e===v||"object"==typeof e&&null!==e&&(e.$$typeof===b||e.$$typeof===g||e.$$typeof===c||e.$$typeof===l||e.$$typeof===d)},t.isAsyncMode=function(e){return m(e)||p(e)===f},t.isConcurrentMode=m,t.isContextConsumer=function(e){return p(e)===l},t.isContextProvider=function(e){return p(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return p(e)===d},t.isFragment=function(e){return p(e)===o},t.isProfiler=function(e){return p(e)===u},t.isPortal=function(e){return p(e)===a},t.isStrictMode=function(e){return p(e)===s}},function(e,t,n){"use strict";(function(e){var r=n(149);t.a="undefined"!=typeof window&&"object"===Object(r.a)(window.process)&&"renderer"===window.process.type||!(void 0===e||"object"!==Object(r.a)(e.versions)||!Boolean(e.versions.electron))||"object"===("undefined"==typeof navigator?"undefined":Object(r.a)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0}).call(this,n(159))},,function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r,i=n(140),a=function(e){return s(e)?void 0:0},o=(r={},Object(i.a)(r,3074,function(e){return s(e)?void 0:36064}),Object(i.a)(r,35723,function(e){return s(e)?void 0:4352}),Object(i.a)(r,35977,a),Object(i.a)(r,32937,a),Object(i.a)(r,36795,function(e,t){var n=s(e)?e.getExtension("EXT_disjoint_timer_query_webgl2"):e.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?t(n.GPU_DISJOINT_EXT):0}),Object(i.a)(r,37445,function(e,t){var n=e.getExtension("WEBGL_debug_renderer_info");return t(n&&n.UNMASKED_VENDOR_WEBGL||7936)}),Object(i.a)(r,37446,function(e,t){var n=e.getExtension("WEBGL_debug_renderer_info");return t(n&&n.UNMASKED_RENDERER_WEBGL||7937)}),Object(i.a)(r,34047,function(e,t){var n=e.luma.extensions.EXT_texture_filter_anisotropic;return n?t(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1}),Object(i.a)(r,32883,a),Object(i.a)(r,35071,a),Object(i.a)(r,37447,a),Object(i.a)(r,36063,function(e,t){if(!s(e)){var n=e.getExtension("WEBGL_draw_buffers");return n?t(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}}),Object(i.a)(r,35379,a),Object(i.a)(r,35374,a),Object(i.a)(r,35377,a),Object(i.a)(r,34852,function(e){if(!s(e)){var t=e.getExtension("WEBGL_draw_buffers");return t?t.MAX_DRAW_BUFFERS_WEBGL:0}}),Object(i.a)(r,36203,function(e){return e.getExtension("OES_element_index")?2147483647:65535}),Object(i.a)(r,33001,function(e){return e.getExtension("OES_element_index")?16777216:65535}),Object(i.a)(r,33e3,function(e){return 16777216}),Object(i.a)(r,37157,a),Object(i.a)(r,35373,a),Object(i.a)(r,35657,a),Object(i.a)(r,36183,a),Object(i.a)(r,37137,a),Object(i.a)(r,34045,a),Object(i.a)(r,35978,a),Object(i.a)(r,35979,a),Object(i.a)(r,35968,a),Object(i.a)(r,35376,a),Object(i.a)(r,35375,a),Object(i.a)(r,35659,a),Object(i.a)(r,37154,a),Object(i.a)(r,35371,a),Object(i.a)(r,35658,a),Object(i.a)(r,35076,a),Object(i.a)(r,35077,a),Object(i.a)(r,35380,a),r);function s(e){return e&&!0}function u(e,t,n){var r=o[n],i="function"==typeof r?r(e,t,n):r;return void 0!==i?i:t(n)}},,,function(e,t,n){(function(e,r){var i=/%[sdj%]/g;t.format=function(e){if(!p(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,a=r.length,o=String(e).replace(i,function(e){if("%%"===e)return"%";if(n>=a)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),u=r[n];n<a;u=r[++n])g(u)||!_(u)?o+=" "+u:o+=" "+s(u);return o},t.deprecate=function(n,i){if(m(e.process))return function(){return t.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var a=!1;return function(){if(!a){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),a=!0}return n.apply(this,arguments)}};var a,o={};function s(e,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(n)?r.showHidden=n:n&&t._extend(r,n),m(r.showHidden)&&(r.showHidden=!1),m(r.depth)&&(r.depth=2),m(r.colors)&&(r.colors=!1),m(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),l(r,e,r.depth)}function u(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function c(e,t){return e}function l(e,n,r){if(e.customInspect&&n&&w(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return p(i)||(i=l(e,i,r)),i}var a=function(e,t){if(m(t))return e.stylize("undefined","undefined");if(p(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(b(t))return e.stylize(""+t,"number");if(v(t))return e.stylize(""+t,"boolean");if(g(t))return e.stylize("null","null")}(e,n);if(a)return a;var o=Object.keys(n),s=function(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(n)),E(n)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return f(n);if(0===o.length){if(w(n)){var u=n.name?": "+n.name:"";return e.stylize("[Function"+u+"]","special")}if(y(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(O(n))return e.stylize(Date.prototype.toString.call(n),"date");if(E(n))return f(n)}var c,_="",j=!1,x=["{","}"];(d(n)&&(j=!0,x=["[","]"]),w(n))&&(_=" [Function"+(n.name?": "+n.name:"")+"]");return y(n)&&(_=" "+RegExp.prototype.toString.call(n)),O(n)&&(_=" "+Date.prototype.toUTCString.call(n)),E(n)&&(_=" "+f(n)),0!==o.length||j&&0!=n.length?r<0?y(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),c=j?function(e,t,n,r,i){for(var a=[],o=0,s=t.length;o<s;++o)k(t,String(o))?a.push(h(e,t,n,r,String(o),!0)):a.push("");return i.forEach(function(i){i.match(/^\d+$/)||a.push(h(e,t,n,r,i,!0))}),a}(e,n,r,s,o):o.map(function(t){return h(e,n,r,s,t,j)}),e.seen.pop(),function(e,t,n){if(e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(c,_,x)):x[0]+_+x[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,i,a){var o,s,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),k(r,i)||(o="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=g(n)?l(e,u.value,null):l(e,u.value,n-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),m(o)){if(a&&i.match(/^\d+$/))return s;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function d(e){return Array.isArray(e)}function v(e){return"boolean"==typeof e}function g(e){return null===e}function b(e){return"number"==typeof e}function p(e){return"string"==typeof e}function m(e){return void 0===e}function y(e){return _(e)&&"[object RegExp]"===j(e)}function _(e){return"object"==typeof e&&null!==e}function O(e){return _(e)&&"[object Date]"===j(e)}function E(e){return _(e)&&("[object Error]"===j(e)||e instanceof Error)}function w(e){return"function"==typeof e}function j(e){return Object.prototype.toString.call(e)}function x(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(m(a)&&(a={}.NODE_DEBUG||""),e=e.toUpperCase(),!o[e])if(new RegExp("\\b"+e+"\\b","i").test(a)){var n=r.pid;o[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else o[e]=function(){};return o[e]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=v,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=b,t.isString=p,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=m,t.isRegExp=y,t.isObject=_,t.isDate=O,t.isError=E,t.isFunction=w,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(221);var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function k(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,n;console.log("%s - %s",(e=new Date,n=[x(e.getHours()),x(e.getMinutes()),x(e.getSeconds())].join(":"),[e.getDate(),A[e.getMonth()],n].join(" ")),t.format.apply(t,arguments))},t.inherits=n(222),t._extend=function(e,t){if(!t||!_(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,n(148),n(159))},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";n.d(t,"a",function(){return O});var r=n(132),i=n(133),a=n(135),o=n(134),s=n(136),u=n(174),c=n(165),l=n(224),f=n.n(l),h=n(228),d=n.n(h),v=n(229),g=n.n(v),b=n(230),p=n.n(b),m=n(231),y=n.n(m),_=[0,0,0],O=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(r.a)(this,t),e=Object(a.a)(this,Object(o.a)(t).call(this)),Array.isArray(n)&&1===arguments.length?e.copy(n):e.set(n,i,s),e}return Object(s.a)(t,e),Object(i.a)(t,[{key:"angle",value:function(e){return f()(this,e)}},{key:"cross",value:function(e){return d()(this,this,e),this.check()}},{key:"rotateX",value:function(e){var t=e.radians,n=e.origin,r=void 0===n?_:n;return g()(this,this,r,t),this.check()}},{key:"rotateY",value:function(e){var t=e.radians,n=e.origin,r=void 0===n?_:n;return p()(this,this,r,t),this.check()}},{key:"rotateZ",value:function(e){var t=e.radians,n=e.origin,r=void 0===n?_:n;return y()(this,this,r,t),this.check()}},{key:"operation",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,[this,this].concat(n)),this.check()}},{key:"ELEMENTS",get:function(){return 3}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=Object(c.a)(e)}}]),t}(u.a)},function(e,t,n){e.exports=function(e,t){var n=r(e[0],e[1],e[2]),o=r(t[0],t[1],t[2]);i(n,n),i(o,o);var s=a(n,o);return s>1?0:Math.acos(s)};var r=n(225),i=n(226),a=n(227)},function(e,t){e.exports=function(e,t,n){var r=new Float32Array(3);return r[0]=e,r[1]=t,r[2]=n,r}},function(e,t){e.exports=function(e,t){var n=t[0],r=t[1],i=t[2],a=n*n+r*r+i*i;a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a);return e}},function(e,t){e.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}},function(e,t){e.exports=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],u=n[2];return e[0]=i*u-a*s,e[1]=a*o-r*u,e[2]=r*s-i*o,e}},function(e,t){e.exports=function(e,t,n,r){var i=n[1],a=n[2],o=t[1]-i,s=t[2]-a,u=Math.sin(r),c=Math.cos(r);return e[0]=t[0],e[1]=i+o*c-s*u,e[2]=a+o*u+s*c,e}},function(e,t){e.exports=function(e,t,n,r){var i=n[0],a=n[2],o=t[0]-i,s=t[2]-a,u=Math.sin(r),c=Math.cos(r);return e[0]=i+s*u+o*c,e[1]=t[1],e[2]=a+s*c-o*u,e}},function(e,t){e.exports=function(e,t,n,r){var i=n[0],a=n[1],o=t[0]-i,s=t[1]-a,u=Math.sin(r),c=Math.cos(r);return e[0]=i+o*c-s*u,e[1]=a+o*u+s*c,e[2]=t[2],e}},function(e,t){e.exports=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],h=e[11],d=e[12],v=e[13],g=e[14],b=e[15];return(t*o-n*a)*(f*b-h*g)-(t*s-r*a)*(l*b-h*v)+(t*u-i*a)*(l*g-f*v)+(n*s-r*o)*(c*b-h*d)-(n*u-i*o)*(c*g-f*d)+(r*u-i*s)*(c*v-l*d)}},function(e,t){e.exports=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,u=i+i,c=n*o,l=r*o,f=r*s,h=i*o,d=i*s,v=i*u,g=a*o,b=a*s,p=a*u;return e[0]=1-f-v,e[1]=l+p,e[2]=h-b,e[3]=0,e[4]=l-p,e[5]=1-c-v,e[6]=d+g,e[7]=0,e[8]=h+b,e[9]=d-g,e[10]=1-c-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},function(e,t){e.exports=function(e,t,n,r,i,a,o){var s=1/(n-t),u=1/(i-r),c=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*u,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*u,e[10]=(o+a)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*c,e[15]=0,e}},function(e,t,n){var r=n(236);e.exports=function(e,t,n,i){var a,o,s,u,c,l,f,h,d,v,g=t[0],b=t[1],p=t[2],m=i[0],y=i[1],_=i[2],O=n[0],E=n[1],w=n[2];if(Math.abs(g-O)<1e-6&&Math.abs(b-E)<1e-6&&Math.abs(p-w)<1e-6)return r(e);f=g-O,h=b-E,d=p-w,v=1/Math.sqrt(f*f+h*h+d*d),a=y*(d*=v)-_*(h*=v),o=_*(f*=v)-m*d,s=m*h-y*f,(v=Math.sqrt(a*a+o*o+s*s))?(a*=v=1/v,o*=v,s*=v):(a=0,o=0,s=0);u=h*s-d*o,c=d*a-f*s,l=f*o-h*a,(v=Math.sqrt(u*u+c*c+l*l))?(u*=v=1/v,c*=v,l*=v):(u=0,c=0,l=0);return e[0]=a,e[1]=u,e[2]=f,e[3]=0,e[4]=o,e[5]=c,e[6]=h,e[7]=0,e[8]=s,e[9]=l,e[10]=d,e[11]=0,e[12]=-(a*g+o*b+s*p),e[13]=-(u*g+c*b+l*p),e[14]=-(f*g+h*b+d*p),e[15]=1,e}},function(e,t){e.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},function(e,t){e.exports=function(e,t,n,r,i,a,o){var s=1/(t-n),u=1/(r-i),c=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(o+a)*c,e[15]=1,e}},function(e,t){e.exports=function(e,t,n,r,i){var a=1/Math.tan(t/2),o=1/(r-i);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*o,e[15]=0,e}},function(e,t){e.exports=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}},function(e,t){e.exports=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],h=t[10],d=t[11],v=t[12],g=t[13],b=t[14],p=t[15],m=n*s-r*o,y=n*u-i*o,_=n*c-a*o,O=r*u-i*s,E=r*c-a*s,w=i*c-a*u,j=l*g-f*v,x=l*b-h*v,A=l*p-d*v,k=f*b-h*g,T=f*p-d*g,S=h*p-d*b,P=m*S-y*T+_*k+O*A-E*x+w*j;if(!P)return null;return P=1/P,e[0]=(s*S-u*T+c*k)*P,e[1]=(i*T-r*S-a*k)*P,e[2]=(g*w-b*E+p*O)*P,e[3]=(h*E-f*w-d*O)*P,e[4]=(u*A-o*S-c*x)*P,e[5]=(n*S-i*A+a*x)*P,e[6]=(b*_-v*w-p*y)*P,e[7]=(l*w-h*_+d*y)*P,e[8]=(o*T-s*A+c*j)*P,e[9]=(r*A-n*T-a*j)*P,e[10]=(v*E-g*_+p*m)*P,e[11]=(f*_-l*E-d*m)*P,e[12]=(s*x-o*k-u*j)*P,e[13]=(n*k-r*x+i*j)*P,e[14]=(g*y-v*O-b*m)*P,e[15]=(l*O-f*y+h*m)*P,e}},function(e,t){e.exports=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=t[9],d=t[10],v=t[11],g=t[12],b=t[13],p=t[14],m=t[15],y=n[0],_=n[1],O=n[2],E=n[3];return e[0]=y*r+_*s+O*f+E*g,e[1]=y*i+_*u+O*h+E*b,e[2]=y*a+_*c+O*d+E*p,e[3]=y*o+_*l+O*v+E*m,y=n[4],_=n[5],O=n[6],E=n[7],e[4]=y*r+_*s+O*f+E*g,e[5]=y*i+_*u+O*h+E*b,e[6]=y*a+_*c+O*d+E*p,e[7]=y*o+_*l+O*v+E*m,y=n[8],_=n[9],O=n[10],E=n[11],e[8]=y*r+_*s+O*f+E*g,e[9]=y*i+_*u+O*h+E*b,e[10]=y*a+_*c+O*d+E*p,e[11]=y*o+_*l+O*v+E*m,y=n[12],_=n[13],O=n[14],E=n[15],e[12]=y*r+_*s+O*f+E*g,e[13]=y*i+_*u+O*h+E*b,e[14]=y*a+_*c+O*d+E*p,e[15]=y*o+_*l+O*v+E*m,e}},function(e,t){e.exports=function(e,t,n,r){var i,a,o,s,u,c,l,f,h,d,v,g,b,p,m,y,_,O,E,w,j,x,A,k,T=r[0],S=r[1],P=r[2],L=Math.sqrt(T*T+S*S+P*P);if(Math.abs(L)<1e-6)return null;T*=L=1/L,S*=L,P*=L,i=Math.sin(n),a=Math.cos(n),o=1-a,s=t[0],u=t[1],c=t[2],l=t[3],f=t[4],h=t[5],d=t[6],v=t[7],g=t[8],b=t[9],p=t[10],m=t[11],y=T*T*o+a,_=S*T*o+P*i,O=P*T*o-S*i,E=T*S*o-P*i,w=S*S*o+a,j=P*S*o+T*i,x=T*P*o+S*i,A=S*P*o-T*i,k=P*P*o+a,e[0]=s*y+f*_+g*O,e[1]=u*y+h*_+b*O,e[2]=c*y+d*_+p*O,e[3]=l*y+v*_+m*O,e[4]=s*E+f*w+g*j,e[5]=u*E+h*w+b*j,e[6]=c*E+d*w+p*j,e[7]=l*E+v*w+m*j,e[8]=s*x+f*A+g*k,e[9]=u*x+h*A+b*k,e[10]=c*x+d*A+p*k,e[11]=l*x+v*A+m*k,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e}},function(e,t){e.exports=function(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},function(e,t){e.exports=function(e,t,n){var r,i,a,o,s,u,c,l,f,h,d,v,g=n[0],b=n[1],p=n[2];t===e?(e[12]=t[0]*g+t[4]*b+t[8]*p+t[12],e[13]=t[1]*g+t[5]*b+t[9]*p+t[13],e[14]=t[2]*g+t[6]*b+t[10]*p+t[14],e[15]=t[3]*g+t[7]*b+t[11]*p+t[15]):(r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=t[9],d=t[10],v=t[11],e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=c,e[7]=l,e[8]=f,e[9]=h,e[10]=d,e[11]=v,e[12]=r*g+s*b+f*p+t[12],e[13]=i*g+u*b+h*p+t[13],e[14]=a*g+c*b+d*p+t[14],e[15]=o*g+l*b+v*p+t[15]);return e}},function(e,t){e.exports=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}},function(e,t){e.exports=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return o=o||1,e[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/o,e[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,e[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,e}},function(e,t){e.exports=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e}},function(e,t){e.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],h=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[4]=a*i+c*r,e[5]=o*i+l*r,e[6]=s*i+f*r,e[7]=u*i+h*r,e[8]=c*i-a*r,e[9]=l*i-o*r,e[10]=f*i-s*r,e[11]=h*i-u*r,e}},function(e,t){e.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],c=t[8],l=t[9],f=t[10],h=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=a*i-c*r,e[1]=o*i-l*r,e[2]=s*i-f*r,e[3]=u*i-h*r,e[8]=a*r+c*i,e[9]=o*r+l*i,e[10]=s*r+f*i,e[11]=u*r+h*i,e}},function(e,t){e.exports=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],c=t[4],l=t[5],f=t[6],h=t[7];t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=a*i+c*r,e[1]=o*i+l*r,e[2]=s*i+f*r,e[3]=u*i+h*r,e[4]=c*i-a*r,e[5]=l*i-o*r,e[6]=f*i-s*r,e[7]=h*i-u*r,e}},function(e,t){e.exports=function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="undefined"!=typeof window&&window.addEventListener,a=new Map,o=function(){return i&&window.__SEER_INITIALIZED__},s=function(e,t){var n=a.get(e),r=Date.now();return!!(n&&r-n<t)||(a.set(e,r),!1)},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i&&o()){var n=new Set,a=JSON.stringify(t,function(e){return function(t,n){if(!n||"object"!==(void 0===n?"undefined":r(n))||!e.has(n))return e.add(n),Object.prototype.toString.call(n).slice(8,-1).includes("Array")?Array.prototype.slice.call(n,0,20):n}}(n));try{window.postMessage({type:e,payload:a,source:"seer-agent"},"*")}catch(e){if(s("seer-log",2e3))return;console.log(e)}}},c=new Map,l=function(e){if(e&&e.data&&"seer-core"===e.data.source){var t=e.data,n=t.type,r=t.payload,i=c.get(n);i&&i.forEach(function(e){return e(r)})}},f=function(){i&&!window.__SEER_LISTENER__&&(window.addEventListener("message",l),window.__SEER_LISTENER__=!0)};t.default={send:u,throttle:s,isReady:o,list:function(e,t){return u("LIST",{key:e,data:t})},listItem:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return u("LIST_ITEM",{key:e,itemKey:t,data:n})},updateItem:function(e,t,n,r){return u("UPDATE_ITEM",{key:e,itemKey:t,path:n,data:r})},multiUpdate:function(e,t,n){return u("MULTI_UPDATE_ITEM",{key:e,itemKey:t,array:n})},deleteItem:function(e,t){return u("DELETE_ITEM",{key:e,itemKey:t})},addLog:function(e,t,n){return u("ADD_LOG",{key:e,itemKey:t,msg:n})},listeners:c,listenFor:function(e,t){if(i){if(!e||!t)throw new Error("Please provide a type and callback");c.has(e)||c.set(e,[]),window.__SEER_LISTENER__||f(),c.get(e).push(t)}},removeListener:function(e){c.forEach(function(t,n){c.set(n,t.filter(function(t){return t!==e}))})},init:f,clean:function(){i&&window.__SEER_LISTENER__&&(window.removeEventListener("message",l),delete window.__SEER_LISTENER__)}}},function(e,t,n){e.exports=n(254)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){(0,r.installParameterDefinitions)(),console.log("luma.gl: WebGL debug support installed")};var r=n(255),i=n(256);(void 0!==e?e:window).WebGLDebug=i,console.log("luma.gl: WebGL debug support imported")}).call(this,n(148))},function(e,t,n){"use strict";var r=n(7);Object.defineProperty(t,"__esModule",{value:!0}),t.installParameterDefinitions=function(){},t.TEXTURE_PARAMETERS=t.SAMPLER_PARAMETERS=t.RENDERBUFFER_PARAMETERS=t.PROGRAM_PARAMETERS=t.FRAMEBUFFER_STATUS=t.FRAMEBUFFER_ATTACHMENT_PARAMETERS=t.FENCE_SYNC_PARAMETERS=t.BUFFER_PARAMETERS=t.GLboolean=t.GLuint=t.GLint=t.GLfloat=t.GLenum=void 0;var i,a,o,s,u,c,l=r(n(47));t.GLenum="GLenum";t.GLfloat="GLfloat";t.GLint="GLint";t.GLuint="GLint";t.GLboolean="GLboolean";var f=(i={},(0,l.default)(i,34660,{webgl1:0}),(0,l.default)(i,34661,{webgl1:0}),i);t.BUFFER_PARAMETERS=f;t.FENCE_SYNC_PARAMETERS=[37138,37140,37139,37141];t.FRAMEBUFFER_ATTACHMENT_PARAMETERS=[36049,36048,36051,36050,33296,36052,33298,33299,33300,33301,33302,33303,33297];var h=(a={},(0,l.default)(a,36053,"Success. Framebuffer is correctly set up"),(0,l.default)(a,36054,"Framebuffer attachment types mismatched or some attachment point not attachment complete"),(0,l.default)(a,36055,"Framebuffer has no attachment"),(0,l.default)(a,36057,"Framebuffer attachments do not have the same size"),(0,l.default)(a,36061,"Framebuffer attachment format not supported or depth and stencil attachments are not same"),(0,l.default)(a,36182,"Framebuffer attachement SAMPLES differs among renderbuffers, or are mixed with textures"),a);t.FRAMEBUFFER_STATUS=h;var d=(o={},(0,l.default)(o,35712,{webgl1:0}),(0,l.default)(o,35714,{webgl1:0}),(0,l.default)(o,35715,{webgl1:0}),(0,l.default)(o,35717,{webgl1:0}),(0,l.default)(o,35721,{webgl1:0}),(0,l.default)(o,35718,{webgl1:0}),(0,l.default)(o,35967,{webgl2:0}),(0,l.default)(o,35971,{webgl2:0}),(0,l.default)(o,35382,{webgl2:0}),o);t.PROGRAM_PARAMETERS=d;var v=(s={},(0,l.default)(s,36162,{webgl1:0}),(0,l.default)(s,36163,{webgl1:0}),(0,l.default)(s,36164,{type:"GLenum",webgl1:32854}),(0,l.default)(s,36177,{webgl1:0}),(0,l.default)(s,36178,{webgl1:0}),(0,l.default)(s,36176,{webgl1:0}),(0,l.default)(s,36179,{webgl1:0}),(0,l.default)(s,36180,{webgl1:0}),(0,l.default)(s,36181,{webgl1:0}),(0,l.default)(s,36011,{webgl2:1}),s);t.RENDERBUFFER_PARAMETERS=v;var g=(u={},(0,l.default)(u,10240,{webgl2:!0}),(0,l.default)(u,10241,{webgl2:!0}),(0,l.default)(u,10242,{webgl2:!0}),(0,l.default)(u,10243,{webgl2:!0}),(0,l.default)(u,32882,{webgl2:!0}),(0,l.default)(u,33084,{webgl2:!0}),(0,l.default)(u,33085,{webgl2:!0}),(0,l.default)(u,34893,{webgl2:!0}),(0,l.default)(u,34892,{webgl2:!0}),(0,l.default)(u,33082,{webgl2:!0}),(0,l.default)(u,33083,{webgl2:!0}),u);t.SAMPLER_PARAMETERS=g;var b=(c={},(0,l.default)(c,10240,{type:"GLenum",webgl1:9729}),(0,l.default)(c,10241,{type:"GLenum",webgl1:9986}),(0,l.default)(c,10242,{type:"GLenum",webgl1:10497}),(0,l.default)(c,10243,{type:"GLenum",webgl1:10497}),(0,l.default)(c,32882,{type:"GLenum",webgl2:10497}),(0,l.default)(c,33084,{webgl2:0}),(0,l.default)(c,33085,{webgl2:1e3}),(0,l.default)(c,34893,{type:"GLenum",webgl2:515}),(0,l.default)(c,34892,{type:"GLenum",webgl2:0}),(0,l.default)(c,33082,{webgl2:-1e3}),(0,l.default)(c,33083,{webgl2:1e3}),(0,l.default)(c,4096,{webgl1:0}),(0,l.default)(c,4097,{webgl1:0}),c);t.TEXTURE_PARAMETERS=b},function(e,t,n){(function(t){WebGLDebugUtils=function(){var e;void 0===e&&(e=t);var n=function(t){e.console&&e.console.error?e.console.error(t):function(t){e.console&&e.console.log&&e.console.log(t)}(t)},r={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},bindBuffer:{2:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}},bufferData:{3:{0:!0,2:!0},4:{0:!0,2:!0},5:{0:!0,2:!0}},bufferSubData:{3:{0:!0},4:{0:!0},5:{0:!0}},copyBufferSubData:{5:{0:!0,1:!0}},getBufferSubData:{3:{0:!0},4:{0:!0},5:{0:!0}},blitFramebuffer:{10:{8:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]},9:!0}},framebufferTextureLayer:{5:{0:!0,1:!0}},invalidateFramebuffer:{2:{0:!0}},invalidateSubFramebuffer:{6:{0:!0}},readBuffer:{1:{0:!0}},getInternalformatParameter:{3:{0:!0,1:!0,2:!0}},renderbufferStorageMultisample:{5:{0:!0,2:!0}},texStorage2D:{5:{0:!0,2:!0}},texStorage3D:{6:{0:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0},10:{0:!0,2:!0,6:!0,7:!0}},texImage3D:{10:{0:!0,2:!0,7:!0,8:!0},11:{0:!0,2:!0,7:!0,8:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0},10:{0:!0,6:!0,7:!0}},texSubImage3D:{11:{0:!0,8:!0,9:!0},12:{0:!0,8:!0,9:!0}},copyTexSubImage3D:{9:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0},8:{0:!0,2:!0},9:{0:!0,2:!0}},compressedTexImage3D:{8:{0:!0,2:!0},9:{0:!0,2:!0},10:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0},9:{0:!0,6:!0},10:{0:!0,6:!0}},compressedTexSubImage3D:{10:{0:!0,8:!0},11:{0:!0,8:!0},12:{0:!0,8:!0}},vertexAttribIPointer:{5:{2:!0}},drawArraysInstanced:{4:{0:!0}},drawElementsInstanced:{5:{0:!0,2:!0}},drawRangeElements:{6:{0:!0,4:!0}},readPixels:{7:{4:!0,5:!0},8:{4:!0,5:!0}},clearBufferfv:{3:{0:!0},4:{0:!0}},clearBufferiv:{3:{0:!0},4:{0:!0}},clearBufferuiv:{3:{0:!0},4:{0:!0}},clearBufferfi:{4:{0:!0}},beginQuery:{2:{0:!0}},endQuery:{1:{0:!0}},getQuery:{2:{0:!0,1:!0}},getQueryParameter:{2:{1:!0}},samplerParameteri:{3:{1:!0,2:!0}},samplerParameterf:{3:{1:!0}},getSamplerParameter:{2:{1:!0}},fenceSync:{2:{0:!0,1:{enumBitwiseOr:[]}}},clientWaitSync:{3:{1:{enumBitwiseOr:["SYNC_FLUSH_COMMANDS_BIT"]}}},waitSync:{3:{1:{enumBitwiseOr:[]}}},getSyncParameter:{2:{1:!0}},bindTransformFeedback:{2:{0:!0}},beginTransformFeedback:{1:{0:!0}},transformFeedbackVaryings:{3:{2:!0}},bindBufferBase:{3:{0:!0}},bindBufferRange:{5:{0:!0}},getIndexedParameter:{2:{0:!0}},getActiveUniforms:{3:{2:!0}},getActiveUniformBlockParameter:{3:{2:!0}}},i=null,a=null;function o(e){if(null==i)for(var t in i={},a={},e)"number"==typeof e[t]&&(i[e[t]]=t,a[t]=e[t])}function s(){if(null==i)throw"WebGLDebugUtils.init(ctx) not called"}function u(e){s();var t=i[e];return void 0!==t?"gl."+t:"/*UNKNOWN WebGL ENUM*/ 0x"+e.toString(16)}function c(e,t,n,i){var o;if(void 0!==(o=r[e])&&(void 0!==(o=o[t])&&o[n])){if("object"==typeof o[n]&&void 0!==o[n].enumBitwiseOr){for(var s=o[n].enumBitwiseOr,c=0,l=[],f=0;f<s.length;++f){var h=a[s[f]];0!=(i&h)&&(c|=h,l.push(u(h)))}return c===i?l.join(" | "):u(i)}return u(i)}return null===i?"null":void 0===i?"undefined":i.toString()}function l(e,t,n){e.__defineGetter__(n,function(){return t[n]}),e.__defineSetter__(n,function(e){t[n]=e})}function f(e){var t=!!e.createTransformFeedback;t&&e.bindVertexArray(null);var n=e.getParameter(e.MAX_VERTEX_ATTRIBS),r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r);for(var i=0;i<n;++i)e.disableVertexAttribArray(i),e.vertexAttribPointer(i,4,e.FLOAT,!1,0,0),e.vertexAttrib1f(i,0),t&&e.vertexAttribDivisor(i,0);e.deleteBuffer(r);var a=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);for(i=0;i<a;++i)e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_CUBE_MAP,null),e.bindTexture(e.TEXTURE_2D,null),t&&(e.bindTexture(e.TEXTURE_2D_ARRAY,null),e.bindTexture(e.TEXTURE_3D,null),e.bindSampler(i,null));if(e.activeTexture(e.TEXTURE0),e.useProgram(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.DITHER),e.disable(e.SCISSOR_TEST),e.blendColor(0,0,0,0),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.clearColor(0,0,0,0),e.clearDepth(1),e.clearStencil(-1),e.colorMask(!0,!0,!0,!0),e.cullFace(e.BACK),e.depthFunc(e.LESS),e.depthMask(!0),e.depthRange(0,1),e.frontFace(e.CCW),e.hint(e.GENERATE_MIPMAP_HINT,e.DONT_CARE),e.lineWidth(1),e.pixelStorei(e.PACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.UNPACK_COLORSPACE_CONVERSION_WEBGL&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.BROWSER_DEFAULT_WEBGL),e.polygonOffset(0,0),e.sampleCoverage(1,!1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilMask(4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.viewport(0,0,e.canvas.width,e.canvas.height),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT),t){e.drawBuffers([e.BACK]),e.readBuffer(e.BACK),e.bindBuffer(e.COPY_READ_BUFFER,null),e.bindBuffer(e.COPY_WRITE_BUFFER,null),e.bindBuffer(e.PIXEL_PACK_BUFFER,null),e.bindBuffer(e.PIXEL_UNPACK_BUFFER,null);var o=e.getParameter(e.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS);for(i=0;i<o;++i)e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,i,null);var s=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);for(i=0;i<s;++i)e.bindBufferBase(e.UNIFORM_BUFFER,i,null);e.disable(e.RASTERIZER_DISCARD),e.pixelStorei(e.UNPACK_IMAGE_HEIGHT,0),e.pixelStorei(e.UNPACK_SKIP_IMAGES,0),e.pixelStorei(e.UNPACK_ROW_LENGTH,0),e.pixelStorei(e.UNPACK_SKIP_ROWS,0),e.pixelStorei(e.UNPACK_SKIP_PIXELS,0),e.pixelStorei(e.PACK_ROW_LENGTH,0),e.pixelStorei(e.PACK_SKIP_ROWS,0),e.pixelStorei(e.PACK_SKIP_PIXELS,0),e.hint(e.FRAGMENT_SHADER_DERIVATIVE_HINT,e.DONT_CARE)}for(;e.getError(););}return{init:o,mightBeEnum:function(e){return s(),void 0!==i[e]},glEnumToString:u,glFunctionArgToString:c,glFunctionArgsToString:function(e,t){for(var n="",r=t.length,i=0;i<r;++i)n+=(0==i?"":", ")+c(e,r,i,t[i]);return n},makeDebugContext:function e(t,r,i,a){a=a||t,o(t),r=r||function(e,t,r){for(var i="",a=r.length,o=0;o<a;++o)i+=(0==o?"":", ")+c(t,a,o,r[o]);n("WebGL error "+u(e)+" in "+t+"("+i+")")};var s={};function f(e,t){return function(){i&&i(t,arguments);var n=e[t].apply(e,arguments),o=a.getError();return 0!=o&&(s[o]=!0,r(o,t,arguments)),n}}var h={};for(var d in t)if("function"==typeof t[d])if("getExtension"!=d)h[d]=f(t,d);else{var v=f(t,d);h[d]=function(){var n=v.apply(t,arguments);return n?e(n,r,i,a):null}}else l(h,t,d);return h.getError=function(){for(var e in s)if(s.hasOwnProperty(e)&&s[e])return s[e]=!1,e;return t.NO_ERROR},h},makeLostContextSimulatingCanvas:function(t){var n,r,i,a=[],o=[],s={},u=1,c=!1,h=[],d=0,v=0,g=!1,b=0,p={};function m(e){return"function"==typeof e?e:function(t){e.handleEvent(t)}}t.getContext=(i=t.getContext,function(){var a=i.apply(t,arguments);if(a instanceof WebGLRenderingContext||e.WebGL2RenderingContext&&a instanceof WebGL2RenderingContext){if(a!=n){if(n)throw"got different context";r=e.WebGL2RenderingContext&&a instanceof WebGL2RenderingContext,s=function(e){for(var t in e)"function"==typeof e[t]?s[t]=E(e,t):l(s,e,t);s.getError=function(){if(O(),!c)for(;e=n.getError();)p[e]=!0;for(var e in p)if(p[e])return delete p[e],e;return s.NO_ERROR};var i=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"];r&&i.push("createQuery","createSampler","fenceSync","createTransformFeedback","createVertexArray");for(var a=0;a<i.length;++a){var o=i[a];s[o]=function(t){return function(){if(O(),c)return null;var n=t.apply(e,arguments);return n.__webglDebugContextLostId__=u,h.push(n),n}}(e[o])}var f=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"];r&&f.push("getInternalformatParameter","getQuery","getQueryParameter","getSamplerParameter","getSyncParameter","getTransformFeedbackVarying","getIndexedParameter","getUniformIndices","getActiveUniforms","getActiveUniformBlockParameter","getActiveUniformBlockName");for(var a=0;a<f.length;++a){var o=f[a];s[o]=function(t){return function(){return O(),c?null:t.apply(e,arguments)}}(s[o])}var d,v=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"];r&&v.push("isQuery","isSampler","isSync","isTransformFeedback","isVertexArray");for(var a=0;a<v.length;++a){var o=v[a];s[o]=function(t){return function(){return O(),!c&&t.apply(e,arguments)}}(s[o])}return s.checkFramebufferStatus=(d=s.checkFramebufferStatus,function(){return O(),c?s.FRAMEBUFFER_UNSUPPORTED:d.apply(e,arguments)}),s.getAttribLocation=function(t){return function(){return O(),c?-1:t.apply(e,arguments)}}(s.getAttribLocation),s.getVertexAttribOffset=function(t){return function(){return O(),c?0:t.apply(e,arguments)}}(s.getVertexAttribOffset),s.isContextLost=function(){return c},r&&(s.getFragDataLocation=function(t){return function(){return O(),c?-1:t.apply(e,arguments)}}(s.getFragDataLocation),s.clientWaitSync=function(t){return function(){return O(),c?s.WAIT_FAILED:t.apply(e,arguments)}}(s.clientWaitSync),s.getUniformBlockIndex=function(t){return function(){return O(),c?s.INVALID_INDEX:t.apply(e,arguments)}}(s.getUniformBlockIndex)),s}(n=a)}return s}return a});var y=function(e){a.push(m(e))},_=function(e){o.push(m(e))};function O(){++v,c||d==v&&t.loseContext()}function E(e,t){var n=e[t];return function(){if(O(),!c)return n.apply(e,arguments)}}function w(e){return{statusMessage:e,preventDefault:function(){g=!0}}}return function(e){var t=e.addEventListener;e.addEventListener=function(n,r,i){switch(n){case"webglcontextlost":y(r);break;case"webglcontextrestored":_(r);break;default:t.apply(e,arguments)}}}(t),t.loseContext=function(){if(!c){for(c=!0,d=0,++u;n.getError(););!function(){for(var e=Object.keys(p),t=0;t<e.length;++t)delete p[e[t]]}(),p[n.CONTEXT_LOST_WEBGL]=!0;var e=w("context lost"),r=a.slice();setTimeout(function(){for(var n=0;n<r.length;++n)r[n](e);b>=0&&setTimeout(function(){t.restoreContext()},b)},0)}},t.restoreContext=function(){c&&o.length&&setTimeout(function(){if(!g)throw"can not restore. webglcontestlost listener did not call event.preventDefault";!function(){for(var e=0;e<h.length;++e){var t=h[e];t instanceof WebGLBuffer?n.deleteBuffer(t):t instanceof WebGLFramebuffer?n.deleteFramebuffer(t):t instanceof WebGLProgram?n.deleteProgram(t):t instanceof WebGLRenderbuffer?n.deleteRenderbuffer(t):t instanceof WebGLShader?n.deleteShader(t):t instanceof WebGLTexture?n.deleteTexture(t):r&&(t instanceof WebGLQuery?n.deleteQuery(t):t instanceof WebGLSampler?n.deleteSampler(t):t instanceof WebGLSync?n.deleteSync(t):t instanceof WebGLTransformFeedback?n.deleteTransformFeedback(t):t instanceof WebGLVertexArrayObject&&n.deleteVertexArray(t))}}(),f(n),c=!1,v=0,g=!1;for(var e=o.slice(),t=w("context restored"),i=0;i<e.length;++i)e[i](t)},0)},t.loseContextInNCalls=function(e){if(c)throw"You can not ask a lost contet to be lost";d=v+e},t.getNumCalls=function(){return v},t.setRestoreTimeout=function(e){b=e},t},resetToInitialState:f}}(),e.exports=WebGLDebugUtils}).call(this,n(148))},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=u(a),s=u(n(259));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.node=o.default.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.PureComponent),i(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.value,n=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["value"]);this.odometer=new s.default(r({el:this.node.current,value:t},n))}},{key:"componentDidUpdate",value:function(){var e=this.props.value;this.odometer.update(e)}},{key:"render",value:function(){return o.default.createElement("div",{ref:this.node})}}]),t}();t.default=c},function(e,t,n){var r;(function(){var n,i,a,o,s,u,c,l,f,h,d,v,g,b,p,m,y,_,O,E,w,j,x=[].slice;i=/^\(?([^)]*)\)?(?:(.)(d+))?$/,n=2e3,a=2,o=1e3/30,p=document.createElement("div").style,c=null!=p.transition||null!=p.webkitTransition||null!=p.mozTransition||null!=p.oTransition,g=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,s=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,f=function(e){var t;return(t=document.createElement("div")).innerHTML=e,t.children[0]},v=function(e,t){return e.className=e.className.replace(new RegExp("(^| )"+t.split(" ").join("|")+"( |$)","gi")," ")},l=function(e,t){return v(e,t),e.className+=" "+t},m=function(e,t){var n;if(null!=document.createEvent)return(n=document.createEvent("HTMLEvents")).initEvent(t,!0,!0),e.dispatchEvent(n)},d=function(){var e,t;return null!=(e=null!=(t=window.performance)&&"function"==typeof t.now?t.now():void 0)?e:+new Date},b=function(e,t){return null==t&&(t=0),t?(e*=Math.pow(10,t),e+=.5,(e=Math.floor(e))/Math.pow(10,t)):Math.round(e)},y=function(e){return e<0?Math.ceil(e):Math.floor(e)},h=function(e){return e-b(e)},O=!1,(_=function(){var e,t,n,r,i;if(!O&&null!=window.jQuery){for(O=!0,i=[],t=0,n=(r=["html","text"]).length;t<n;t++)e=r[t],i.push(function(e){var t;return t=window.jQuery.fn[e],window.jQuery.fn[e]=function(e){var n;return null==e||null==(null!=(n=this[0])?n.odometer:void 0)?t.apply(this,arguments):this[0].odometer.update(e)}}(e));return i}})(),setTimeout(_,0),(u=function(){function e(t){var r,i,s,u,c,l,f,h,d,v=this;if(this.options=t,this.el=this.options.el,null!=this.el.odometer)return this.el.odometer;for(r in this.el.odometer=this,f=e.options)s=f[r],null==this.options[r]&&(this.options[r]=s);null==(u=this.options).duration&&(u.duration=n),this.MAX_VALUES=this.options.duration/o/a|0,this.resetFormat(),this.value=this.cleanValue(null!=(h=this.options.value)?h:""),this.renderInside(),this.render();try{for(c=0,l=(d=["innerHTML","innerText","textContent"]).length;c<l;c++)i=d[c],null!=this.el[i]&&function(e){Object.defineProperty(v.el,e,{get:function(){var t;return"innerHTML"===e?v.inside.outerHTML:null!=(t=v.inside.innerText)?t:v.inside.textContent},set:function(e){return v.update(e)}})}(i)}catch(e){e,this.watchForMutations()}}return e.prototype.renderInside=function(){return this.inside=document.createElement("div"),this.inside.className="odometer-inside",this.el.innerHTML="",this.el.appendChild(this.inside)},e.prototype.watchForMutations=function(){var e=this;if(null!=s)try{return null==this.observer&&(this.observer=new s(function(t){var n;return n=e.el.innerText,e.renderInside(),e.render(e.value),e.update(n)})),this.watchMutations=!0,this.startWatchingMutations()}catch(e){e}},e.prototype.startWatchingMutations=function(){if(this.watchMutations)return this.observer.observe(this.el,{childList:!0})},e.prototype.stopWatchingMutations=function(){var e;return null!=(e=this.observer)?e.disconnect():void 0},e.prototype.cleanValue=function(e){var t;return"string"==typeof e&&(e=(e=(e=e.replace(null!=(t=this.format.radix)?t:".","<radix>")).replace(/[.,]/g,"")).replace("<radix>","."),e=parseFloat(e,10)||0),b(e,this.format.precision)},e.prototype.bindTransitionEnd=function(){var e,t,n,r,i,a,o=this;if(!this.transitionEndBound){for(this.transitionEndBound=!0,t=!1,a=[],n=0,r=(i="transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd".split(" ")).length;n<r;n++)e=i[n],a.push(this.el.addEventListener(e,function(){return!!t||(t=!0,setTimeout(function(){return o.render(),t=!1,m(o.el,"odometerdone")},0),!0)},!1));return a}},e.prototype.resetFormat=function(){var e,t,n,r,a,o,s,u;if((e=null!=(s=this.options.format)?s:"(,ddd).dd")||(e="d"),!(n=i.exec(e)))throw new Error("Odometer: Unparsable digit format");return o=(u=n.slice(1,4))[0],a=u[1],r=(null!=(t=u[2])?t.length:void 0)||0,this.format={repeating:o,radix:a,precision:r}},e.prototype.render=function(e){var t,n,r,i,a,o,s;for(null==e&&(e=this.value),this.stopWatchingMutations(),this.resetFormat(),this.inside.innerHTML="",a=this.options.theme,i=[],o=0,s=(t=this.el.className.split(" ")).length;o<s;o++)(n=t[o]).length&&((r=/^odometer-theme-(.+)$/.exec(n))?a=r[1]:/^odometer(-|$)/.test(n)||i.push(n));return i.push("odometer"),c||i.push("odometer-no-transitions"),a?i.push("odometer-theme-"+a):i.push("odometer-auto-theme"),this.el.className=i.join(" "),this.ribbons={},this.formatDigits(e),this.startWatchingMutations()},e.prototype.formatDigits=function(e){var t,n,r,i,a,o,s,u,c;if(this.digits=[],this.options.formatFunction)for(i=0,o=(u=this.options.formatFunction(e).split("").reverse()).length;i<o;i++)(n=u[i]).match(/0-9/)?((t=this.renderDigit()).querySelector(".odometer-value").innerHTML=n,this.digits.push(t),this.insertDigit(t)):this.addSpacer(n);else for(r=!this.format.precision||!h(e)||!1,a=0,s=(c=e.toString().split("").reverse()).length;a<s;a++)"."===(t=c[a])&&(r=!0),this.addDigit(t,r)},e.prototype.update=function(e){var t,n=this;if(t=(e=this.cleanValue(e))-this.value)return v(this.el,"odometer-animating-up odometer-animating-down odometer-animating"),l(this.el,t>0?"odometer-animating-up":"odometer-animating-down"),this.stopWatchingMutations(),this.animate(e),this.startWatchingMutations(),setTimeout(function(){return n.el.offsetHeight,l(n.el,"odometer-animating")},0),this.value=e},e.prototype.renderDigit=function(){return f('<span class="odometer-digit"><span class="odometer-digit-spacer">8</span><span class="odometer-digit-inner"><span class="odometer-ribbon"><span class="odometer-ribbon-inner"><span class="odometer-value"></span></span></span></span></span>')},e.prototype.insertDigit=function(e,t){return null!=t?this.inside.insertBefore(e,t):this.inside.children.length?this.inside.insertBefore(e,this.inside.children[0]):this.inside.appendChild(e)},e.prototype.addSpacer=function(e,t,n){var r;return(r=f('<span class="odometer-formatting-mark"></span>')).innerHTML=e,n&&l(r,n),this.insertDigit(r,t)},e.prototype.addDigit=function(e,t){var n,r,i,a;if(null==t&&(t=!0),"-"===e)return this.addSpacer(e,null,"odometer-negation-mark");if("."===e)return this.addSpacer(null!=(a=this.format.radix)?a:".",null,"odometer-radix-mark");if(t)for(i=!1;;){if(!this.format.repeating.length){if(i)throw new Error("Bad odometer format without digits");this.resetFormat(),i=!0}if(n=this.format.repeating[this.format.repeating.length-1],this.format.repeating=this.format.repeating.substring(0,this.format.repeating.length-1),"d"===n)break;this.addSpacer(n)}return(r=this.renderDigit()).querySelector(".odometer-value").innerHTML=e,this.digits.push(r),this.insertDigit(r)},e.prototype.animate=function(e){return c&&"count"!==this.options.animation?this.animateSlide(e):this.animateCount(e)},e.prototype.animateCount=function(e){var t,n,r,i,a,o=this;if(n=+e-this.value)return i=r=d(),t=this.value,(a=function(){var s,u;return d()-i>o.options.duration?(o.value=e,o.render(),void m(o.el,"odometerdone")):((s=d()-r)>50&&(r=d(),u=s/o.options.duration,t+=n*u,o.render(Math.round(t))),null!=g?g(a):setTimeout(a,50))})()},e.prototype.getDigitCount=function(){var e,t,n,r,i,a;for(e=i=0,a=(r=1<=arguments.length?x.call(arguments,0):[]).length;i<a;e=++i)n=r[e],r[e]=Math.abs(n);return t=Math.max.apply(Math,r),Math.ceil(Math.log(t+1)/Math.log(10))},e.prototype.getFractionalDigitCount=function(){var e,t,n,r,i,a,o;for(t=/^\-?\d*\.(\d*?)0*$/,e=a=0,o=(i=1<=arguments.length?x.call(arguments,0):[]).length;a<o;e=++a)r=i[e],i[e]=r.toString(),n=t.exec(i[e]),i[e]=null==n?0:n[1].length;return Math.max.apply(Math,i)},e.prototype.resetDigits=function(){return this.digits=[],this.ribbons=[],this.inside.innerHTML="",this.resetFormat()},e.prototype.animateSlide=function(e){var t,n,r,i,a,o,s,u,c,f,h,d,v,g,b,p,m,_,O,E,w,j,x,A,k,T,S;if(p=this.value,(u=this.getFractionalDigitCount(p,e))&&(e*=Math.pow(10,u),p*=Math.pow(10,u)),r=e-p){for(this.bindTransitionEnd(),i=this.getDigitCount(p,e),a=[],t=0,h=O=0;0<=i?O<i:O>i;h=0<=i?++O:--O){if(m=y(p/Math.pow(10,i-h-1)),o=(s=y(e/Math.pow(10,i-h-1)))-m,Math.abs(o)>this.MAX_VALUES){for(f=[],d=o/(this.MAX_VALUES+this.MAX_VALUES*t*.5),n=m;o>0&&n<s||o<0&&n>s;)f.push(Math.round(n)),n+=d;f[f.length-1]!==s&&f.push(s),t++}else f=function(){S=[];for(var e=m;m<=s?e<=s:e>=s;m<=s?e++:e--)S.push(e);return S}.apply(this);for(h=E=0,j=f.length;E<j;h=++E)c=f[h],f[h]=Math.abs(c%10);a.push(f)}for(this.resetDigits(),h=w=0,x=(T=a.reverse()).length;w<x;h=++w)for(f=T[h],this.digits[h]||this.addDigit(" ",h>=u),null==(_=this.ribbons)[h]&&(_[h]=this.digits[h].querySelector(".odometer-ribbon-inner")),this.ribbons[h].innerHTML="",r<0&&(f=f.reverse()),v=k=0,A=f.length;k<A;v=++k)c=f[v],(b=document.createElement("div")).className="odometer-value",b.innerHTML=c,this.ribbons[h].appendChild(b),v===f.length-1&&l(b,"odometer-last-value"),0===v&&l(b,"odometer-first-value");return m<0&&this.addDigit("-"),null!=(g=this.inside.querySelector(".odometer-radix-mark"))&&g.parent.removeChild(g),u?this.addSpacer(this.format.radix,this.digits[u-1],"odometer-radix-mark"):void 0}},e}()).options=null!=(w=window.odometerOptions)?w:{},setTimeout(function(){var e,t,n,r,i;if(window.odometerOptions){for(e in i=[],r=window.odometerOptions)t=r[e],i.push(null!=(n=u.options)[e]?(n=u.options)[e]:n[e]=t);return i}},0),u.init=function(){var e,t,n,r,i,a;if(null!=document.querySelectorAll){for(a=[],n=0,r=(t=document.querySelectorAll(u.options.selector||".odometer")).length;n<r;n++)e=t[n],a.push(e.odometer=new u({el:e,value:null!=(i=e.innerText)?i:e.textContent}));return a}},null!=(null!=(j=document.documentElement)?j.doScroll:void 0)&&null!=document.createEventObject?(E=document.onreadystatechange,document.onreadystatechange=function(){return"complete"===document.readyState&&!1!==u.options.auto&&u.init(),null!=E?E.apply(this,arguments):void 0}):document.addEventListener("DOMContentLoaded",function(){if(!1!==u.options.auto)return u.init()},!1),void 0===(r=function(){return u}.apply(t,[]))||(e.exports=r)}).call(this)},,,,function(e,t,n){"use strict";n(152);var r=n(143),i=n(137),a=n(142),o="Failed to create WebGL context in Node.js, headless gl not available",s="Failed to create WebGL context in Node.js, headless gl returned null";var u,c=n(139),l=c.c&&"undefined"!=typeof document,f=l&&"complete"===document.readyState;function h(){return u||(u=l?new Promise(function(e,t){if(l&&"complete"===document.readyState)return f=!0,void e(document);window.onload=function(){f=!0,e(document)}}):Promise.resolve({})),u}function d(e){var t,n=e.canvas,r=e.width,i=e.height,a=e.onError,o=void 0===a?function(){}:a;return"string"==typeof n?(f||o("createGLContext called on canvas '".concat(n,"' before page was loaded")),t=document.getElementById(n)):t=n||function(e){var t=e.width,n=void 0===t?800:t,r=e.height,i=void 0===r?600:r,a=e.id,o=void 0===a?"gl-canvas":a,s=e.insert,u=void 0===s||s,c=document.createElement("canvas");if(c.id=o,c.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",c.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",u){var l=document.body;l.insertBefore(c,l.firstChild)}return c}({id:"lumagl-canvas",width:r,height:i,onError:o}),t}var v=n(169),g=n(132),b=n(160);function p(e){return e.luma=e.luma||{},e.luma}function m(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).debug;return null===e?null:void 0===t||t?function(e){if(null===e)return null;if(!b.a.WebGLDebug)return c.g.warn('WebGL debug mode not activated. import "luma.gl/debug" to enable.')(),e;var t=p(e);if(t.realContext)return e;if(t.debugContext)return t.debugContext;var n=b.a.WebGLDebug.makeDebugContext(e,_,O);return Object.assign(function e(){Object(g.a)(this,e)}.prototype,n),t.debugContext=n,n.debug=!0,n.gl=e,c.g.info("debug context actived."),n}(e):function(e){if(null===e)return null;var t=p(e);return t.realContext?t.realContext:e}(e)}function y(e,t){var n=b.a.WebGLDebug.glFunctionArgsToString(e,t);return n="".concat(n.slice(0,100)).concat(n.length>100?"...":""),"gl.".concat(e,"(").concat(n,")")}function _(e,t,n){var r=b.a.WebGLDebug.glEnumToString(e),i=b.a.WebGLDebug.glFunctionArgsToString(t,n),a="".concat(r," in gl.").concat(t,"(").concat(i,")");if(c.g.throw)throw new Error(a);c.g.error(a)()}function O(e,t){var n;if(c.g.priority>=4&&(n=y(e,t),c.g.log(4,n)()),c.g.break){n=n||y(e,t);c.g.break&&c.g.break.every(function(e){return-1!==n.indexOf(e)})}var r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){if(void 0===o.value){if(n=n||y(e,t),c.g.throw)throw new Error("Undefined argument: ".concat(n));c.g.error("Undefined argument: ".concat(n))}}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}var E,w=n(140);E={},Object(w.a)(E,33902,{gl1:new Float32Array([1,1])}),Object(w.a)(E,33901,{gl1:new Float32Array([1,1])}),Object(w.a)(E,3379,{gl1:64,gl2:2048}),Object(w.a)(E,34076,{gl1:16}),Object(w.a)(E,34930,{gl1:8}),Object(w.a)(E,35661,{gl1:8}),Object(w.a)(E,35660,{gl1:0}),Object(w.a)(E,34024,{gl1:1}),Object(w.a)(E,36348,{gl1:8}),Object(w.a)(E,34921,{gl1:8}),Object(w.a)(E,36347,{gl1:128}),Object(w.a)(E,36349,{gl1:16}),Object(w.a)(E,3386,{gl1:new Int32Array([0,0])}),Object(w.a)(E,32883,{gl1:0,gl2:256}),Object(w.a)(E,35071,{gl1:0,gl2:256}),Object(w.a)(E,37447,{gl1:0,gl2:0}),Object(w.a)(E,36063,{gl1:0,gl2:4}),Object(w.a)(E,35379,{gl1:0,gl2:0}),Object(w.a)(E,35374,{gl1:0,gl2:0}),Object(w.a)(E,35377,{gl1:0,gl2:0}),Object(w.a)(E,34852,{gl1:0,gl2:4}),Object(w.a)(E,36203,{gl1:0,gl2:0}),Object(w.a)(E,33001,{gl1:0,gl2:0}),Object(w.a)(E,33e3,{gl1:0,gl2:0}),Object(w.a)(E,37157,{gl1:0,gl2:0}),Object(w.a)(E,35373,{gl1:0,gl2:0}),Object(w.a)(E,35657,{gl1:0,gl2:0}),Object(w.a)(E,36183,{gl1:0,gl2:0}),Object(w.a)(E,37137,{gl1:0,gl2:0}),Object(w.a)(E,34045,{gl1:0,gl2:0}),Object(w.a)(E,35978,{gl1:0,gl2:0}),Object(w.a)(E,35979,{gl1:0,gl2:0}),Object(w.a)(E,35968,{gl1:0,gl2:0}),Object(w.a)(E,35376,{gl1:0,gl2:0}),Object(w.a)(E,35375,{gl1:0,gl2:0}),Object(w.a)(E,35659,{gl1:0,gl2:0}),Object(w.a)(E,37154,{gl1:0,gl2:0}),Object(w.a)(E,35371,{gl1:0,gl2:0}),Object(w.a)(E,35658,{gl1:0,gl2:0}),Object(w.a)(E,35076,{gl1:0,gl2:-8,negative:!0}),Object(w.a)(E,35077,{gl1:0,gl2:7}),Object(w.a)(E,35380,{gl1:0,gl2:0});var j=n(133),x=function(e){return e},A=new(function(){function e(){Object(g.a)(this,e),this.pendingQueries=new Set,this.invalidQueryType=null,this.invalidErrorMessage="",this.checkInvalid=function(){return!1}}return Object(j.a)(e,[{key:"poll",value:function(e){this.cancelInvalidQueries(e);var t=!0,n=!1,r=void 0;try{for(var i,a=this.pendingQueries.values()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(o.isResultAvailable()){var s=o.getResult();this.resolveQuery(o,s)}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"setInvalidator",value:function(e){var t=e.queryType,n=e.errorMessage,r=e.checkInvalid;this.invalidQueryType=t,this.invalidErrorMessage=n,this.checkInvalid=r}},{key:"beginQuery",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x;this.cancelInvalidQueries(e.gl),this.cancelQuery(e);var r={};return e.promise=new Promise(function(e,t){r.resolve=e,r.reject=t}),Object.assign(e.promise,r),this.pendingQueries.add(e),e.promise.then(t).catch(n)}},{key:"resolveQuery",value:function(e,t){this.pendingQueries.delete(e),e.promise.resolve(t)}},{key:"rejectQuery",value:function(e,t){this.pendingQueries.delete(e),e.promise&&e.promise.reject(new Error(t))}},{key:"deleteQuery",value:function(e){return this.rejectQuery(e,"Query was deleted before result was available")}},{key:"cancelQuery",value:function(e){return this.rejectQuery(e,"Query was canceled before result was available")}},{key:"invalidateQuery",value:function(e){e instanceof this.invalidQueryType&&this.rejectQuery(e,this.invalidErrorMessage)}},{key:"cancelInvalidQueries",value:function(e){if(this.checkInvalid(e)){var t=!0,n=!1,r=void 0;try{for(var i,a=this.pendingQueries.values()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;this.invalidateQuery(o)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}}}]),e}()),k=n(138),T=32874;function S(e){return Boolean(e&&(e instanceof i.a||e.TEXTURE_BINDING_3D===T))}var P={webgl2:!0,webgl1:!0,throwOnFailure:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function L(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t=Object.assign({},P,t),r=n.canvas,i=n.width,u=n.height,l=n.throwOnError,f=n.manageState,h=n.debug;function g(e){if(l)throw new Error(e);return null}c.c?e=function(e){var t=e.canvas,n=e.opts,r=void 0===n?{}:n,i=e.onError,a=void 0===i?function(e){return null}:i;function o(e){a("WebGL context: ".concat(e.statusMessage||"Unknown error"))}t.addEventListener("webglcontextcreationerror",o,!1);var s=r.webgl1,u=void 0===s||s,c=r.webgl2,l=void 0===c||c,f=null;return l&&(f=(f=f||t.getContext("webgl2",r))||t.getContext("experimental-webgl2",r)),u&&(f=(f=f||t.getContext("webgl",r))||t.getContext("experimental-webgl",r)),t.removeEventListener("webglcontextcreationerror",o,!1),f||a("Failed to create ".concat(l&&!u?"WebGL2":"WebGL"," context"))}({canvas:d({canvas:r,width:i,height:u,onError:g}),opts:t}):e=function(e){var t=e.width,n=e.height,r=e.opts,i=e.onError,u=r.webgl1;if(r.webgl2&&!u)return i("headless-gl does not support WebGL2");if(!a.d)return i(o);var c=Object(a.d)(t,n,r);return c||i(s)}({width:i,height:u,opts:t,onError:g});return e?(f&&Object(v.a)(e,{copyState:!1,log:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.g.log.apply(c.g,[1].concat(t))()}}),c.c&&h&&(e=m(e,{debug:h}),c.g.priority=Math.max(c.g.priority,1)),function(e){var t=S(e)?"WebGL2":"WebGL1",n=function(e){return function(e){var t=e.getParameter(7936),n=e.getParameter(7937),r=e.getExtension("WEBGL_debug_renderer_info");return{vendor:r&&e.getParameter(r.UNMASKED_VENDOR_WEBGL||7936)||t,renderer:r&&e.getParameter(r.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:t,rendererMasked:n,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}(e)}(e),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=e.debug?" debug":"";c.g.once(0,"".concat(t).concat(i," context ").concat(r))()}(e),e):null}var F=n(141),I={VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:["WEBGL_color_buffer_float","EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:[!1,"EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},R={};Object.keys(I).forEach(function(e){R[e]=e});function M(e,t){var n=I[t];Object(k.a)(n,t);var r=Object(i.n)(e)&&n[1]||n[0],a="string"==typeof r?Boolean(e.getExtension(r)):r;return Object(k.a)(!1===a||!0===a),a}function N(e,t){return(t=Array.isArray(t)?t:[t]).every(function(t){return M(e,t)})}var B=n(147),D=n(135),C=n(134),U=n(136),G=n(146),W="Shader: GLSL source code must be a JavaScript string",V=35632,z=35633,H=function(e){function t(e,n){var r;Object(g.a)(this,t),Object(i.e)(e),Object(k.a)("string"==typeof n.source,W);var a=Object(i.k)(n.source,null)||n.id||Object(c.i)("unnamed ".concat(t.getTypeName(n.shaderType)));return(r=Object(D.a)(this,Object(C.a)(t).call(this,e,{id:a}))).shaderType=n.shaderType,r.source=n.source,r.initialize(n),r}return Object(U.a)(t,e),Object(j.a)(t,null,[{key:"getTypeName",value:function(e){switch(e){case z:return"vertex-shader";case V:return"fragment-shader";default:return Object(k.a)(!1),"unknown"}}}]),Object(j.a)(t,[{key:"initialize",value:function(e){var t=e.source,n=Object(i.k)(t,null);n&&(this.id=Object(c.i)(n)),this._compile(t)}},{key:"getParameter",value:function(e){return this.gl.getShaderParameter(this.handle,e)}},{key:"toString",value:function(){return"".concat(this.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function(){return Object(i.k)(this.source)||"unnamed-shader"}},{key:"getSource",value:function(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function(){var e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}},{key:"_compile",value:function(){if(this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){var e=this.gl.getShaderInfoLog(this.handle),t=Object(i.o)(e,this.source,this.shaderType,this.id),n=t.shaderName,r=t.errors,a=t.warnings;throw c.g.error("GLSL compilation errors in ".concat(n,"\n").concat(r))(),c.g.warn("GLSL compilation warnings in ".concat(n,"\n").concat(a))(),new Error("GLSL compilation errors in ".concat(n))}}},{key:"_deleteHandle",value:function(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function(){return{type:this.getParameter(35663),source:this.getSource()}}}]),t}(G.a),X=function(e){function t(e,n){return Object(g.a)(this,t),"string"==typeof n&&(c.g.deprecated("new FragmentShader(gl, source)","new FragmentShader(gl, {source})","6.1"),n={source:n}),Object(D.a)(this,Object(C.a)(t).call(this,e,Object.assign({},n,{shaderType:z})))}return Object(U.a)(t,e),Object(j.a)(t,[{key:"_createHandle",value:function(){return this.gl.createShader(z)}}]),t}(H),q=function(e){function t(e,n){return Object(g.a)(this,t),"string"==typeof n&&(c.g.deprecated("new FragmentShader(gl, source)","new FragmentShader(gl, {source})","6.1"),n={source:n}),Object(D.a)(this,Object(C.a)(t).call(this,e,Object.assign({},n,{shaderType:V})))}return Object(U.a)(t,e),Object(j.a)(t,[{key:"_createHandle",value:function(){return this.gl.createShader(V)}}]),t}(H);function Q(e,t,n){return(Q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(C.a)(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}var K,Y=n(144),$=n(161),J=n(150),Z=n(155),ee="EXT_color_buffer_float",te=(K={},Object(w.a)(K,33189,{}),Object(w.a)(K,33190,{gl2:!0}),Object(w.a)(K,36012,{gl2:!0}),Object(w.a)(K,36168,{}),Object(w.a)(K,34041,{}),Object(w.a)(K,35056,{gl2:!0}),Object(w.a)(K,36013,{gl2:!0}),Object(w.a)(K,32854,{}),Object(w.a)(K,36194,{}),Object(w.a)(K,32855,{}),Object(w.a)(K,33321,{gl2:!0}),Object(w.a)(K,33330,{gl2:!0}),Object(w.a)(K,33329,{gl2:!0}),Object(w.a)(K,33332,{gl2:!0}),Object(w.a)(K,33331,{gl2:!0}),Object(w.a)(K,33334,{gl2:!0}),Object(w.a)(K,33333,{gl2:!0}),Object(w.a)(K,33323,{gl2:!0}),Object(w.a)(K,33336,{gl2:!0}),Object(w.a)(K,33335,{gl2:!0}),Object(w.a)(K,33338,{gl2:!0}),Object(w.a)(K,33337,{gl2:!0}),Object(w.a)(K,33340,{gl2:!0}),Object(w.a)(K,33339,{gl2:!0}),Object(w.a)(K,32849,{gl2:!0}),Object(w.a)(K,32856,{gl2:!0}),Object(w.a)(K,32857,{gl2:!0}),Object(w.a)(K,36220,{gl2:!0}),Object(w.a)(K,36238,{gl2:!0}),Object(w.a)(K,36975,{gl2:!0}),Object(w.a)(K,36214,{gl2:!0}),Object(w.a)(K,36232,{gl2:!0}),Object(w.a)(K,36226,{gl2:!0}),Object(w.a)(K,36208,{gl2:!0}),Object(w.a)(K,33325,{gl2:ee}),Object(w.a)(K,33327,{gl2:ee}),Object(w.a)(K,34842,{gl2:ee}),Object(w.a)(K,33326,{gl2:ee}),Object(w.a)(K,33328,{gl2:ee}),Object(w.a)(K,34836,{gl2:ee}),Object(w.a)(K,35898,{gl2:ee}),K);var ne=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(g.a)(this,t),(n=Object(D.a)(this,Object(C.a)(t).call(this,e,r))).initialize(r),Object.seal(Object(Y.a)(Object(Y.a)(n))),n}return Object(U.a)(t,e),Object(j.a)(t,null,[{key:"isSupported",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).format;return!t||function(e,t,n){var r=n[t];if(!r)return!1;var a=Object(i.n)(e)&&r.gl2||r.gl1;return"string"==typeof a?e.getExtension(a):a}(e,t,te)}},{key:"getSamplesForFormat",value:function(e,t){var n=t.format;return e.getInternalformatParameter(36161,n,32937)}}]),Object(j.a)(t,[{key:"initialize",value:function(e){var t=e.format,n=e.width,r=void 0===n?1:n,a=e.height,o=void 0===a?1:a,s=e.samples,u=void 0===s?0:s;return Object(k.a)(t,"Needs format"),this.gl.bindRenderbuffer(36161,this.handle),0!==u&&Object(i.n)(this.gl)?this.gl.renderbufferStorageMultisample(36161,u,t,r,o):this.gl.renderbufferStorage(36161,t,r,o),this.format=t,this.width=r,this.height=o,this.samples=u,this}},{key:"resize",value:function(e){var t=e.width,n=e.height;return t!==this.width||n!==this.height?this.initialize({width:t,height:n,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteRenderbuffer(this.handle)}},{key:"_bindHandle",value:function(e){this.gl.bindRenderbuffer(36161,e)}},{key:"_syncHandle",value:function(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}]),t}(G.a),re=256,ie=1024,ae=16384,oe=6144,se=6145,ue=6146,ce=34041,le="clear: bad arguments";function fe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.framebuffer,r=void 0===n?null:n,i=t.color,a=void 0===i?null:i,o=t.depth,s=void 0===o?null:o,u=t.stencil,c=void 0===u?null:u,l={};r&&(l.framebuffer=r);var f=0;a&&(f|=ae,!0!==a&&(l.clearColor=a)),s&&(f|=re,!0!==s&&(l.clearDepth=s)),c&&(f|=ie,!0!==s&&(l.clearStencil=s)),Object(k.a)(0!==f,le),Object(F.c)(e,l,function(){e.clear(f)})}var he=n(153);function de(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Object(k.a)(!1),0}}var ve=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(g.a)(this,t),(n=Object(D.a)(this,Object(C.a)(t).call(this,e,r))).width=null,n.height=null,n.attachments={},n.readBuffer=36064,n.drawBuffers=[36064],n.initialize(r),Object.seal(Object(Y.a)(Object(Y.a)(n))),n}return Object(U.a)(t,e),Object(j.a)(t,[{key:"MAX_COLOR_ATTACHMENTS",get:function(){return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS)}}],[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.colorBufferFloat,r=t.colorBufferHalfFloat;return n&&e.getExtension(Object(i.n)(e)?"EXT_color_buffer_float":"WEBGL.color_buffer_float"),r&&e.getExtension(Object(i.n)(e)?"EXT_color_buffer_float":"EXT_color_buffer_half_float")}},{key:"getDefaultFramebuffer",value:function(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new t(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}}]),Object(j.a)(t,[{key:"initialize",value:function(e){var t=e.width,n=void 0===t?1:t,r=e.height,i=void 0===r?1:r,a=e.attachments,o=void 0===a?null:a,s=e.color,u=void 0===s||s,c=e.depth,l=void 0===c||c,f=e.stencil,h=void 0!==f&&f,d=e.check,v=void 0===d||d,g=e.readBuffer,b=e.drawBuffers;if(Object(k.a)(n>=0&&i>=0,"Width and height need to be integers"),this.width=n,this.height=i,o)for(var p in o){var m=o[p];(Array.isArray(m)?m[0]:m).resize({width:n,height:i})}else o=this._createDefaultAttachments({color:u,depth:l,stencil:h,width:n,height:i});this.update({clearAttachments:!0,attachments:o,readBuffer:g,drawBuffers:b}),o&&v&&this.checkStatus()}},{key:"update",value:function(e){var t=e.attachments,n=void 0===t?{}:t,r=e.readBuffer,i=e.drawBuffers,a=e.clearAttachments,o=void 0!==a&&a;this.attach(n,{clearAttachments:o});var s=this.gl,u=s.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),s.bindFramebuffer(36160,u||null),this}},{key:"resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,n=e.height;if(null===this.handle)return Object(k.a)(void 0===t&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(var r in void 0===t&&(t=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),t!==this.width&&n!==this.height&&c.g.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(t,"x").concat(n)),this.attachments)this.attachments[r].resize({width:t,height:n});return this.width=t,this.height=n,this}},{key:"attach",value:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clearAttachments,r={};void 0!==n&&n&&Object.keys(this.attachments).forEach(function(e){r[e]=null}),Object.assign(r,e);var i=this.gl.bindFramebuffer(36160,this.handle);for(var a in r){Object(k.a)(void 0!==a,"Misspelled framebuffer binding point?");var o=Number(a),s=r[o],u=s;if(u)if(u instanceof ne)this._attachRenderbuffer({attachment:o,renderbuffer:u});else if(Array.isArray(s)){var c=Object(J.a)(s,3),l=c[0],f=c[1],h=void 0===f?0:f,d=c[2],v=void 0===d?0:d;u=l,this._attachTexture({attachment:o,texture:l,layer:h,level:v})}else this._attachTexture({attachment:o,texture:u,layer:0,level:0});else this._unattach({attachment:o});u&&u.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,i||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(function(e){return!t.attachments[e]}).forEach(function(e){delete t.attachments[e]})}},{key:"checkStatus",value:function(){var e=this.gl,t=e.bindFramebuffer(36160,this.handle),n=e.checkFramebufferStatus(36160);if(e.bindFramebuffer(36160,t||null),36053!==n)throw new Error(function(e){return(ve.STATUS||{})[e]||"Framebuffer error ".concat(e)}(n));return this}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,n=e.depth,r=e.stencil,a=e.drawBuffers,o=void 0===a?[]:a,s=this.gl.bindFramebuffer(36160,this.handle);return(t||n||r)&&fe(this.gl,{color:t,depth:n,stencil:r}),o.forEach(function(e,t){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.framebuffer,r=void 0===n?null:n,a=t.buffer,o=void 0===a?oe:a,s=t.drawBuffer,u=void 0===s?0:s,c=t.value,l=void 0===c?[0,0,0,0]:c;Object(i.d)(e),Object(F.c)(e,{framebuffer:r},function(){switch(o){case oe:switch(l.constructor){case Int32Array:e.clearBufferiv(o,u,l);break;case Uint32Array:e.clearBufferuiv(o,u,l);break;case Float32Array:default:e.clearBufferfv(o,u,l)}break;case se:e.clearBufferfv(se,0,[l]);break;case ue:e.clearBufferiv(ue,0,[l]);break;case ce:var t=Object(J.a)(l,2),n=t[0],r=t[1];e.clearBufferfi(ce,0,n,r);break;default:Object(k.a)(!1,le)}})}({drawBuffer:t,value:e})}),this.gl.bindFramebuffer(36160,s||null),this}},{key:"readPixels",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.x,n=void 0===t?0:t,r=e.y,i=void 0===r?0:r,a=e.width,o=void 0===a?this.width:a,s=e.height,u=void 0===s?this.height:s,c=e.format,l=void 0===c?6408:c,f=e.type,h=e.pixelArray,d=void 0===h?null:h,v=e.attachment,g=void 0===v?36064:v;this.gl;if(36064===g&&null===this.handle&&(g=1028),Object(k.a)(this.attachments[g]),f=f||this.attachments[g].type,!d){f=f||5121;var b=Object(he.c)(f,{clamped:!1}),p=de(l);d=d||new b(o*u*p)}f=f||Object(he.b)(d);var m=this.gl.bindFramebuffer(36160,this.handle);return this.gl.readPixels(n,i,o,u,l,f,d),this.gl.bindFramebuffer(36160,m||null),d}},{key:"readPixelsToBuffer",value:function(e){var t=e.x,n=void 0===t?0:t,r=e.y,a=void 0===r?0:r,o=e.width,s=void 0===o?this.width:o,u=e.height,c=void 0===u?this.height:u,l=e.format,f=void 0===l?6408:l,h=e.type,d=e.buffer,v=void 0===d?null:d,g=e.byteOffset,b=void 0===g?0:g,p=this.gl;if(Object(i.d)(p),h=h||(v?v.type:5121),!v){var m=de(f),y=function(e){switch(e){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return Object(k.a)(!1),0}}(h),_=b+s*c*m*y;v=new B.a(p,{bytes:_,type:h,size:m})}return v.bind({target:35051}),Object(F.c)(p,{framebuffer:this},function(){p.readPixels(n,a,s,c,f,h,b)}),v.unbind({target:35051}),v}},{key:"copyToDataUrl",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.attachment,n=void 0===t?36064:t,r=e.maxHeight,a=void 0===r?Number.MAX_SAFE_INTEGER:r,o=this.readPixels({attachment:n}),s=this.width,u=this.height;u>a;){var c=Object(i.q)({data:o,width:s,height:u});o=c.data,s=c.width,u=c.height}Object(i.h)({data:o,width:s,height:u});var l=document.createElement("canvas");l.width=s,l.height=u;var f=l.getContext("2d"),h=f.createImageData(s,u);return h.data.set(o),f.putImageData(h,0,0),l.toDataURL()}},{key:"copyToImage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.image,n=void 0===t?null:t,r=e.attachment,i=void 0===r?36064:r,a=e.maxHeight,o=(void 0===a&&Number.MAX_SAFE_INTEGER,this.readDataUrl({attachment:i}));return(n=n||new Image).src=o,n}},{key:"copyToTexture",value:function(e){var t=e.texture,n=e.target,r=e.xoffset,i=void 0===r?0:r,a=e.yoffset,o=void 0===a?0:a,s=e.zoffset,u=void 0===s?0:s,c=e.mipmapLevel,l=void 0===c?0:c,f=e.attachment,h=void 0===f?36064:f,d=e.x,v=void 0===d?0:d,g=e.y,b=void 0===g?0:g,p=e.width,m=e.height,y=this.gl,_=y.bindFramebuffer(36160,this.handle),O=y.readBuffer(h);switch(p=Number.isFinite(p)?p:t.width,m=Number.isFinite(m)?m:t.height,t.target){case 3553:case 34067:y.copyTexSubImage2D(n||t.target,l,i,o,v,b,p,m);break;case 35866:case 32879:y.copyTexSubImage3D(n||t.target,l,i,o,u,v,b,p,m)}return y.readBuffer(O),y.bindFramebuffer(36160,_||null),t}},{key:"blit",value:function(e){var t=e.srcFramebuffer,n=e.attachment,r=void 0===n?36064:n,a=e.srcX0,o=void 0===a?0:a,s=e.srcY0,u=void 0===s?0:s,c=e.srcX1,l=e.srcY1,f=e.dstX0,h=void 0===f?0:f,d=e.dstY0,v=void 0===d?0:d,g=e.dstX1,b=e.dstY1,p=e.color,m=void 0===p||p,y=e.depth,_=void 0!==y&&y,O=e.stencil,E=void 0!==O&&O,w=e.mask,j=void 0===w?0:w,x=e.filter,A=void 0===x?9728:x,T=this.gl;Object(i.d)(T),t.handle||36064!==r||(r=1028),m&&(j|=16384),_&&(j|=256),E&&(j|=1024),Object(k.a)(j),c=void 0===c?t.width:c,l=void 0===l?t.height:l,g=void 0===g?this.width:g,b=void 0===b?this.height:b;var S=T.bindFramebuffer(36009,this.handle),P=T.bindFramebuffer(36008,t.handle);return T.readBuffer(r),T.blitFramebuffer(o,u,c,l,h,v,g,b,j,A),T.readBuffer(this.readBuffer),T.bindFramebuffer(36008,P||null),T.bindFramebuffer(36009,S||null),this}},{key:"invalidate",value:function(e){var t=e.attachments,n=void 0===t?[]:t,r=e.x,a=void 0===r?0:r,o=e.y,s=void 0===o?0:o,u=e.width,c=e.height,l=this.gl;Object(i.d)(l);var f=l.bindFramebuffer(36008,this.handle);return 0===a&&0===s&&void 0===u&&void 0===c?l.invalidateFramebuffer(36008,n):l.invalidateFramebuffer(36008,n,a,s,u,c),l.bindFramebuffer(36008,f),this}},{key:"getAttachmentParameter",value:function(e,t,n){var i=this._getAttachmentParameterFallback(t);return null===i&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),n&&i>1e3&&(i=Object(r.c)(this.gl,i)),i}},{key:"getAttachmentParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],i={},a=!0,o=!1,s=void 0;try{for(var u,c=n[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;i[t?Object(r.c)(this.gl,l):l]=this.getAttachmentParameter(e,l,t)}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return i}},{key:"getParameters",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object.keys(this.attachments),n={},i=0;i<t.length;i++){var a=t[i],o=Number(a);n[e?Object(r.c)(this.gl,o):o]=this.getAttachmentParameters(o,e)}return n}},{key:"show",value:function(){return"undefined"!=typeof window&&window.open(this.copyToDataUrl(),"luma-debug-texture"),this}},{key:"log",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>c.g.priority||"undefined"==typeof window)return this;t=t||"Framebuffer ".concat(this.id);var n=this.copyToDataUrl({maxHeight:100});return c.g.image({priority:e,message:t,image:n},t)(),this}},{key:"bind",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target,t=void 0===e?36160:e;return this.gl.bindFramebuffer(t,this.handle),this}},{key:"unbind",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target,t=void 0===e?36160:e;return this.gl.bindFramebuffer(t,null),this}},{key:"_createDefaultAttachments",value:function(e){var t,n=e.color,r=e.depth,i=e.stencil,a=e.width,o=e.height,s=null;n&&((s=s||{})[36064]=new Z.a(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:a,height:o,mipmaps:!1,parameters:(t={},Object(w.a)(t,10241,9728),Object(w.a)(t,10240,9728),Object(w.a)(t,10242,33071),Object(w.a)(t,10243,33071),t)}));return r&&i?(s=s||{})[33306]=new ne(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:a,height:111}):r?(s=s||{})[36096]=new ne(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:a,height:o}):i&&Object(k.a)(!1),s}},{key:"_unattach",value:function(e){var t=e.attachment;this.gl.bindRenderbuffer(36161,this.handle),this.gl.framebufferRenderbuffer(36160,t,36161,null),delete this.attachments[t]}},{key:"_attachRenderbuffer",value:function(e){var t=e.attachment,n=void 0===t?36064:t,r=e.renderbuffer;this.gl.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}},{key:"_attachTexture",value:function(e){var t=e.attachment,n=void 0===t?36064:t,r=e.texture,i=e.layer,a=e.level,o=this.gl;switch(o.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:o.framebufferTextureLayer(36160,n,r.target,a,i);break;case 34067:var s=function(e){return e<34069?e+34069:e}(i);o.framebufferTexture2D(36160,n,s,r.handle,a);break;case 3553:o.framebufferTexture2D(36160,n,3553,r.handle,a);break;default:Object(k.a)(!1,"Illegal texture type")}o.bindTexture(r.target,null),this.attachments[n]=r}},{key:"_setReadBuffer",value:function(e,t){Object(i.n)(e)?e.readBuffer(t):Object(k.a)(36064===t||1029===t,"Multiple render targets not supported"),this.readBuffer=t}},{key:"_setDrawBuffers",value:function(e,t){if(Object(i.n)(e))e.drawBuffers(t);else{var n=e.getExtension("WEBGL.draw_buffers");n?n.drawBuffersWEBGL(t):Object(k.a)(1===t.length&&(36064===t[0]||1029===t[0]),"Multiple render targets not supported")}this.drawBuffers=t}},{key:"_getAttachmentParameterFallback",value:function(e){var t=function(e){if(e.luma=e.luma||{},!e.luma.caps)for(var t in e.luma.caps={},e.luma.caps.webgl2=Object(i.n)(e),I)e.luma.caps[t]=M(e,t);return e.luma.caps}(this.gl);switch(e){case 36052:return t.webgl2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.webgl2?null:8;case 33297:return t.webgl2?null:5125;case 33296:return t.webgl2||t.EXT_sRGB?null:9729;default:return null}}},{key:"_createHandle",value:function(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function(e){return this.gl.bindFramebuffer(36160,e)}},{key:"color",get:function(){return this.attachments[36064]||null}},{key:"texture",get:function(){return this.attachments[36064]||null}},{key:"depth",get:function(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function(){return this.attachments[36128]||this.attachments[33306]||null}}]),t}(G.a);ve.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];var ge,be=function(e){function t(e,n){var r;return Object(g.a)(this,t),Object(i.d)(e),r=Object(D.a)(this,Object(C.a)(t).call(this,e,n)),Object.seal(Object(Y.a)(Object(Y.a)(r))),r}return Object(U.a)(t,e),Object(j.a)(t,null,[{key:"isSupported",value:function(e){return Object(i.n)(e)}}]),Object(j.a)(t,[{key:"bind",value:function(e){return this.gl.bindSampler(e,this.handle),this}},{key:"unbind",value:function(e){return this.gl.bindSampler(e,null),this}},{key:"_createHandle",value:function(){return this.gl.createSampler()}},{key:"_deleteHandle",value:function(){this.gl.deleteSampler(this.handle)}},{key:"_getParameter",value:function(e){return this.gl.getSamplerParameter(this.handle,e)}},{key:"_setParameter",value:function(e,t){switch(e){case 33082:case 33083:this.gl.samplerParameterf(this.handle,e,t);break;default:this.gl.samplerParameteri(this.handle,e,t)}return this}}]),t}(G.a),pe=(ge={},Object(w.a)(ge,5126,function(e,t,n){return e.uniform1fv(t,we(n,1))}),Object(w.a)(ge,35664,function(e,t,n){return e.uniform2fv(t,we(n,2))}),Object(w.a)(ge,35665,function(e,t,n){return e.uniform3fv(t,we(n,3))}),Object(w.a)(ge,35666,function(e,t,n){return e.uniform4fv(t,we(n,4))}),Object(w.a)(ge,5124,function(e,t,n){return e.uniform1iv(t,je(n,1))}),Object(w.a)(ge,35667,function(e,t,n){return e.uniform2iv(t,je(n,2))}),Object(w.a)(ge,35668,function(e,t,n){return e.uniform3iv(t,je(n,3))}),Object(w.a)(ge,35669,function(e,t,n){return e.uniform4iv(t,je(n,4))}),Object(w.a)(ge,35670,function(e,t,n){return e.uniform1iv(t,je(n,1))}),Object(w.a)(ge,35671,function(e,t,n){return e.uniform2iv(t,je(n,2))}),Object(w.a)(ge,35672,function(e,t,n){return e.uniform3iv(t,je(n,3))}),Object(w.a)(ge,35673,function(e,t,n){return e.uniform4iv(t,je(n,4))}),Object(w.a)(ge,35674,function(e,t,n){return e.uniformMatrix2fv(t,!1,we(n,4))}),Object(w.a)(ge,35675,function(e,t,n){return e.uniformMatrix3fv(t,!1,we(n,9))}),Object(w.a)(ge,35676,function(e,t,n){return e.uniformMatrix4fv(t,!1,we(n,16))}),Object(w.a)(ge,35678,function(e,t,n){return e.uniform1i(t,n)}),Object(w.a)(ge,35680,function(e,t,n){return e.uniform1i(t,n)}),Object(w.a)(ge,5125,function(e,t,n){return e.uniform1uiv(t,xe(n,1))}),Object(w.a)(ge,36294,function(e,t,n){return e.uniform2uiv(t,xe(n,2))}),Object(w.a)(ge,36295,function(e,t,n){return e.uniform3uiv(t,xe(n,3))}),Object(w.a)(ge,36296,function(e,t,n){return e.uniform4uiv(t,xe(n,4))}),Object(w.a)(ge,35685,function(e,t,n){return e.uniformMatrix2x3fv(t,!1,we(n,6))}),Object(w.a)(ge,35686,function(e,t,n){return e.uniformMatrix2x4fv(t,!1,we(n,8))}),Object(w.a)(ge,35687,function(e,t,n){return e.uniformMatrix3x2fv(t,!1,we(n,6))}),Object(w.a)(ge,35688,function(e,t,n){return e.uniformMatrix3x4fv(t,!1,we(n,12))}),Object(w.a)(ge,35689,function(e,t,n){return e.uniformMatrix4x2fv(t,!1,we(n,8))}),Object(w.a)(ge,35690,function(e,t,n){return e.uniformMatrix4x3fv(t,!1,we(n,12))}),Object(w.a)(ge,35679,function(e,t,n){return e.uniform1i(t,n)}),Object(w.a)(ge,35682,function(e,t,n){return e.uniform1i(t,n)}),Object(w.a)(ge,36289,function(e,t,n){return e.uniform1i(t,n)}),Object(w.a)(ge,36292,function(e,t,n){return e.uniform1i(t,n)}),Object(w.a)(ge,36293,function(e,t,n){return e.uniform1i(t,n)}),Object(w.a)(ge,36298,function(e,t,n){return e.uniform1i(t,n)}),Object(w.a)(ge,36299,function(e,t,n){return e.uniform1i(t,n)}),Object(w.a)(ge,36300,function(e,t,n){return e.uniform1i(t,n)}),Object(w.a)(ge,36303,function(e,t,n){return e.uniform1i(t,n)}),Object(w.a)(ge,36306,function(e,t,n){return e.uniform1i(t,n)}),Object(w.a)(ge,36307,function(e,t,n){return e.uniform1i(t,n)}),Object(w.a)(ge,36308,function(e,t,n){return e.uniform1i(t,n)}),Object(w.a)(ge,36311,function(e,t,n){return e.uniform1i(t,n)}),ge),me={},ye={},_e={},Oe=[0];function Ee(e,t,n,r){1===t&&"boolean"==typeof e&&(e=e?1:0),Number.isFinite(e)&&(Oe[0]=e,e=Oe);var i=e.length;if(i%t&&c.g.warn("Uniform size should be multiples of ".concat(t),e)(),e instanceof n)return e;var a=r[i];a||(a=new n(i),r[i]=a);for(var o=0;o<i;o++)a[o]=e[o];return a}function we(e,t){return Ee(e,t,Float32Array,me)}function je(e,t){return Ee(e,t,Int32Array,ye)}function xe(e,t){return Ee(e,t,Uint32Array,_e)}function Ae(e){var t=e.match(/([^\[]*)(\[[0-9]+\])?/);if(!t||t.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:t[1],length:t[2]||1,isArray:Boolean(t[2])}}function ke(e,t,n){var r=pe[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r.bind(null,e,t)}function Te(e){return Array.isArray(e)||ArrayBuffer.isView(e)?function(e){if(0===e.length)return!1;for(var t=Math.min(e.length,16),n=0;n<t;++n)if(!Number.isFinite(e[n]))return!1;return!0}(e):!!isFinite(e)||(!0===e||!1===e||(e instanceof $.a||e instanceof be||(e instanceof ne||e instanceof ve&&Boolean(e.texture))))}function Se(e,t){if(Array.isArray(e)||ArrayBuffer.isView(e)){if(!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}return e===t}var Pe,Le=n(167),Fe=5120,Ie=5121,Re=5122,Me=5123,Ne=0,Be=1,De=2,Ce=3,Ue=4,Ge=5,We=6,Ve=5126,ze=(Pe={},Object(w.a)(Pe,Ve,[Ve,1,"float"]),Object(w.a)(Pe,35664,[Ve,2,"vec2"]),Object(w.a)(Pe,35665,[Ve,3,"vec3"]),Object(w.a)(Pe,35666,[Ve,4,"vec4"]),Object(w.a)(Pe,5124,[5124,1,"int"]),Object(w.a)(Pe,35667,[5124,2,"ivec2"]),Object(w.a)(Pe,35668,[5124,3,"ivec3"]),Object(w.a)(Pe,35669,[5124,4,"ivec4"]),Object(w.a)(Pe,5125,[5125,1,"uint"]),Object(w.a)(Pe,36294,[5125,2,"uvec2"]),Object(w.a)(Pe,36295,[5125,3,"uvec3"]),Object(w.a)(Pe,36296,[5125,4,"uvec4"]),Object(w.a)(Pe,35670,[Ve,1,"bool"]),Object(w.a)(Pe,35671,[Ve,2,"bvec2"]),Object(w.a)(Pe,35672,[Ve,3,"bvec3"]),Object(w.a)(Pe,35673,[Ve,4,"bvec4"]),Object(w.a)(Pe,35674,[Ve,8,"mat2"]),Object(w.a)(Pe,35685,[Ve,8,"mat2x3"]),Object(w.a)(Pe,35686,[Ve,8,"mat2x4"]),Object(w.a)(Pe,35675,[Ve,12,"mat3"]),Object(w.a)(Pe,35687,[Ve,12,"mat3x2"]),Object(w.a)(Pe,35688,[Ve,12,"mat3x4"]),Object(w.a)(Pe,35676,[Ve,16,"mat4"]),Object(w.a)(Pe,35689,[Ve,16,"mat4x2"]),Object(w.a)(Pe,35690,[Ve,16,"mat4x3"]),Pe);function He(e){switch(e){case Ne:return Ne;case Be:case Ce:case De:return Be;case Ue:case Ge:case We:return Ue;default:return Object(k.a)(!1),0}}function Xe(e){var t=ze[e];if(!t)return null;var n=Object(J.a)(t,2);return{type:n[0],components:n[1]}}function qe(e,t){switch(e){case Fe:case Ie:case Re:case Me:e=Ve}for(var n in ze){var r=Object(J.a)(ze[n],3),i=r[0],a=r[1],o=r[2];if(i===e&&a===t)return{glType:n,name:o}}return null}var Qe=function(){function e(t){Object(g.a)(this,e),this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}return Object(j.a)(e,[{key:"getAttributeInfo",value:function(e){var t=Number(e);return Number.isFinite(t)?this.attributeInfos[t]:this.attributeInfosByName[e]||null}},{key:"getAttributeLocation",value:function(e){var t=this.getAttributeInfo(e);return t?t.location:-1}},{key:"getAttributeAccessor",value:function(e){var t=this.getAttributeInfo(e);return t?t.accessor:null}},{key:"getVaryingInfo",value:function(e){var t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}},{key:"getVaryingIndex",value:function(e){var t=this.getVaryingInfo();return t?t.location:-1}},{key:"getVaryingAccessor",value:function(e){var t=this.getVaryingInfo();return t?t.accessor:null}},{key:"_readAttributesFromProgram",value:function(e){for(var t=e.gl,n=t.getProgramParameter(e.handle,35721),r=0;r<n;r++){var i=t.getActiveAttrib(e.handle,r),a=i.name,o=i.type,s=i.size,u=t.getAttribLocation(e.handle,a);u>=0&&this._addAttribute(u,a,o,s)}this.attributeInfos.sort(function(e,t){return e.location-t.location})}},{key:"_readVaryingsFromProgram",value:function(e){var t=e.gl;if(Object(i.n)(t)){for(var n=t.getProgramParameter(e.handle,35971),r=0;r<n;r++){var a=t.getTransformFeedbackVarying(e.handle,r),o=a.name,s=a.type,u=a.size;this._addVarying(r,o,s,u)}this.varyingInfos.sort(function(e,t){return e.location-t.location})}}},{key:"_addAttribute",value:function(e,t,n,r){var i=Xe(n),a={type:i.type,size:r*i.components};this._inferProperties(e,t,a);var o={location:e,name:t,accessor:new Le.a(a)};this.attributeInfos.push(o),this.attributeInfosByName[o.name]=o}},{key:"_inferProperties",value:function(e,t,n){/instance/i.test(t)&&(n.divisor=1)}},{key:"_addVarying",value:function(e,t,n,r){var i=Xe(n),a=i.type,o=i.components,s={location:e,name:t,accessor:new Le.a({type:a,size:r*o})};this.varyingInfos.push(s),this.varyingInfosByName[s.name]=s}}]),e}(),Ke=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(g.a)(this,t),(n=Object(D.a)(this,Object(C.a)(t).call(this,e,r))).stubRemovedMethods("Program","v6.0",["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"]),n._isCached=!1,n.initialize(r),Object.seal(Object(Y.a)(Object(Y.a)(n))),n._setId(r.id),n}return Object(U.a)(t,e),Object(j.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.vs,n=e.fs,r=e.varyings,a=e.bufferMode,o=void 0===a?35981:a;return this.vs="string"==typeof t?new X(this.gl,{id:"".concat(e.id,"-vs"),source:t}):t,this.fs="string"==typeof n?new q(this.gl,{id:"".concat(e.id,"-fs"),source:n}):n,Object(k.a)(this.vs instanceof X),Object(k.a)(this.fs instanceof q),this.uniforms={},this.samplers={},r&&(Object(i.d)(this.gl),this.varyings=r,this.gl.transformFeedbackVaryings(this.handle,r,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Qe(this),this.setProps(e)}},{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:Q(Object(C.a)(t.prototype),"delete",this).call(this,e)}},{key:"setProps",value:function(e){return"uniforms"in e&&this.setUniforms(e.uniforms,e.samplers),this}},{key:"draw",value:function(e){var t=this,n=e.logPriority,a=e.drawMode,o=void 0===a?4:a,s=e.vertexCount,u=e.offset,l=void 0===u?0:u,f=e.start,h=e.end,d=e.isIndexed,v=void 0!==d&&d,g=e.indexType,b=void 0===g?5123:g,p=e.isInstanced,m=void 0!==p&&p,y=e.instanceCount,_=void 0===y?0:y,O=e.vertexArray,E=void 0===O?null:O,w=e.transformFeedback,j=e.framebuffer,x=e.parameters,A=void 0===x?{}:x,T=e.uniforms,S=void 0===T?{}:T,P=e.samplers,L=void 0===P?{}:P;if(void 0!==n){var I=j?j.id:"default",R="mode=".concat(Object(r.a)(this.gl,o)," verts=").concat(s," ")+"instances=".concat(_," indexType=").concat(Object(r.a)(this.gl,b)," ")+"isInstanced=".concat(m," isIndexed=").concat(v," ")+"Framebuffer=".concat(I);c.g.log(n,R)()}return this.gl.useProgram(this.handle),Object(k.a)(E),E.bindForDraw(s,_,function(){if(S&&(c.g.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)"),t.setUniforms(S,L)),t._bindTextures(),void 0!==j&&(A=Object.assign({},A,{framebuffer:j})),w){var e=He(o);w.begin(e)}Object(F.c)(t.gl,A,function(){v&&m?t.gl.drawElementsInstanced(o,s,b,l,_):v&&Object(i.n)(t.gl)&&!isNaN(f)&&!isNaN(h)?t.gl.drawRangeElements(o,f,h,s,b,l):v?t.gl.drawElements(o,s,b,l):m?t.gl.drawArraysInstanced(o,l,s,_):t.gl.drawArrays(o,l,s)}),w&&w.end()}),this}},{key:"setSamplers",value:function(e){Object.assign(this.samplers,e)}},{key:"setUniforms",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=!1,a={};for(var o in t)Se(this.uniforms[o],t[o])||(i=!0,a[o]=t[o],this.uniforms[o]=(e=t[o],Array.isArray(e)||ArrayBuffer.isView(e)?e.slice():e));return i&&(r(),function(e,t,n){for(var r in e){var i=e[r];if((!n||Boolean(n[r]))&&!Te(i))throw t=t?"".concat(t," "):"",console.error("".concat(t," Bad uniform ").concat(r),i),new Error("".concat(t," Bad uniform ").concat(r))}}(a,this.id,this._uniformSetters),Object.assign(this.samplers,n),this._setUniforms(a)),this}},{key:"_bindTextures",value:function(){for(var e in this.uniforms){var t=this._uniformSetters[e];if(t&&void 0!==t.textureIndex){var n=this.uniforms[e],r=this.samplers[e];n instanceof ve&&(n=n.texture),n instanceof $.a&&n.bind(t.textureIndex),r&&r.bind(t.textureIndex)}}}},{key:"_setUniforms",value:function(e){for(var t in this.gl.useProgram(this.handle),e){var n=e[t],r=this._uniformSetters[t];if(r)if(n instanceof ve&&(n=n.texture),n instanceof $.a){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);var i=n,a=r.textureIndex;i.bind(a),r(a)}else r(n)}return this}},{key:"_createHandle",value:function(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function(){this.gl.deleteProgram(this.handle)}},{key:"_getOptionsFromHandle",value:function(e){var t=this.gl.getAttachedShaders(e),n={},r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new X({handle:u});break;case 35632:n.fs=new q({handle:u})}}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}},{key:"_getParameter",value:function(e){return this.gl.getProgramParameter(this.handle,e)}},{key:"_setId",value:function(e){if(!e){var t=this._getName();this.id=Object(c.i)(t)}}},{key:"_getName",value:function(){var e=this.vs.getName()||this.fs.getName();return e=(e=e.replace(/shader/i,""))?"".concat(e,"-program"):"program"}},{key:"_compileAndLink",value:function(){var e=this.gl;if((e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),c.g.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),c.g.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||c.g.priority>0)&&(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35714)))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)))}},{key:"_readUniformLocationsFromLinkedProgram",value:function(){var e=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(var t=0;t<this._uniformCount;t++){var n=this.gl.getActiveUniform(this.handle,t),r=Ae(n.name),i=r.name,a=(r.isArray,e.getUniformLocation(this.handle,i));this._uniformSetters[i]=ke(e,a,n)}this._textureIndexCounter=0}},{key:"reset",value:function(){}},{key:"getActiveUniforms",value:function(e,t){return this.gl.getActiveUniforms(this.handle,e,t)}},{key:"getUniformBlockIndex",value:function(e){return this.gl.getUniformBlockIndex(this.handle,e)}},{key:"getActiveUniformBlockParameter",value:function(e,t){return this.gl.getActiveUniformBlockParameter(this.handle,e,t)}},{key:"uniformBlockBinding",value:function(e,t){this.gl.uniformBlockBinding(this.handle,e,t)}}]),t}(G.a),Ye=(n(164),G.a,function(e){return e}),$e=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(g.a)(this,t),n=Object(D.a)(this,Object(C.a)(t).call(this,e,r));var i=r.onComplete,a=void 0===i?Ye:i,o=r.onError,s=void 0===o?Ye:o;return n.target=null,n.onComplete=a,n.onError=s,n.promise=null,Object.seal(Object(Y.a)(Object(Y.a)(n))),n}return Object(U.a)(t,e),Object(j.a)(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(i.n)(e),r=N(e,R.TIMER_QUERY),a=n||r,o=!0,s=!1,u=void 0;try{for(var c,l=t[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){switch(c.value){case"queries":a=a&&n;break;case"timers":a=a&&r;break;case"timestamps":var f=r?e.getQuery(36392,34916):0;a=a&&f>0;break;default:Object(k.a)(!1)}}}catch(e){s=!0,u=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}return a}}]),Object(j.a)(t,[{key:"beginTimeElapsedQuery",value:function(){return this.begin(35007)}},{key:"beginOcclusionQuery",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).conservative,t=void 0!==e&&e;return this.begin(t?36202:35887)}},{key:"beginTransformFeedbackQuery",value:function(){return this.begin(35976)}},{key:"getTimestamp",value:function(){A.beginQuery(this,this.onComplete,this.onError);try{this.gl.queryCounter(this.handle,36392)}catch(e){A.rejectQuery(this,'Timer queries require "EXT_disjoint_timer_query" extension')}return this}},{key:"begin",value:function(e){A.beginQuery(this,this.onComplete,this.onError),this.target=e;try{this.gl.beginQuery(this.target,this.handle)}catch(e){A.rejectQuery(this,"Query not supported")}return this}},{key:"end",value:function(){return this.target&&(this.gl.endQuery(this.target),this.target=null),this}},{key:"cancel",value:function(){return this.end(),A.cancelQuery(this),this}},{key:"isResultAvailable",value:function(){return this.gl.getQueryParameter(this.handle,34919)}},{key:"getResult",value:function(){var e=this.gl.getQueryParameter(this.handle,34918);return Number.isFinite(e)?e/1e6:0}},{key:"_createHandle",value:function(){return t.isSupported(this.gl)?this.gl.createQuery():null}},{key:"_deleteHandle",value:function(){A.deleteQuery(this),this.gl.deleteQuery(this.handle)}}],[{key:"poll",value:function(e){A.poll(e)}}]),t}(G.a);A.setInvalidator({queryType:$e,errorMessage:"Disjoint GPU operation invalidated timer queries",checkInvalid:function(e){return e.getParameter(36795)}});n(173),$.a;var Je=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(g.a)(this,t),Object(i.d)(e),(n=Object(D.a)(this,Object(C.a)(t).call(this,e,r))).initialize(r),n.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(Object(Y.a)(Object(Y.a)(n))),n}return Object(U.a)(t,e),Object(j.a)(t,null,[{key:"isSupported",value:function(e){return Object(i.n)(e)}}]),Object(j.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Object(c.d)(this.buffers)||this.bind(function(){return e._unbindBuffers()}),this.setProps(t),this}},{key:"setProps",value:function(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}},{key:"setBuffers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(function(){for(var n in t)e.setBuffer(n,t[n])}),this}},{key:"setBuffer",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=this._getVaryingIndex(e);return a<0?(this.unused[e]=t,c.g.warn(function(){return"".concat(r.id," unused varying buffer ").concat(e)})(),this):(this.buffers[a]=t,this.bindOnUse||this._bindBuffer(a,t,n,i),this)}},{key:"begin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}},{key:"end",value:function(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}},{key:"_getVaryingInfo",value:function(e){return this.configuration&&this.configuration.getVaryingInfo(e)}},{key:"_getVaryingIndex",value:function(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;var t=Number(e);return Number.isFinite(t)?t:-1}},{key:"_bindBuffers",value:function(){if(this.bindOnUse)for(var e in this.buffers)this._bindBuffer(e,this.buffers[e])}},{key:"_unbindBuffers",value:function(){if(this.bindOnUse)for(var e in this.buffers)this._bindBuffer(e,null)}},{key:"_bindBuffer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=t&&t.handle;return i&&void 0!==r?this.gl.bindBufferRange(35982,e,i,n,r):this.gl.bindBufferBase(35982,e,i),this}},{key:"_createHandle",value:function(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function(){this.gl.deleteTransformFeedback(this.handle)}},{key:"_bindHandle",value:function(e){this.gl.bindTransformFeedback(36386,this.handle)}}]),t}(G.a),Ze=null;function et(e,t){var n;return new e((n=e.BYTES_PER_ELEMENT*t,(!Ze||Ze.byteLength<n)&&(Ze=new ArrayBuffer(n)),Ze),0,t)}var tt=n(151),nt=n(181),rt=n(182);var it=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(g.a)(this,t);var i=r.id||r.program&&r.program.id;return(n=Object(D.a)(this,Object(C.a)(t).call(this,e,Object.assign({},r,{id:i})))).hasVertexArrays=t.isSupported(e),n.buffer=null,n.bufferValue=null,n.initialize(r),Object.seal(Object(Y.a)(Object(Y.a)(n))),n}return Object(U.a)(t,e),Object(j.a)(t,null,[{key:"isSupported",value:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero?Object(i.n)(e)||"Chrome"===function(e){if(!e&&!Object(nt.a)())return"Node";if(Object(rt.a)(e))return"Electron";var t="undefined"!=typeof navigator?navigator:{},n=e||t.userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";var r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i?"IE":tt.b.chrome?"Chrome":tt.b.safari?"Safari":tt.b.mozInnerScreenX?"Firefox":"Unknown"}():Object(i.n)(e)||e.getExtension("OES_vertex_array_object")}},{key:"getDefaultArray",value:function(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new t(e,{handle:null})),e.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function(e){return t.MAX_ATTRIBUTES=t.MAX_ATTRIBUTES||e.getParameter(34921),t.MAX_ATTRIBUTES}},{key:"setConstant",value:function(e,n,r){switch(r.constructor){case Float32Array:t._setConstantFloatArray(e,n,r);break;case Int32Array:t._setConstantIntArray(e,n,r);break;case Uint32Array:t._setConstantUintArray(e,n,r);break;default:Object(c.a)(!1)}}}]),Object(j.a)(t,[{key:"delete",value:function(){Q(Object(C.a)(t.prototype),"delete",this).call(this),this.buffer&&this.buffer.delete()}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(e)}},{key:"setProps",value:function(e){return this}},{key:"setElementBuffer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(c.a)(!t||34963===t.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(function(){e.gl.bindBuffer(34963,t?t.handle:null)}),this}},{key:"setBuffer",value:function(e,t,n){if(34963===t.target)return this.setElementBuffer(t,n);var r=n.size,a=n.type,o=n.stride,s=n.offset,u=n.normalized,l=n.integer,f=n.divisor,h=this.gl;return e=Number(e),this.bind(function(){h.bindBuffer(34962,t.handle),l?(Object(c.a)(Object(i.n)(h)),h.vertexAttribIPointer(e,r,a,o,s)):h.vertexAttribPointer(e,r,a,u,o,s),h.enableVertexAttribArray(e),h.vertexAttribDivisor(e,f||0)}),this}},{key:"enable",value:function(e){var n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!r&&0===e&&!t.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(function(){return r?n.gl.enableVertexAttribArray(e):n.gl.disableVertexAttribArray(e)})),this}},{key:"getConstantBuffer",value:function(e,t,n){var r=this._normalizeConstantArrayValue(t,n),i=r.byteLength*e,a=r.length*e,o=!this.buffer;if(this.buffer=this.buffer||new B.a(this.gl,i),o=(o=o||this.buffer.setByteLength(i))||!this._compareConstantArrayValues(r,this.bufferValue)){var s=et(t.constructor,a);!function(e){for(var t=e.target,n=e.source,r=e.start,i=void 0===r?0:r,a=e.count,o=void 0===a?1:a,s=n.length,u=o*s,c=0,l=i;c<s;c++)t[l++]=n[c];for(;c<u;)c<u-c?(t.copyWithin(i+c,i,i+c),c*=2):(t.copyWithin(i+c,i,i+u-c),c=u)}({target:s,source:r,start:0,count:a}),this.buffer.subData(s),this.bufferValue=t}return this.buffer}},{key:"_normalizeConstantArrayValue",value:function(e,t){return Array.isArray(e)?new Float32Array(e):e}},{key:"_compareConstantArrayValues",value:function(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}},{key:"_createHandle",value:function(){return this.hasVertexArrays=t.isSupported(this.gl),this.hasVertexArrays?this.gl.createVertexArray():null}},{key:"_deleteHandle",value:function(e){return this.hasVertexArrays&&this.gl.deleteVertexArray(e),[this.elements]}},{key:"_bindHandle",value:function(e){this.hasVertexArrays&&this.gl.bindVertexArray(e)}},{key:"_getParameter",value:function(e,t){var n=this,r=t.location;return Object(c.a)(Number.isFinite(r)),this.bind(function(){switch(e){case 34373:return n.gl.getVertexAttribOffset(r,e);default:return n.gl.getVertexAttrib(r,e)}})}},{key:"MAX_ATTRIBUTES",get:function(){return t.getMaxAttributes(this.gl)}}],[{key:"_setConstantFloatArray",value:function(e,t,n){switch(n.length){case 1:e.vertexAttrib1fv(t,n);break;case 2:e.vertexAttrib2fv(t,n);break;case 3:e.vertexAttrib3fv(t,n);break;case 4:e.vertexAttrib4fv(t,n);break;default:Object(c.a)(!1)}}},{key:"_setConstantIntArray",value:function(e,t,n){switch(Object(c.a)(Object(i.n)(e)),n.length){case 1:e.vertexAttribI1iv(t,n);break;case 2:e.vertexAttribI2iv(t,n);break;case 3:e.vertexAttribI3iv(t,n);break;case 4:e.vertexAttribI4iv(t,n);break;default:Object(c.a)(!1)}}},{key:"_setConstantUintArray",value:function(e,t,n){switch(Object(c.a)(Object(i.n)(e)),n.length){case 1:e.vertexAttribI1uiv(t,n);break;case 2:e.vertexAttribI2uiv(t,n);break;case 3:e.vertexAttribI3uiv(t,n);break;case 4:e.vertexAttribI4uiv(t,n);break;default:Object(c.a)(!1)}}}]),t}(G.a),at=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(g.a)(this,e);var r=n.id||n.program&&n.program.id;this.id=r,this.gl=t,this.configuration=null,this.elements=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.vertexArrayObject=it.isSupported(t)?new it(t):it.getDefaultArray(t),Object(c.h)(this,"VertexArray","v6.0",["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"]),this.initialize(n),Object.seal(this)}return Object(j.a)(e,[{key:"delete",value:function(){this.buffer&&this.buffer.delete()}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}},{key:"reset",value:function(){this.elements=null;var e=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}},{key:"setProps",value:function(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}},{key:"clearDrawParams",value:function(){this.drawParams=null}},{key:"getDrawParams",value:function(e){return this.drawParams=this.drawParams||this._updateDrawParams(),Object.assign({},this.drawParams,e)}},{key:"setAttributes",value:function(e){var t=this;return this.vertexArrayObject.bind(function(){for(var n in e){var r=e[n];if(r instanceof B.a)t.setBuffer(n,r);else if(Array.isArray(r)&&r.length&&r[0]instanceof B.a){var i=r[0],a=r[1];t.setBuffer(n,i,a)}else{if(!ArrayBuffer.isView(r)&&!Array.isArray(r))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");t.setConstant(n,r)}}t.gl.bindBuffer(34962,null)}),this}},{key:"setElementBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setElementBuffer(e,t),this}},{key:"setBuffer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===t.target)return this.setElementBuffer(t);var r=this._resolveLocationAndAccessor(e,t,t.accessor,n),i=r.location,a=r.accessor;return i>=0&&(this.values[i]=t,this.accessors[i]=a,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setBuffer(i,t,a)),this}},{key:"setConstant",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this._resolveLocationAndAccessor(e,t,n),i=r.location,a=r.accessor;return i>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t,a),this.values[i]=t,this.accessors[i]=a,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.enable(i,!1)),this}},{key:"unbindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind(function(){e.elements&&e.setElementBuffer(null),e.buffer=e.buffer||new B.a(e.gl,{size:4});for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++)e.values[t]instanceof B.a&&(e.gl.disableVertexAttribArray(t),e.gl.bindBuffer(34962,e.buffer.handle),e.gl.vertexAttribPointer(t,1,5126,!1,0,0))}),this}},{key:"bindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind(function(){e.elements&&e.setElementBuffer(e.elements);for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++){var n=e.values[t];n instanceof B.a&&e.setBuffer(t,n)}}),this}},{key:"bindForDraw",value:function(e,t,n){var r,i=this;return this.vertexArrayObject.bind(function(){i._setConstantAttributes(e,t),i.vertexArrayObject.hasVertexArrays||i.bindBuffers(),r=n(),i.vertexArrayObject.hasVertexArrays||i.unbindBuffers()}),r}},{key:"_resolveLocationAndAccessor",value:function(e,t,n,r){var i=this,a=this._getAttributeIndex(e);if(!Number.isFinite(a)||a<0)return this.unused[e]=t,c.g.once(3,function(){return"unused value ".concat(e," in ").concat(i.id)})(),this;var o=this._getAttributeInfo(e),s=Le.a.resolve(o.accessor,n,r),u=s.size,l=s.type;return Object(c.a)(Number.isFinite(u)&&Number.isFinite(l)),{location:a,accessor:s}}},{key:"_getAttributeInfo",value:function(e){return this.configuration&&this.configuration.getAttributeInfo(e)}},{key:"_getAttributeIndex",value:function(e){if(this.configuration)return this.configuration.getAttributeLocation(e);var t=Number(e);return Number.isFinite(t)?t:-1}},{key:"_setConstantAttributes",value:function(e,t){var n=Math.max(0|e,0|t),r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,n);for(var i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)r=this.values[i],ArrayBuffer.isView(r)&&this._setConstantAttribute(i,r)}},{key:"_setConstantAttributeZero",value:function(e,t){if(it.isSupported(this.gl,{constantAttributeZero:!0}))this._setConstantAttribute(0,e);else{var n=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}}},{key:"_setConstantAttribute",value:function(e,t){it.setConstant(this.gl,e,t),this.vertexArrayObject.isDefault&&this.vertexArrayObject.enable(e,!1)}},{key:"_updateDrawParams",value:function(){for(var e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elements.accessor.type),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}},{key:"_updateDrawParamsForLocation",value:function(e,t){var n=this.values[t],r=this.accessors[t];if(n){var i=r.divisor>0;if(e.isInstanced=e.isInstanced||i,n instanceof B.a){var a=n;if(i){var o=a.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,o)}else{var s=a.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,s)}}}}},{key:"setElements",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c.g.deprecated("setElements","setElementBuffer"),this.setElementBuffer(e,t)}}]),e}(),ot=n(223),st=n(265),ut=function(){function e(t){var n=t.id;t.display;Object(g.a)(this,e),this.id=n||Object(c.i)(this.constructor.name),this.display=!0,this.position=new ot.a,this.rotation=new ot.a,this.scale=new ot.a(1,1,1),this.matrix=new st.a,this.userData={}}return Object(j.a)(e,[{key:"toString",value:function(){return"{id: ".concat(this.id,", children: ").concat(this.children,")}")}},{key:"setPosition",value:function(e){return Object(k.a)(3===e.length,"setPosition requires vector argument"),this.position=e,this}},{key:"setRotation",value:function(e){return Object(k.a)(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}},{key:"setScale",value:function(e){return Object(k.a)(3===e.length,"setScale requires vector argument"),this.scale=e,this}},{key:"setMatrixComponents",value:function(e){var t=e.position,n=e.rotation,r=e.scale,i=e.update,a=void 0===i||i;return t&&this.setPosition(t),n&&this.setRotation(n),r&&this.setScale(r),a&&this.updateMatrix(),this}},{key:"updateMatrix",value:function(){var e=this.position,t=this.rotation,n=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(t),this.matrix.scale(n),this}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.position,n=e.rotation,r=e.scale;return t&&this.setPosition(t),n&&this.setRotation(n),r&&this.setScale(r),this.updateMatrix(),this}},{key:"getCoordinateUniforms",value:function(e,t){Object(k.a)(e),t=t||this.matrix;var n=new st.a(e).multiplyRight(t),r=n.invert(),i=r.transpose();return{viewMatrix:e,modelMatrix:t,objectMatrix:t,worldMatrix:n,worldInverseMatrix:r,worldInverseTransposeMatrix:i}}},{key:"transform",value:function(){if(this.parent){var e=this.parent;this.endPosition.set(this.position.add(e.endPosition)),this.endRotation.set(this.rotation.add(e.endRotation)),this.endScale.set(this.scale.add(e.endScale))}else this.endPosition.set(this.position),this.endRotation.set(this.rotation),this.endScale.set(this.scale);for(var t=this.children,n=0;n<t.length;++n)t[n].transform();return this}}]),e}(),ct=(n(166),function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(g.a)(this,e);var r=n.id,i=void 0===r?Object(c.i)("attribute"):r,a=n.type,o=n.isIndexed,s=void 0!==o&&o;this.gl=t,this.id=i,this.isIndexed=s,this.target=s?34963:34962,this.type=a,this.value=null,this.externalBuffer=null,this.buffer=null,this.userData={},this.update(n),Object.seal(this),this._validateAttributeDefinition()}return Object(j.a)(e,[{key:"delete",value:function(){this.buffer&&(this.buffer.delete(),this.buffer=null)}},{key:"update",value:function(e){var t=e.value,n=e.buffer,r=e.constant,i=void 0===r?this.constant||!1:r;this.constant=i,n?(this.externalBuffer=n,this.constant=!1,this.type=n.accessor.type,void 0!==n.accessor.divisor&&(this.divisor=n.accessor.divisor)):t&&(this.externalBuffer=null,this.value=t,i||(this.buffer=this.buffer||new B.a(this.gl,Object.assign({},e,{id:this.id,target:this.target,type:this.type})),this.buffer.setData({data:t}),this.type=this.buffer.accessor.type)),this._setAccessor(e)}},{key:"getBuffer",value:function(){return this.constant?null:this.externalBuffer||this.buffer}},{key:"getValue",value:function(){if(this.constant)return this.value;var e=this.externalBuffer||this.buffer;return e?[e,this]:null}},{key:"_setAccessor",value:function(e){var t=e.size,n=void 0===t?this.size:t,r=e.offset,i=void 0===r?this.offset||0:r,a=e.stride,o=void 0===a?this.stride||0:a,s=e.normalized,u=void 0===s?this.normalized||!1:s,l=e.integer,f=void 0===l?this.integer||!1:l,h=e.divisor,d=void 0===h?this.divisor||0:h,v=e.instanced,g=e.isInstanced;this.size=n,this.offset=i,this.stride=o,this.normalized=u,this.integer=f,this.divisor=d,void 0!==g&&(c.g.deprecated("Attribute.isInstanced"),this.divisor=g?1:0),void 0!==v&&(c.g.deprecated("Attribute.instanced"),this.divisor=v?1:0)}},{key:"_validateAttributeDefinition",value:function(){}}]),e}()),lt={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};function ft(e){var t="string"==typeof e?lt[e]||lt.TRIANGLES:e;return Object(k.a)(t>=0&&t<=lt.TRIANGLE_FAN,"Illegal drawMode"),t}var ht=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.a)(this,e);var n=t.id,r=t.drawMode,i=void 0===r?lt.TRIANGLES:r,a=t.vertexCount,o=void 0===a?void 0:a,s=t.attributes;this.id=n||Object(c.i)(this.constructor.name),this.drawMode=ft(i),this.vertexCount=o,this.attributes={},this.needsRedraw=!0,this.userData={},Object.seal(this),s&&this.setAttributes(s)}return Object(j.a)(e,[{key:"setNeedsRedraw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=e,this}},{key:"getNeedsRedraw",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,t=void 0!==e&&e,n=!1;return n=n||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!t,n}},{key:"setVertexCount",value:function(e){this.vertexCount=e}},{key:"getVertexCount",value:function(){return void 0!==this.vertexCount?this.vertexCount:this.attributes.indices?this.attributes.indices.value.length:this.attributes.vertices?this.attributes.vertices.value.length/3:!!this.attributes.positions&&this.attributes.positions.value.length/3}},{key:"hasAttribute",value:function(e){return Boolean(this.attributes[e])}},{key:"getAttribute",value:function(e){var t=this.attributes[e];return Object(k.a)(t),t.value}},{key:"getArray",value:function(e){var t=this.attributes[e];return Object(k.a)(t),t.value}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(e){for(var t in e){var n=e[t];n=ArrayBuffer.isView(n)?{value:n}:n,Object(k.a)(ArrayBuffer.isView(n.value),"".concat(this._print(t),": must be typed array or object with value as typed array")),this._autoDetectAttribute(t,n),this.attributes[t]=n}return this.setNeedsRedraw(),this}},{key:"_autoDetectAttribute",value:function(e,t){var n;switch(e){case"indices":n=n||"indices";break;case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2;break;case"indices":t.size=t.size||1,t.isIndexed=void 0===t.isIndexed||t.isIndexed,Object(k.a)(t.value instanceof Uint16Array||t.value instanceof Uint32Array,'attribute array for "indices" must be of integer type')}Object(k.a)(t.size,"attribute ".concat(e," needs size"))}},{key:"_print",value:function(e){return"Geometry ".concat(this.id," attribute ").concat(e)}}]),e}(),dt="#define SHADER_NAME luma_modular_vertex\n\n// object attributes\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec4 colors;\nattribute vec2 texCoords;\nattribute vec3 pickingColors;\n\nvoid main(void) {\n\n  // Set up position\n#ifdef MODULE_GEOMETRY\n  geometry_setPosition(positions);\n  geometry_setNormal(normals);\n#endif\n\n#ifdef MODULE_PROJECT\n  project_setPositionAndNormal_Model(positions, normals);\n  gl_Position = project_model_to_clipspace(positions);\n#endif\n\n  // Set up depth\n#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n\n#ifdef MODULE_DIFFUSE\n  diffuse_setTextureCoordinate(texCoords);\n#endif\n\n  // Set up color calculations\n#ifdef MODULE_MATERIAL\n  material_setDiffuseColor(colors);\n  material_setDiffuseTextureCoordinates(texCoords);\n#endif\n\n#ifdef MODULE_LIGHTING\n  lighting_setPositionAndNormal(positions, normals);\n  lighting_apply_light(positions);\n  lighting_apply_reflection(positions);\n#endif\n\n#ifdef MODULE_PICKING\n  picking_setPickingColor(pickingColors);\n#endif\n\n}\n",vt="#define SHADER_NAME luma-modular-fragment\n\nprecision highp float;\n\n// varyings\nvarying vec4 vColor;\n\nvoid main(){\n  gl_FragColor = vec4(1., 0., 1., 1.);\n\n#ifdef MODULE_DIFFUSE\n  gl_FragColor = diffuse_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth(gl_Position);\n#endif\n}\n",gt="vs",bt="fs";function pt(e,t,n){switch(t){case 300:return n?function(e){return e.replace(/attribute\s+/g,"in ").replace(/varying\s+/g,"out ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(+/g,"texture(")}(e):function(e){return e.replace(/varying\s+/g,"in ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(/g,"texture(")}(e);case 100:return n?function(e){return e.replace(/^in\s+/gm,"attribute ").replace(/^out\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}(e):function(e){return e.replace(/^in\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}(e);default:throw new Error("unknown GLSL version ".concat(t))}}function mt(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}var yt=function(){function e(t){var n=t.name,r=t.vs,i=t.fs,a=t.dependencies,o=void 0===a?[]:a,s=t.getUniforms,u=void 0===s?function(){return{}}:s,c=t.deprecations,l=void 0===c?[]:c,f=t.vertexShader,h=t.fragmentShader;Object(g.a)(this,e),mt("string"==typeof n),this.name=n,this.vs=r||f,this.fs=i||h,this.getModuleUniforms=u,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(l)}return Object(j.a)(e,[{key:"getModuleSource",value:function(e,t){var n;switch(e){case"vs":n=pt(this.vs||"",t,!0);break;case"fs":n=pt(this.fs||"",t,!1);break;default:mt(!1)}return"string"!=typeof n?"":"#define MODULE_".concat(this.name.toUpperCase(),"\n").concat(n,"// END MODULE_").concat(this.name,"\n\n")}},{key:"getUniforms",value:function(e,t){return this.getModuleUniforms(e,t)}},{key:"checkDeprecations",value:function(e,t){this.deprecations.forEach(function(n){n.regex.test(e)&&(n.deprecated&&t?t.deprecated(n.old,n.new)():t&&t.removed(n.old,n.new)())})}},{key:"_parseDeprecationDefinitions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.forEach(function(e){switch(e.type){case"function":e.regex=new RegExp("\\b".concat(e.old,"\\("));break;default:e.regex=new RegExp("".concat(e.type," ").concat(e.old,";"))}}),e}}]),e}(),_t=new(function(){function e(){Object(g.a)(this,e),this.shaderModules={},this.defaultShaderModules=[]}return Object(j.a)(e,[{key:"setDefaultShaderModules",value:function(e){this.defaultShaderModules=this.resolveModules(e)}},{key:"registerShaderModules",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ignoreMultipleRegistrations,n=void 0!==t&&t,r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;this._registerShaderModule(u,n)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"getShaderModule",value:function(e){if(e instanceof yt)return e;if("string"!=typeof e)return this._registerShaderModule(e,!0);var t=this.shaderModules[e];return t||mt(!1,"Unknown shader module ".concat(e)),t}},{key:"resolveModules",value:function(e){var t=this;return e.map(function(e){return t.getShaderModule(e)})}},{key:"_registerShaderModule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e instanceof yt)return e;if(mt(e.name,"shader module has no name"),this.shaderModules[e.name]&&!t)throw new Error("shader module ".concat(e.name," already registered"));return(e=new yt(e)).dependencies=this.resolveModules(e.dependencies),this.shaderModules[e.name]=e,this.shaderModules[e.name]}}]),e}());function Ot(e){var t={},n={};return Et({modules:e,level:0,moduleMap:t,moduleDepth:n}),Object.keys(n).sort(function(e,t){return n[t]-n[e]}).map(function(e){return t[e]})}function Et(e){var t=e.modules,n=e.level,r=e.moduleMap,i=e.moduleDepth;if(n>=5)throw new Error("Possible loop in shader dependency graph");var a=!0,o=!1,s=void 0;try{for(var u,c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;r[l.name]=l,(void 0===i[l.name]||i[l.name]<n)&&(i[l.name]=n)}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}var f=!0,h=!1,d=void 0;try{for(var v,g=t[Symbol.iterator]();!(f=(v=g.next()).done);f=!0){var b=v.value;b.dependencies&&Et({modules:b.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}}catch(e){h=!0,d=e}finally{try{f||null==g.return||g.return()}finally{if(h)throw d}}}var wt=32874,jt=7936,xt=7937,At=7938,kt=35724,Tt={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},St={};Object.keys(Tt).forEach(function(e){St[e]=e});var Pt={};function Lt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Tt[t];if(mt(r,t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="undefined"!=typeof window&&window.navigator||{},n=e.userAgent||t.userAgent||"",r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i}(n))return!0;if(t in Pt)return Pt[t];var i=r[0],a="#extension GL_".concat(i," : enable\nvoid main(void) {}"),o=e.createShader(35633);e.shaderSource(o,a),e.compileShader(o);var s=e.getShaderParameter(o,35713);return e.deleteShader(o),Pt[t]=s,s}function Ft(e,t){var n=Tt[t];mt(n,t);var r=function(e){return Boolean(e&&("undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||32874===wt))}(e)&&n[1]||n[0],i="string"==typeof r?Boolean(e.getExtension(r)):r;return mt(!1===i||!0===i),i}function It(e,t){return(t=Array.isArray(t)?t:[t]).every(function(t){return Ft(e,t)})}function Rt(e){switch(function(e){var t=e.getExtension("WEBGL_debug_renderer_info"),n=e.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||jt),r=e.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||xt);return{gpuVendor:function(e,t){return e.match(/NVIDIA/i)||t.match(/NVIDIA/i)?"NVIDIA":e.match(/INTEL/i)||t.match(/INTEL/i)?"INTEL":e.match(/AMD/i)||t.match(/AMD/i)||e.match(/ATI/i)||t.match(/ATI/i)?"AMD":"UNKNOWN GPU"}(n,r),vendor:n,renderer:r,version:e.getParameter(At),shadingLanguageVersion:e.getParameter(kt)}}(e).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}n(170);var Mt,Nt,Bt=(Mt={},Object(w.a)(Mt,gt,"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n"),Object(w.a)(Mt,bt,"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"),Mt),Dt=/void main\s*\([^\)]*\)\s*\{\n?/,Ct=/}\n?[^{}]*$/;var Ut=(Nt={},Object(w.a)(Nt,gt,"vertex"),Object(w.a)(Nt,bt,"fragment"),Nt),Gt="precision highp float;\n\n";function Wt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.vs,r=t.fs,i=function(e){return e=e.concat(_t.defaultShaderModules),Ot(e=_t.resolveModules(e))}(t.modules||[]);return{gl:e,vs:Vt(e,Object.assign({},t,{source:n,type:gt,modules:i})),fs:Vt(e,Object.assign({},t,{source:r,type:bt,modules:i})),getUniforms:zt(i),modules:Ht(i)}}function Vt(e,t){var n=t.id,r=t.source,i=t.type,a=t.modules,o=void 0===a?[]:a,s=t.defines,u=void 0===s?{}:s,c=t.inject,l=void 0===c?{}:c,f=t.prologue,h=void 0===f||f,d=t.log;mt("string"==typeof r,"shader source must be a string");var v=i===gt,g=r.split("\n"),b=100,p="",m=r;0===g[0].indexOf("#version ")&&(b=300,p=g[0],m=g.slice(1).join("\n"));var y=h?"".concat(p,"\n").concat(function(e){var t=e.id,n=e.source,r=e.type;return t&&"string"==typeof t&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(t,"_").concat(Ut[r],"\n\n"):""}({id:n,source:r,type:i}),"\n").concat(Rt(e),"\n").concat(function(e,t,n){var r="#if (__VERSION__ > 120)\n\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return It(e,St.GLSL_FRAG_DEPTH)&&(r+="// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),It(e,St.GLSL_DERIVATIVES)&&Lt(e,St.GLSL_DERIVATIVES)&&(r+="// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define DERIVATIVES\n#endif\n"),It(e,St.GLSL_FRAG_DATA)&&(r+="// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define DRAW_BUFFERS\n#endif\n"),It(e,St.GLSL_TEXTURE_LOD)&&(r+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n# define TEXTURE_LOD\n#define texture2DLod texture2DLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define textureCubeLod textureCubeLodEXT\n#define texture2DGrad texture2DGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define textureCubeGrad textureCubeGradEXT\n#endif\n"),r}(e),"\n").concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,n="";for(var r in e){0===t&&(n+="\n// APPLICATION DEFINES\n"),t++;var i=e[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(e[r],"\n"))}0===t&&(n+="\n");return n}(u),"\n").concat(v?"":Gt,"\n"):"".concat(p,"\n"),_=!1,O=!0,E=!1,w=void 0;try{for(var j,x=o[Symbol.iterator]();!(O=(j=x.next()).done);O=!0){var A=j.value;switch(A.name){case"inject":_=!0;break;default:A.checkDeprecations(m,d),y+=A.getModuleSource(i,b)}}}catch(e){E=!0,w=e}finally{try{O||null==x.return||x.return()}finally{if(E)throw w}}return y=function(e,t,n,r){var i=t===gt,a=function(t){var r=n[t];switch(t){case"vs:#decl":i&&(e=e.replace(Dt,function(e){return"".concat(r,"\n").concat(e)}));break;case"vs:#main-start":i&&(e=e.replace(Dt,function(e){return e+r}));break;case"vs:#main-end":i&&(e=e.replace(Ct,function(e){return r+e}));break;case"fs:#decl":i||(e=e.replace(Dt,function(e){return"".concat(r,"\n").concat(e)}));break;case"fs:#main-start":i||(e=e.replace(Dt,function(e){return e+r}));break;case"fs:#main-end":i||(e=e.replace(Ct,function(e){return r+e}));break;default:e=e.replace(t,function(e){return e+r})}};for(var o in n)a(o);return r&&(e=e.replace("}s*$",function(e){return e+Bt[t]})),e}(y+=m,i,l,_)}function zt(e){return function(t){var n={},r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value.getUniforms(t,n);Object.assign(n,u)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}function Ht(e){var t,n={},r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,c=(t=u,_t.getShaderModule(t));n[u]=c}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}var Xt="uniform float ONE;\n\n/*\nAbout LUMA_FP64_CODE_ELIMINATION_WORKAROUND\n\nThe purpose of this workaround is to prevent shader compilers from\noptimizing away necessary arithmetic operations by swapping their sequences\nor transform the equation to some 'equivalent' from.\n\nThe method is to multiply an artifical variable, ONE, which will be known to\nthe compiler to be 1 only at runtime. The whole expression is then represented\nas a polynomial with respective to ONE. In the coefficients of all terms, only one a\nand one b should appear\n\nerr = (a + b) * ONE^6 - a * ONE^5 - (a + b) * ONE^4 + a * ONE^3 - b - (a + b) * ONE^2 + a * ONE\n*/\n\n// Divide float number to high and low floats to extend fraction bits\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float a_hi = t * ONE - (t - a);\n  float a_lo = a * ONE - a_hi;\n#else\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n#endif\n  return vec2(a_hi, a_lo);\n}\n\n// Divide float number again when high float uses too many fraction bits\nvec2 split2(vec2 a) {\n  vec2 b = split(a.x);\n  b.y += a.y;\n  return b;\n}\n\n// Special sum operation when a > b\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float sum = (a + b) * ONE;\n  float err = b - (sum - a) * ONE;\n#else\n  float sum = a + b;\n  float err = b - (sum - a);\n#endif\n  return vec2(sum, err);\n}\n\n// General sum operation\nvec2 twoSum(float a, float b) {\n  float s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSub(float a, float b) {\n  float s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\n    a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n#else\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\n  return vec2(prod, err);\n}\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  // y component is for the error\n  prod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  prod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  vec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\n  vec2 yn = a * xn;\n#endif\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  return sum_fp64(split(yn), prod);\n#else\n  return sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n";"".concat(Xt,"\n").concat("const vec2 E_FP64 = vec2(2.7182817459106445e+00, 8.254840366817007e-08);\nconst vec2 LOG2_FP64 = vec2(0.6931471824645996e+00, -1.9046542121259336e-09);\nconst vec2 PI_FP64 = vec2(3.1415927410125732, -8.742278012618954e-8);\nconst vec2 TWO_PI_FP64 = vec2(6.2831854820251465, -1.7484556025237907e-7);\nconst vec2 PI_2_FP64 = vec2(1.5707963705062866, -4.371139006309477e-8);\nconst vec2 PI_4_FP64 = vec2(0.7853981852531433, -2.1855695031547384e-8);\nconst vec2 PI_16_FP64 = vec2(0.19634954631328583, -5.463923757886846e-9);\nconst vec2 PI_16_2_FP64 = vec2(0.39269909262657166, -1.0927847515773692e-8);\nconst vec2 PI_16_3_FP64 = vec2(0.5890486240386963, -1.4906100798128818e-9);\nconst vec2 PI_180_FP64 = vec2(0.01745329238474369, 1.3519960498364902e-10);\n\nconst vec2 SIN_TABLE_0_FP64 = vec2(0.19509032368659973, -1.6704714833615242e-9);\nconst vec2 SIN_TABLE_1_FP64 = vec2(0.3826834261417389, 6.22335089017767e-9);\nconst vec2 SIN_TABLE_2_FP64 = vec2(0.5555702447891235, -1.1769521357507529e-8);\nconst vec2 SIN_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617041793133e-8);\n\nconst vec2 COS_TABLE_0_FP64 = vec2(0.9807852506637573, 2.9739473106360492e-8);\nconst vec2 COS_TABLE_1_FP64 = vec2(0.9238795042037964, 2.8307490351764386e-8);\nconst vec2 COS_TABLE_2_FP64 = vec2(0.8314695954322815, 1.6870263741530778e-8);\nconst vec2 COS_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617152815436e-8);\n\nconst vec2 INVERSE_FACTORIAL_3_FP64 = vec2(1.666666716337204e-01, -4.967053879312289e-09); // 1/3!\nconst vec2 INVERSE_FACTORIAL_4_FP64 = vec2(4.16666679084301e-02, -1.2417634698280722e-09); // 1/4!\nconst vec2 INVERSE_FACTORIAL_5_FP64 = vec2(8.333333767950535e-03, -4.34617203337595e-10); // 1/5!\nconst vec2 INVERSE_FACTORIAL_6_FP64 = vec2(1.3888889225199819e-03, -3.3631094437103215e-11); // 1/6!\nconst vec2 INVERSE_FACTORIAL_7_FP64 = vec2(1.9841270113829523e-04,  -2.725596874933456e-12); // 1/7!\nconst vec2 INVERSE_FACTORIAL_8_FP64 = vec2(2.4801587642286904e-05, -3.406996025904184e-13); // 1/8!\nconst vec2 INVERSE_FACTORIAL_9_FP64 = vec2(2.75573188446287533e-06, 3.7935713937038186e-14); // 1/9!\nconst vec2 INVERSE_FACTORIAL_10_FP64 = vec2(2.755731998149713e-07, -7.575112367869873e-15); // 1/10!\n\nfloat nint(float d) {\n    if (d == floor(d)) return d;\n    return floor(d + 0.5);\n}\n\nvec2 nint_fp64(vec2 a) {\n    float hi = nint(a.x);\n    float lo;\n    vec2 tmp;\n    if (hi == a.x) {\n        lo = nint(a.y);\n        tmp = quickTwoSum(hi, lo);\n    } else {\n        lo = 0.0;\n        if (abs(hi - a.x) == 0.5 && a.y < 0.0) {\n            hi -= 1.0;\n        }\n        tmp = vec2(hi, lo);\n    }\n    return tmp;\n}\n\n/* k_power controls how much range reduction we would like to have\nRange reduction uses the following method:\nassume a = k_power * r + m * log(2), k and m being integers.\nSet k_power = 4 (we can choose other k to trade accuracy with performance.\nwe only need to calculate exp(r) and using exp(a) = 2^m * exp(r)^k_power;\n*/\n\nvec2 exp_fp64(vec2 a) {\n  // We need to make sure these two numbers match\n  // as bit-wise shift is not available in GLSL 1.0\n  const int k_power = 4;\n  const float k = 16.0;\n\n  const float inv_k = 1.0 / k;\n\n  if (a.x <= -88.0) return vec2(0.0, 0.0);\n  if (a.x >= 88.0) return vec2(1.0 / 0.0, 1.0 / 0.0);\n  if (a.x == 0.0 && a.y == 0.0) return vec2(1.0, 0.0);\n  if (a.x == 1.0 && a.y == 0.0) return E_FP64;\n\n  float m = floor(a.x / LOG2_FP64.x + 0.5);\n  vec2 r = sub_fp64(a, mul_fp64(LOG2_FP64, vec2(m, 0.0))) * inv_k;\n  vec2 s, t, p;\n\n  p = mul_fp64(r, r);\n  s = sum_fp64(r, p * 0.5);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_3_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_4_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_5_FP64);\n\n  // s = sum_fp64(s, t);\n  // p = mul_fp64(p, r);\n  // t = mul_fp64(p, INVERSE_FACTORIAL_6_FP64);\n\n  // s = sum_fp64(s, t);\n  // p = mul_fp64(p, r);\n  // t = mul_fp64(p, INVERSE_FACTORIAL_7_FP64);\n\n  s = sum_fp64(s, t);\n\n\n  // At this point, s = exp(r) - 1; but after following 4 recursions, we will get exp(r) ^ 512 - 1.\n  for (int i = 0; i < k_power; i++) {\n    s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  }\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = sum_fp64(s, vec2(ONE, 0.0));\n#else\n  s = sum_fp64(s, vec2(1.0, 0.0));\n#endif\n\n  return s * pow(2.0, m);\n//   return r;\n}\n\nvec2 log_fp64(vec2 a)\n{\n  if (a.x == 1.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x <= 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n  vec2 x = vec2(log(a.x), 0.0);\n  vec2 s;\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = vec2(ONE, 0.0);\n#else\n  s = vec2(1.0, 0.0);\n#endif\n\n  x = sub_fp64(sum_fp64(x, mul_fp64(a, exp_fp64(-x))), s);\n  return x;\n}\n\nvec2 sin_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(0.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  s = a;\n  r = a;\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_3_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_5_FP64);\n  s = sum_fp64(s, t);\n\n  /* keep the following commented code in case we need them\n  for extra accuracy from the Taylor expansion*/\n\n  // r = mul_fp64(r, x);\n  // t = mul_fp64(r, INVERSE_FACTORIAL_7_FP64);\n  // s = sum_fp64(s, t);\n\n  // r = mul_fp64(r, x);\n  // t = mul_fp64(r, INVERSE_FACTORIAL_9_FP64);\n  // s = sum_fp64(s, t);\n\n  return s;\n}\n\nvec2 cos_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(1.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  r = x;\n  s = sum_fp64(vec2(1.0, 0.0), r * 0.5);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_4_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_6_FP64);\n  s = sum_fp64(s, t);\n\n  /* keep the following commented code in case we need them\n  for extra accuracy from the Taylor expansion*/\n\n  // r = mul_fp64(r, x);\n  // t = mul_fp64(r, INVERSE_FACTORIAL_8_FP64);\n  // s = sum_fp64(s, t);\n\n  // r = mul_fp64(r, x);\n  // t = mul_fp64(r, INVERSE_FACTORIAL_10_FP64);\n  // s = sum_fp64(s, t);\n\n  return s;\n}\n\nvoid sincos_taylor_fp64(vec2 a, out vec2 sin_t, out vec2 cos_t) {\n  if (a.x == 0.0 && a.y == 0.0) {\n    sin_t = vec2(0.0, 0.0);\n    cos_t = vec2(1.0, 0.0);\n  }\n\n  sin_t = sin_taylor_fp64(a);\n  cos_t = sqrt_fp64(sub_fp64(vec2(1.0, 0.0), mul_fp64(sin_t, sin_t)));\n}\n\nvec2 sin_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n\n    // 2pi range reduction\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return sin_taylor_fp64(t);\n        } else if (j == 1) {\n            return cos_taylor_fp64(t);\n        } else if (j == -1) {\n            return -cos_taylor_fp64(t);\n        } else {\n            return -sin_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 cos_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(1.0, 0.0);\n    }\n\n    // 2pi range reduction\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return cos_taylor_fp64(t);\n        } else if (j == 1) {\n            return -sin_taylor_fp64(t);\n        } else if (j == -1) {\n            return sin_taylor_fp64(t);\n        } else {\n            return -cos_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 tan_fp64(vec2 a) {\n    vec2 sin_a;\n    vec2 cos_a;\n\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n\n    // 2pi range reduction\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    // We just can't get PI/16 * 3.0 very accurately.\n    // so let's just store it\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n    vec2 sin_t, cos_t;\n    vec2 s, c;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#else\n        if (abs_k == 1) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs_k == 2) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs_k == 3) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs_k == 4) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#endif\n        if (k > 0) {\n            s = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            s = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return div_fp64(sin_a, cos_a);\n}\n\nvec2 radians_fp64(vec2 degree) {\n  return mul_fp64(degree, PI_180_FP64);\n}\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\n// Vector functions\n// vec2 functions\nvoid vec2_sum_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sum_fp64(a[0], b[0]);\n    out_val[1] = sum_fp64(a[1], b[1]);\n}\n\nvoid vec2_sub_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sub_fp64(a[0], b[0]);\n    out_val[1] = sub_fp64(a[1], b[1]);\n}\n\nvoid vec2_mul_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = mul_fp64(a[0], b[0]);\n    out_val[1] = mul_fp64(a[1], b[1]);\n}\n\nvoid vec2_div_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = div_fp64(a[0], b[0]);\n    out_val[1] = div_fp64(a[1], b[1]);\n}\n\nvoid vec2_mix_fp64(vec2 x[2], vec2 y[2], float a, out vec2 out_val[2]) {\n  vec2 range[2];\n  vec2_sub_fp64(y, x, range);\n  vec2 portion[2];\n  portion[0] = range[0] * a;\n  portion[1] = range[1] * a;\n  vec2_sum_fp64(x, portion, out_val);\n}\n\nvec2 vec2_length_fp64(vec2 x[2]) {\n  return sqrt_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])));\n}\n\nvoid vec2_normalize_fp64(vec2 x[2], out vec2 out_val[2]) {\n  vec2 length = vec2_length_fp64(x);\n  vec2 length_vec2[2];\n  length_vec2[0] = length;\n  length_vec2[1] = length;\n\n  vec2_div_fp64(x, length_vec2, out_val);\n}\n\nvec2 vec2_distance_fp64(vec2 x[2], vec2 y[2]) {\n  vec2 diff[2];\n  vec2_sub_fp64(x, y, diff);\n  return vec2_length_fp64(diff);\n}\n\nvec2 vec2_dot_fp64(vec2 a[2], vec2 b[2]) {\n  vec2 v[2];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n\n  return sum_fp64(v[0], v[1]);\n}\n\n// vec3 functions\nvoid vec3_sub_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec3_sum_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvec2 vec3_length_fp64(vec2 x[3]) {\n  return sqrt_fp64(sum_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])),\n    mul_fp64(x[2], x[2])));\n}\n\nvec2 vec3_distance_fp64(vec2 x[3], vec2 y[3]) {\n  vec2 diff[3];\n  vec3_sub_fp64(x, y, diff);\n  return vec3_length_fp64(diff);\n}\n\n// vec4 functions\nvoid vec4_fp64(vec4 a, out vec2 out_val[4]) {\n  out_val[0].x = a[0];\n  out_val[0].y = 0.0;\n\n  out_val[1].x = a[1];\n  out_val[1].y = 0.0;\n\n  out_val[2].x = a[2];\n  out_val[2].y = 0.0;\n\n  out_val[3].x = a[3];\n  out_val[3].y = 0.0;\n}\n\nvoid vec4_scalar_mul_fp64(vec2 a[4], vec2 b, out vec2 out_val[4]) {\n  out_val[0] = mul_fp64(a[0], b);\n  out_val[1] = mul_fp64(a[1], b);\n  out_val[2] = mul_fp64(a[2], b);\n  out_val[3] = mul_fp64(a[3], b);\n}\n\nvoid vec4_sum_fp64(vec2 a[4], vec2 b[4], out vec2 out_val[4]) {\n  for (int i = 0; i < 4; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec4_dot_fp64(vec2 a[4], vec2 b[4], out vec2 out_val) {\n  vec2 v[4];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n  v[2] = mul_fp64(a[2], b[2]);\n  v[3] = mul_fp64(a[3], b[3]);\n\n  out_val = sum_fp64(sum_fp64(v[0], v[1]), sum_fp64(v[2], v[3]));\n}\n\nvoid mat4_vec4_mul_fp64(vec2 b[16], vec2 a[4], out vec2 out_val[4]) {\n  vec2 tmp[4];\n\n  for (int i = 0; i < 4; i++)\n  {\n    for (int j = 0; j < 4; j++)\n    {\n      tmp[j] = b[j + i * 4];\n    }\n    vec4_dot_fp64(a, tmp, out_val[i]);\n  }\n}\n");"".concat(Xt);var qt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Qt={modelMatrix:qt,viewMatrix:qt,projectionMatrix:qt,cameraPositionWorld:[0,0,0]};var Kt="varying vec4 project_vPositionWorld;\nvarying vec3 project_vNormalWorld;\n\nvec4 project_getPosition_World() {\n  return project_vPositionWorld;\n}\n\nvec3 project_getNormal_World() {\n  return project_vNormalWorld;\n}\n",Yt={name:"project",getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt,t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],{});return void 0!==e.modelMatrix&&(t.modelMatrix=e.modelMatrix),void 0!==e.viewMatrix&&(t.viewMatrix=e.viewMatrix),void 0!==e.projectionMatrix&&(t.projectionMatrix=e.projectionMatrix),void 0!==e.cameraPositionWorld&&(t.cameraPositionWorld=e.cameraPositionWorld),void 0===e.projectionMatrix&&void 0===e.viewMatrix||(t.viewProjectionMatrix=new st.a(e.projectionMatrix).multiplyRight(e.viewMatrix)),t},vs:"".concat(Kt,"\n\n// Unprefixed uniforms\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewProjectionMatrix;\nuniform vec3 cameraPositionWorld;\n\nstruct World {\n  vec3 position;\n  vec3 normal;\n};\n\nWorld world;\n\nvoid project_setPosition(vec4 position) {\n  project_vPositionWorld = position;\n}\n\nvoid project_setNormal(vec3 normal) {\n  project_vNormalWorld = normal;\n}\n\nvoid project_setPositionAndNormal_World(vec3 position, vec3 normal) {\n  world.position = position;\n  world.normal = normal;\n}\n\nvoid project_setPositionAndNormal_Model(vec3 position, vec3 normal) {\n  world.position = (modelMatrix * vec4(position, 1.)).xyz;\n  world.normal = mat3(modelMatrix) * normal;\n}\n\nvec4 project_model_to_clipspace(vec4 position) {\n  return viewProjectionMatrix * modelMatrix * position;\n}\n\nvec4 project_model_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * modelMatrix * vec4(position, 1.);\n}\n\nvec4 project_world_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_view_to_clipspace(vec3 position) {\n  return projectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n"),fs:"\n".concat(Kt)};"".concat("  // empty\n","\n").concat("#define LIGHT_MAX 4\n\n/*\n// lighting configuration\nuniform bool enableLights;\nuniform vec3 ambientColor;\nuniform vec3 directionalColor;\nuniform vec3 lightingDirection;\n\n// point lights configuration\nuniform vec3 pointLocation[LIGHT_MAX];\nuniform vec3 pointColor[LIGHT_MAX];\nuniform int numberPoints;\n\n// reflection / refraction configuration\nuniform bool useReflection;\n*/\n\nuniform bool lighting_uEnableLights;\nuniform vec3 lighting_uAmbientColor;\nuniform vec3 lighting_uDirection;\nuniform vec3 lighting_uDirectionalColor;\n\n// point lights configuration\nuniform int  lighting_uPointCount;\nuniform vec3 lighting_uPointLocation[LIGHT_MAX];\nuniform vec3 lighting_uPointColor[LIGHT_MAX];\n\n// reflection / refraction configuration\nuniform bool lighting_uEnableReflections;\n\n// varyings\nvarying vec4 lighting_vPosition;\nvarying vec4 lighting_vNormal;\nvarying vec3 lighting_vColor;\nvarying vec3 lighting_vLightWeighting;\nvarying vec3 lighting_vReflection;\n\nvoid lighting_setPositionAndNormal(vec3 position, vec3 normal) {\n  lighting_vPosition = worldMatrix * vec4(position, 1.);\n  lighting_vNormal = worldInverseTransposeMatrix * vec4(normal, 1.);;\n}\n\nvoid lighting__getLightWeigting() {\n  float directionalLightWeighting = max(dot(lighting_vNormal.xyz, lighting_uDirection), 0.);\n  vec3 pointWeight = vec3(0., 0., 0.);\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec4 mvLightPosition = viewMatrix * vec4(lighting_uPointLocation[i], 1.);\n      vec3 pointLightDirection = normalize(mvLightPosition.xyz - lighting_vPosition.xyz);\n      pointWeight += max(dot(lighting_vNormal.xyz, pointLightDirection), 0.) * pointColor[i];\n     } else {\n       break;\n     }\n   }\n   return ambientColor + (directionalColor * directionalLightWeighting) + pointWeight;\n}\n\nvoid lighting_apply(vec3 position, vec3 normal) {\n  lighting_setPositionAndNormal(position, normal);\n\n  // lighting code\n  if(!lighting_uEnableLights) {\n    lighting_vLightWeighting = vec3(1., 1., 1.);\n  } else {\n    lighting_vLightWeighting = lighting__getLightWeighting();\n  }\n}\n\nvoid lighting_set_reflection(vec3 position) {\n    // refraction / reflection code\n  if (lighting_uEnableReflections) {\n    lighting_vReflection = (viewInverseMatrix[3] - (worldMatrix * vec4(position, 1.))).xyz;\n  } else {\n    lighting_vReflection = vec3(1., 1., 1.);\n  }\n}\n","\n"),"".concat("  // empty\n","\n").concat("precision highp float;\n\n#define LIGHT_MAX 4\n\nvarying vec3 lighting_vLightWeighting;\n\nvec4 lighting_apply(vec4 color) {\n  // set color from texture\n  return vec4(color.rgb * lighting_vLightWeighting, color.a);\n}\n\n// spec-map.fs\n\nuniform mat4 viewMatrix;\n\n\nvarying vec4 lighting_vColor;\nvarying vec4 lighting_vTransformedNormal;\nvarying vec4 lighting_vPosition;\n\nuniform float shininess;\nuniform bool enableSpecularMap;\nuniform bool enableLights;\n\nuniform vec3 ambientColor;\nuniform vec3 directionalColor;\nuniform vec3 lightingDirection;\n\nuniform vec3 lighting_uPointLocation[LIGHT_MAX];\nuniform vec3 lighting_uPointColor[LIGHT_MAX];\nuniform float lighting_uPointSpecularEnable[LIGHT_MAX];\nuniform vec3 lighting_uPointSpecularColor[LIGHT_MAX];\nuniform int numberPoints;\n\n\nvec3 lighting__calculate_light_weighting() {\n\treturn lighting__calculate_light_weighting(shininess);\n}\n\nvec3 lighting__calculate_light_weighting(shininess) {\n  vec3 normal = vTransformedNormal.xyz;\n  vec3 eyeDirection = normalize(-vPosition.xyz);\n\n  vec3 specularLight = vec3(0., 0., 0.);\n  vec3 diffuseLight = vec3(0., 0., 0.);\n\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec3 transformedPointLocation = (viewMatrix * vec4(lighting_uPointLocation[i], 1.0)).xyz;\n      vec3 lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n      if (lighting_uPointSpecularEnable > 0.) {\n        vec3 reflectionDirection = reflect(-lightDirection, normal);\n        float specularLightWeighting =\n          pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininessVal);\n        specularLight += specularLightWeighting * lighting_uPointSpecularColor[i];\n      }\n\n      float diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n      diffuseLight += diffuseLightWeighting * lighting_uPointColor[i];\n    } else {\n      break;\n    }\n  }\n\n  return ambientColor + diffuseLight + specularLight;\n}\n\nvoid lighting_filterColor(fragmentColor) {\n  if (!lighting_enable) {\n  \treturn fragmentColor;\n  } else {\n  \tvec3 lightWeighting = lighting__calculate_light_weighting();\n  \treturn vec4(fragmentColor.rgb * lightWeighting, fragmentColor.a);\n  }\n}\n\n// render-tex.fs\n\nuniform vec3 material_uAmbientColor;\nuniform vec3 material_uDiffuseColor;\nuniform vec3 material_uSpecularColor;\nuniform vec3 material_uEmissiveColor;\n\nuniform bool hasTexture1;\nuniform sampler2D sampler1;\n\nuniform mat4 viewMatrix;\n\nvoid apply_lighting(color) {\n  vec3 ambientLightWeighting = ambientColor;\n\n  vec3 normal = vTransformedNormal.xyz;\n  vec3 eyeDirection = normalize(-vPosition.xyz);\n\n  vec3 specularLight = vec3(0.0, 0.0, 0.0);\n  vec3 diffuseLight = vec3(0.0, 0.0, 0.0);\n\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec3 transformedPointLocation = (viewMatrix * vec4(pointLocation[i], 1.0)).xyz;\n      vec3 lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n      if (enableSpecularHighlights) {\n        vec3 reflectionDirection = reflect(-lightDirection, normal);\n        float specularLightWeighting =\n          pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n        specularLight += specularLightWeighting * pointSpecularColor[i];\n      }\n\n      float diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n      diffuseLight += diffuseLightWeighting * pointColor[i];\n    } else {\n        break;\n    }\n  }\n\n  vec3 matAmbientColor = material_uAmbientColor * color.rgb;\n  vec3 matDiffuseColor = material_uDiffuseColor * color.rgb;\n  vec3 matSpecularColor = material_uSpecularColor * color.rgb;\n  vec3 matEmissiveColor = material_uEmissiveColor * color.rgb;\n  gl_FragColor = vec4(\n    matAmbientColor * ambientLightWeighting\n    + matDiffuseColor * diffuseLightWeighting\n    + matSpecularColor * specularLightWeighting\n    + matEmissiveColor,\n    color.a\n  );\n}\n\n/// frag-lighting\n\n  vec3 lightWeighting;\n  if (!enableLights) {\n    lightWeighting = vec3(1.0, 1.0, 1.0);\n  } else {\n    vec3 lightDirection;\n    float specularLightWeighting = 0.0;\n    float diffuseLightWeighting = 0.0;\n    vec3  specularLight = vec3(0.0, 0.0, 0.0);\n    vec3  diffuseLight = vec3(0.0, 0.0, 0.0);\n\n    vec3 transformedPointLocation;\n    vec3 normal = vTransformedNormal.xyz;\n\n    vec3 eyeDirection = normalize(-vPosition.xyz);\n    vec3 reflectionDirection;\n\n    vec3 pointWeight = vec3(0.0, 0.0, 0.0);\n\n    for (int i = 0; i < LIGHT_MAX; i++) {\n      if (i < numberPoints) {\n        transformedPointLocation = (viewMatrix * vec4(pointLocation[i], 1.0)).xyz;\n        lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n        if (enableSpecular[i] > 0.0) {\n          reflectionDirection = reflect(-lightDirection, normal);\n          specularLightWeighting = pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n          specularLight += specularLightWeighting * pointSpecularColor[i];\n        }\n\n        diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n        diffuseLight += diffuseLightWeighting * pointColor[i];\n      } else {\n        break;\n      }\n    }\n\n    lightWeighting = ambientColor + diffuseLight + specularLight;\n  }\n\n// reflection / refraction configs\nuniform float reflection;\nuniform float refraction;\n\n///\n  // has cube texture then apply reflection\n  // if (hasTextureCube1) {\n  //   vec3 nReflection = normalize(vReflection);\n  //   vec3 reflectionValue;\n  //   if (refraction > 0.0) {\n  //    reflectionValue = refract(nReflection, vNormal.xyz, refraction);\n  //   } else {\n  //    reflectionValue = -reflect(nReflection, vNormal.xyz);\n  //   }\n\n  //   // TODO(nico): check whether this is right.\n  //   vec4 cubeColor = textureCube(samplerCube1,\n  //       vec3(-reflectionValue.x, -reflectionValue.y, reflectionValue.z));\n  //   gl_FragColor = vec4(mix(gl_FragColor.xyz, cubeColor.xyz, reflection), 1.0);\n  // }\n","\n");var $t={lightDirection:new Float32Array([1,1,2])};var Jt={name:"dirlight",vs:null,fs:"uniform vec3 dirlight_uLightDirection;\n\n/*\n * Returns color attenuated by angle from light source\n */\nvec4 dirlight_filterColor(vec4 color) {\n  vec3 normal = project_getNormal_World();\n  float d = abs(dot(normalize(normal), normalize(dirlight_uLightDirection)));\n  return vec4(color.rgb * d, color.a);\n}\n",getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t,t={};return e.lightDirection&&(t.dirlight_uLightDirection=e.lightDirection),t},dependencies:[Yt]};new Uint8Array([0,255,255,255]);var Zt="void main() {}";"#version 300 es\n".concat(Zt);var en=n(252),tn=n.n(en),nn={},rn=function e(t,n,r){t&&(n.length>1?e(t[n[0]],n.slice(1),r):t[n[0]]=r)},an=new Map;function on(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.header,n=void 0===t?"Uniforms":t,r=e.program,i=e.uniforms,a=e.undefinedOnly,o=void 0!==a&&a;Object(k.a)(r);var s=r._uniformSetters,u={},l=Object.keys(s).sort(),f=0,h=!0,d=!1,v=void 0;try{for(var g,b=l[Symbol.iterator]();!(h=(g=b.next()).done);h=!0){var p=g.value;p.match(".*_.*")||p.match(".*Matrix")||sn({table:u,header:n,uniforms:i,uniformName:p,undefinedOnly:o})&&f++}}catch(e){d=!0,v=e}finally{try{h||null==b.return||b.return()}finally{if(d)throw v}}var m=!0,y=!1,_=void 0;try{for(var O,E=l[Symbol.iterator]();!(m=(O=E.next()).done);m=!0){var j=O.value;j.match(".*Matrix")&&sn({table:u,header:n,uniforms:i,uniformName:j,undefinedOnly:o})&&f++}}catch(e){y=!0,_=e}finally{try{m||null==E.return||E.return()}finally{if(y)throw _}}var x=!0,A=!1,T=void 0;try{for(var S,P=l[Symbol.iterator]();!(x=(S=P.next()).done);x=!0){var L=S.value;u[L]||sn({table:u,header:n,uniforms:i,uniformName:L,undefinedOnly:o})&&f++}}catch(e){A=!0,T=e}finally{try{x||null==P.return||P.return()}finally{if(A)throw T}}var F=0,I={};if(!o)for(var R in i){var M=i[R];u[R]||(F++,I[R]=Object(w.a)({Type:"NOT USED: ".concat(M)},n,Object(c.b)(M)))}return{table:u,count:f,unusedTable:I,unusedCount:F}}function sn(e){var t,n=e.table,r=e.header,i=e.uniforms,a=e.uniformName,o=e.undefinedOnly,s=i[a],u=function(e){return null!=e}(s);return(!o||!u)&&(n[a]=(t={},Object(w.a)(t,r,u?Object(c.b)(s):"N/A"),Object(w.a)(t,"Uniform Type",u?s:"NOT PROVIDED"),t),!0)}function un(e,t,n,i){var a,o,s,u,l=e.gl,f="NOT PROVIDED",h="N/A",d="N/A",v="N/A";if(n&&(f=n.type,h=n.size,o=-1!==(f=String(f).replace("Array","")).indexOf("nt")),t instanceof B.a){var g,b,p=t,m=p.getDebugData(),y=m.data;if(s=m.modified?"*":"",u=y,d=(v=p.byteLength)/y.BYTES_PER_ELEMENT/h,n){var _=n.divisor>0;b="".concat(_?"I ":"P "," ").concat(d," (x").concat(h,"=").concat(v," bytes ").concat(Object(r.c)(l,f),")")}else o=!0,b="".concat(v," bytes");return g={},Object(w.a)(g,i,"".concat(s).concat(Object(c.b)(u,{size:h,isInteger:o}))),Object(w.a)(g,"Format ",b),g}return u=t,h=t.length,o=-1!==(f=String(t.constructor.name).replace("Array","")).indexOf("nt"),a={},Object(w.a)(a,i,"".concat(Object(c.b)(u,{size:h,isInteger:o})," (constant)")),Object(w.a)(a,"Format ","".concat(h,"x").concat(f," (constant)")),a}function cn(e,t){var n=qe(t.type,t.size);return n?"".concat(e," (").concat(n.name,")"):e}function ln(e){var t=e.accessor,n=qe(t.type,t.size);return n?"".concat(n.name," ").concat(e.name):e.name}tn.a.listenFor("luma.gl",function(e){var t=nn[e.itemKey];if(t&&"edit"===e.type&&"uniforms"===e.valuePath[0]){var n=e.valuePath.slice(1);!function(e,t,n){b.b.__SEER_INITIALIZED__&&(an.has(e)||an.set(e,new Map),an.get(e).set(t,n))}(e.itemKey,n,e.value);var r=t.getUniforms();rn(r,n,e.value),t.setUniforms(r)}});var fn=["renderPickingBuffer","pickingEnabled"],hn=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(g.a)(this,t),n=Object(D.a)(this,Object(C.a)(t).call(this,r)),Object(k.a)(Object(i.m)(e)),n.gl=e,n.lastLogTime=0,n.initialize(r),n}return Object(U.a)(t,e),Object(j.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props={},this.program=this._createProgram(e),this.vertexArray=new at(this.gl,{program:this.program}),this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.animatedUniforms={},this.animated=!1,this.animationLoop=null,this.timerQueryEnabled=!1,this.timeElapsedQuery=void 0,this.lastQueryReturned=!0,this.stats={accumulatedFrameTime:0,averageFrameTime:0,profileFrameCount:0},this.pickable=!0,this.setProps(e),this.setUniforms(Object.assign({},this.getModuleUniforms(),this.getModuleUniforms(e.moduleSettings))),this.isInstanced=e.isInstanced||e.instanced,this.onBeforeRender=e.onBeforeRender||function(){},this.onAfterRender=e.onAfterRender||function(){},Object(k.a)(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}},{key:"setProps",value:function(e){Object.assign(this.props,e),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"uniforms"in e&&this.setUniforms(e.uniforms,e.samplers),"pickable"in e&&(this.pickable=e.pickable),"timerQueryEnabled"in e&&(this.timerQueryEnabled=e.timerQueryEnabled&&$e.isSupported(this.gl,["timers"]),e.timerQueryEnabled&&!this.timerQueryEnabled&&c.g.warn("GPU timer not supported")()),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers),"_animationProps"in e&&this._setAnimationProps(e._animationProps),"_animationLoop"in e&&(this.animationLoop=e._animationLoop)}},{key:"delete",value:function(){for(var e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();var t;this.program.delete(),this.vertexArray.delete(),t=this.id,delete nn[t],tn.a.deleteItem("luma.gl",t)}},{key:"destroy",value:function(){this.delete()}},{key:"getNeedsRedraw",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,t=void 0!==e&&e,n=!1;return n=n||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!t,this.geometry&&(n=n||this.geometry.getNeedsRedraw({clearRedrawFlags:t})),this.animated&&(n=n||"animated model ".concat(this.id)),n}},{key:"getDrawMode",value:function(){return this.drawMode}},{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getInstanceCount",value:function(){return this.instanceCount}},{key:"getProgram",value:function(){return this.program}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getUniforms",value:function(){return this.program.getUniforms}},{key:"setNeedsRedraw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=e,this}},{key:"setDrawMode",value:function(e){return this.props.drawMode=ft(e),this}},{key:"setVertexCount",value:function(e){return Object(k.a)(Number.isFinite(e)),this.props.vertexCount=e,this}},{key:"setInstanceCount",value:function(e){return Object(k.a)(Number.isFinite(e)),this.instanceCount=e,this}},{key:"setGeometry",value:function(e){this.geometry=e;var t=this._createBuffersFromAttributeDescriptors(this.geometry.getAttributes());return this.vertexArray.setAttributes(t),this.setNeedsRedraw(),this}},{key:"setAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(c.d)(e))return this;Object.assign(this.attributes,e);var t=this._createBuffersFromAttributeDescriptors(e);return this.vertexArray.setAttributes(t),this.setNeedsRedraw(),this}},{key:"setUniforms",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object.assign({},t),function(e,t){if(b.b.__SEER_INITIALIZED__&&e){var n=an.get(e);n&&n.forEach(function(e,n){rn(t,n,e)})}}(this.id,t),t=this._extractAnimatedUniforms(t),this.program.setUniforms(t,n,function(){e._checkForDeprecatedUniforms(t),e.setNeedsRedraw()})}},{key:"_setAnimationProps",value:function(e){var t=this;if(this.animated){Object(k.a)(e,"Model.draw(): animated uniforms but no animationProps");var n=this._evaluateAnimateUniforms(e);this.program.setUniforms(n,{},function(){t._checkForDeprecatedUniforms(n),t.setNeedsRedraw()})}}},{key:"updateModuleSettings",value:function(e){var t=this.getModuleUniforms(e||{});return this.setUniforms(t)}},{key:"clear",value:function(e){return fe(this.program.gl,e),this}},{key:"draw",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.moduleSettings,r=void 0===n?null:n,i=t.framebuffer,a=t.uniforms,o=void 0===a?{}:a,s=t.attributes,u=void 0===s?{}:s,l=t.samplers,f=void 0===l?{}:l,h=t.transformFeedback,d=void 0===h?this.transformFeedback:h,v=t.parameters,g=void 0===v?{}:v,b=t.vertexArray,p=void 0===b?this.vertexArray:b,m=t.animationProps;nn[(e=this).id]||(nn[e.id]=e,tn.a.listItem("luma.gl",e.id)),this.setAttributes(u),this.updateModuleSettings(r),this.setUniforms(o,f),this._refreshAnimationProps(m);var y=this._logDrawCallStart(2),_=this.vertexArray.getDrawParams(this.props);_.isInstanced&&!this.isInstanced&&c.g.warn("Found instanced attributes on non-instanced model",this.id)();var O=_.isIndexed,E=_.indexType,w=this.isInstanced,j=this.instanceCount;return this.onBeforeRender(),this._timerQueryStart(),this.program.draw(Object.assign({},t,{logPriority:y,uniforms:null,framebuffer:i,parameters:g,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:p,transformFeedback:d,isIndexed:O,indexType:E,isInstanced:w,instanceCount:j})),this._timerQueryEnd(),this.onAfterRender(),this.setNeedsRedraw(!1),this._logDrawCallEnd(y,p,i),this}},{key:"transform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.discard,n=void 0===t||t,r=e.feedbackBuffers,i=e.unbindModels,a=void 0===i?[]:i,o=e.parameters;r&&this._setFeedbackBuffers(r),n&&(o=Object.assign({},o,Object(w.a)({},35977,n))),a.forEach(function(e){return e.vertexArray.unbindBuffers()});try{this.draw(Object.assign({},e,{parameters:o}))}finally{a.forEach(function(e){return e.vertexArray.bindBuffers()})}return this}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(k.a)(arguments.length<=1),this.draw({uniforms:e})}},{key:"_createProgram",value:function(e){var t=e.vs,n=void 0===t?null:t,r=e.fs,i=void 0===r?null:r,a=e.modules,o=void 0===a?null:a,s=e.defines,u=void 0===s?{}:s,l=e.inject,f=void 0===l?{}:l,h=e.shaderCache,d=void 0===h?null:h,v=e.varyings,g=void 0===v?null:v,b=e.bufferMode,p=void 0===b?35981:b,m=e.program,y=void 0===m?null:m;this.getModuleUniforms=function(e){};var _=this.id;if(!y){n=n||dt,i=i||vt;var O=Wt(this.gl,{vs:n,fs:i,modules:o,inject:f,defines:u,log:c.g});n=O.vs,i=O.fs,y=d?d.getProgram(this.gl,{id:_,vs:n,fs:i}):new Ke(this.gl,{id:_,vs:n,fs:i,varyings:g,bufferMode:p}),this.getModuleUniforms=O.getUniforms||function(e){}}return Object(k.a)(y instanceof Ke,"Model needs a program"),y}},{key:"_checkForDeprecatedUniforms",value:function(e){fn.forEach(function(t){t in e&&c.g.deprecated(t,"use picking shader module and Model class updateModuleSettings()")()})}},{key:"_refreshAnimationProps",value:function(e){(e=e||this.animationLoop&&this.animationLoop.animationProps)&&this._setAnimationProps(e)}},{key:"_evaluateAnimateUniforms",value:function(e){if(!this.animated)return{};var t={};for(var n in this.animatedUniforms){var r=this.animatedUniforms[n];t[n]=r(e)}return t}},{key:"_extractAnimatedUniforms",value:function(e){var t=!1;for(var n in e){var r=e[n];"function"==typeof r?(this.animatedUniforms[n]=r,t=!0):delete this.animatedUniforms[n]}if(this.animated=!Object(c.d)(this.animatedUniforms),!t)return e;var i={};for(var a in e)this.animatedUniforms[a]||(i[a]=e[a]);return i}},{key:"_setFeedbackBuffers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(c.d)(e))return this;var t=this.program.gl;return this.transformFeedback=this.transformFeedback||new Je(t,{program:this.program}),this.transformFeedback.setBuffers(e),this.setNeedsRedraw(),this}},{key:"_timerQueryStart",value:function(){!0===this.timerQueryEnabled&&(this.timeElapsedQuery||(this.timeElapsedQuery=new $e(this.gl)),this.lastQueryReturned&&(this.lastQueryReturned=!1,this.timeElapsedQuery.beginTimeElapsedQuery()))}},{key:"_timerQueryEnd",value:function(){if(!0===this.timerQueryEnabled&&(this.timeElapsedQuery.end(),this.timeElapsedQuery.isResultAvailable())){this.lastQueryReturned=!0;var e=this.timeElapsedQuery.getResult();this.stats.lastFrameTime=e,this.stats.accumulatedFrameTime+=e,this.stats.profileFrameCount++,this.stats.averageFrameTime=this.stats.accumulatedFrameTime/this.stats.profileFrameCount,c.g.log(2,"GPU time ".concat(this.program.id,": ").concat(this.stats.lastFrameTime,"ms average ").concat(this.stats.averageFrameTime,"ms accumulated: ").concat(this.stats.accumulatedFrameTime,"ms count: ").concat(this.stats.profileFrameCount))()}}},{key:"_createBuffersFromAttributeDescriptors",value:function(e){var t=this.program.gl,n={};for(var r in e){var i=e[r],a=this._attributes[r];i instanceof ct?a=i:i instanceof B.a?(a=a||new ct(t,Object.assign({},i,i.layout,{id:r}))).update({buffer:i}):a?a.update(i):a=new ct(t,Object.assign({},i,{id:r})),this._attributes[r]=a,n[r]=a.getValue()}return n}},{key:"_logDrawCallStart",value:function(e){var t=e>3?0:1e4;if(!(c.g.priority<e||Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),c.g.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:c.g.priority<=2})(),e}},{key:"_logDrawCallEnd",value:function(e,t,n,r){if(void 0!==e){var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.vertexArray,n=e.header,r=void 0===n?"Attributes":n;if(!t.configuration)return{};var i={};t.elements&&(i.ELEMENT_ARRAY_BUFFER=un(t,t.elements,null,r));var a=t.values;for(var o in a){var s=t._getAttributeInfo(o);if(s){var u="".concat(o,": ").concat(s.name),c=t.accessors[s.location];c&&(u="".concat(o,": ").concat(cn(s.name,c))),i[u]=un(t,a[o],c,r)}}return i}({vertexArray:t,header:"".concat(this.id," attributes"),attributes:this._attributes}),a=on({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),o=a.table,s=a.unusedTable,u=a.unusedCount,l=on({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0}),f=l.table;l.count>0&&c.g.log("MISSING UNIFORMS",Object.keys(f))(),u>0&&c.g.log("UNUSED UNIFORMS",Object.keys(s))();var h=function(e){var t={},n="Accessors for ".concat(e.id),r=!0,i=!1,a=void 0;try{for(var o,s=e.attributeInfos[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;if(u){var c=ln(u);t["in ".concat(c)]=Object(w.a)({},n,JSON.stringify(u.accessor))}}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}var l=!0,f=!1,h=void 0;try{for(var d,v=e.varyingInfos[Symbol.iterator]();!(l=(d=v.next()).done);l=!0){var g=d.value;if(g){var b=ln(g);t["out ".concat(b)]=Object(w.a)({},n,JSON.stringify(g.accessor))}}}catch(e){f=!0,h=e}finally{try{l||null==v.return||v.return()}finally{if(f)throw h}}return t}(this.vertexArray.configuration);c.g.table(e,i)(),c.g.table(e,o)(),c.g.table(e+1,h)(),function(e,t){if(tn.a.isReady()&&!tn.a.throttle("luma.gl:".concat(e.id),1e3)){var n=e.geometry?Object.assign({},e.geometry.attributes,e.attributes):e.attributes,r=Object.assign({},e.uniforms,t);tn.a.multiUpdate("luma.gl",e.id,[{path:"objects.uniforms",data:r},{path:"objects.attributes",data:n}])}}(this,n),r&&r.log({priority:2,message:"Rendered to ".concat(r.id)}),c.g.groupEnd(2,">>> DRAWING MODEL ".concat(this.id))()}}},{key:"vertexCount",get:function(){return Number.isFinite(this.props.vertexCount)?this.props.vertexCount:this.geometry&&this.geometry.getVertexCount()}},{key:"drawMode",get:function(){return Number.isFinite(this.props.drawMode)?this.props.drawMode:this.geometry&&this.geometry.drawMode}}]),t}(ut),dn=n(149),vn={preserveDrawingBuffer:!0},gn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.a)(this,e);var n=t.onCreateContext,r=void 0===n?function(e){return L(e)}:n,i=t.onAddHTML,a=void 0===i?null:i,o=t.onInitialize,s=void 0===o?function(){}:o,u=t.onRender,l=void 0===u?function(){}:u,f=t.onFinalize,h=void 0===f?function(){}:f,d=t.gl,v=void 0===d?null:d,b=t.glOptions,p=void 0===b?{}:b,m=t.debug,y=void 0!==m&&m,_=t.createFramebuffer,O=void 0!==_&&_,E=t.autoResizeViewport,w=void 0===E||E,j=t.autoResizeDrawingBuffer,x=void 0===j||j,A=t.useDevicePixels,k=void 0===A||A;return"useDevicePixelRatio"in t&&(c.g.deprecated("useDevicePixelRatio","useDevicePixels")(),k=t.useDevicePixelRatio),this.props={onCreateContext:r,onAddHTML:a,onInitialize:s,onRender:l,onFinalize:h,gl:v,glOptions:p,debug:y,createFramebuffer:O},this.gl=v,this.needsRedraw=null,this.setProps({autoResizeViewport:w,autoResizeDrawingBuffer:x,useDevicePixels:k}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._renderFrame=this._renderFrame.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this),this}return Object(j.a)(e,[{key:"setNeedsRedraw",value:function(e){return Object(k.a)("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}},{key:"setProps",value:function(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}},{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._stopped=!1,this._animationFrameId||(this._startPromise=h().then(function(){return e._stopped?null:(e._createWebGLContext(t),e._createFramebuffer(),e._startEventHandling(),e._initializeCallbackData(),e._updateCallbackData(),e._resizeCanvasDrawingBuffer(),e._resizeViewport(),e.onInitialize(e.animationProps))}).then(function(t){e._stopped||(e._addCallbackData(t||{}),!1===t||e._animationFrameId||(e._animationFrameId=Object(i.p)(e._renderFrame)))})),this}},{key:"stop",value:function(){return this._animationFrameId&&(this._finalizeCallbackData(),Object(i.f)(this._animationFrameId),this._animationFrameId=null,this._stopped=!0),this}},{key:"onCreateContext",value:function(){var e;return(e=this.props).onCreateContext.apply(e,arguments)}},{key:"onInitialize",value:function(){var e;return(e=this.props).onInitialize.apply(e,arguments)}},{key:"onRender",value:function(){var e;return(e=this.props).onRender.apply(e,arguments)}},{key:"onFinalize",value:function(){var e;return(e=this.props).onFinalize.apply(e,arguments)}},{key:"getHTMLControlValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=document.getElementById(e);return n?Number(n.value):t}},{key:"setViewParameters",value:function(){return c.g.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}},{key:"_clearNeedsRedraw",value:function(){this.needsRedraw=null}},{key:"_setupFrame",value:function(){this._onSetupFrame?this._onSetupFrame(this.animationProps):(this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer())}},{key:"_renderFrame",value:function(){this._stopped||(this._setupFrame(),this._updateCallbackData(),this.onRender(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit?this.gl.commit().then(this._renderFrame):this._animationFrameId=Object(i.p)(this._renderFrame))}},{key:"_initializeCallbackData",value:function(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),time:0,tick:0,tock:0,_loop:this,_animationLoop:this,_mousePosition:null}}},{key:"_updateCallbackData",value:function(){var e=this._getSizeAndAspect(),t=e.width,n=e.height,r=e.aspect;t===this.animationProps.width&&n===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.time=Date.now()-this.animationProps.startTime,this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps._offScreen=this.offScreen}},{key:"_finalizeCallbackData",value:function(){this.onFinalize(this.animationProps)}},{key:"_addCallbackData",value:function(e){"object"===Object(dn.a)(e)&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}},{key:"_createWebGLContext",value:function(e){if(this.offScreen=e.canvas&&"undefined"!=typeof OffscreenCanvas&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,vn,this.props.glOptions),this.gl=this.props.gl||this.onCreateContext(e),!Object(i.m)(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");this.props.debug&&(this.gl=m(this.gl)),Object(F.a)(this.gl),this._createInfoDiv()}},{key:"_createInfoDiv",value:function(){if(this.gl.canvas&&this.props.onAddHTML){var e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";var t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);var n=this.props.onAddHTML(t);n&&(t.innerHTML=n)}}},{key:"_getSizeAndAspect",value:function(){var e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight,n=1,r=this.gl.canvas,i=r.clientWidth,a=r.clientHeight;return i>=0&&a>=0?n=t>0?i/a:1:e>0&&t>0&&(n=e/t),{width:e,height:t,aspect:n}}},{key:"_resizeViewport",value:function(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:"_resizeCanvasDrawingBuffer",value:function(){this.autoResizeDrawingBuffer&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.canvas){var n=t.useDevicePixels&&window.devicePixelRatio||1,r="width"in t?t.width:e.canvas.clientWidth,i="height"in t?t.height:e.canvas.clientHeight;return e.canvas.width=r*n,void(e.canvas.height=i*n)}var a=e.getExtension("STACKGL_resize_drawingbuffer");a&&"width"in t&&"height"in t&&a.resize(t.width,t.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}},{key:"_createFramebuffer",value:function(){this.props.createFramebuffer&&(this.framebuffer=new ve(this.gl))}},{key:"_resizeFramebuffer",value:function(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}},{key:"_startEventHandling",value:function(){this.gl.canvas.addEventListener("mousemove",this._onMousemove),this.gl.canvas.addEventListener("mouseleave",this._onMouseleave)}},{key:"_onMousemove",value:function(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}},{key:"_onMouseleave",value:function(e){this.animationProps._mousePosition=null}}]),e}();new Uint8Array([0,0,0]);var bn;bn={},Object(w.a)(bn,10241,9728),Object(w.a)(bn,10240,9728),Object(w.a)(bn,10242,33071),Object(w.a)(bn,10243,33071);var pn=function(){function e(t,n){Object(g.a)(this,e);var r=n.id,i=void 0===r?"pass":r;this.id=i,this.gl=t,this.props={enabled:!0,screen:!1,swap:!1},Object.assign(this.props,n)}return Object(j.a)(e,[{key:"setProps",value:function(e){Object.assign(this.props,e)}},{key:"render",value:function(e,t){var n=this;if(this.props.enabled){var r=this.gl,i={gl:r,outputBuffer:e.writeBuffer,inputBuffer:e.readBuffer,animationProps:t,swapBuffers:function(){return e._swapFramebuffers()}};this.props.screen?(i.inputBuffer=i.outputBuffer,i.outputBuffer=ve.getDefaultFramebuffer(r)):this.props.swap&&(i.inputBuffer=e.writeBuffer,i.outputBuffer=e.readBuffer),Object(F.c)(r,{framebuffer:i.outputBuffer},function(){return n._renderPass(i)}),this.props.debug&&i.outputBuffer.log(0,this.id),this.props.swap&&e._swapFramebuffers()}}},{key:"_renderPass",value:function(e){e.gl,e.inputBuffer,e.outputBuffer,e.animationProps}}]),e}(),mn=function(e){function t(e,n){return Object(g.a)(this,t),n=Array.isArray(n)?{passes:n}:n,Object(D.a)(this,Object(C.a)(t).call(this,e,Object.assign({id:"composite-pass"},n)))}return Object(U.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props.passes,t=void 0===e?[]:e,n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.render.apply(s,arguments)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}}]),t}(pn),yn=function(){function e(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(g.a)(this,e),this.gl=t,this.framebuffer1=new ve(t,{id:"multi-pass-1",stencil:!0}),this.framebuffer2=new ve(t,{id:"multi-pass-2",stencil:!0}),this.reset()}return Object(j.a)(e,[{key:"reset",value:function(){this.framebuffer1.resize(),this.framebuffer2.resize(),this.writeBuffer=this.framebuffer1,this.readBuffer=this.framebuffer2,this.maskActive=!1}},{key:"_swapFramebuffers",value:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}}]),e}(),_n=function(e){function t(e,n){var r;return Object(g.a)(this,t),n=Array.isArray(n)?{passes:n}:n,(r=Object(D.a)(this,Object(C.a)(t).call(this,e,Object.assign({id:"multi-pass"},n)))).renderState=new yn(e,n),r}return Object(U.a)(t,e),Object(j.a)(t,[{key:"render",value:function(e){this.renderState.reset();var t=this.props.passes,n=void 0===t?[]:t,r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){o.value.render(this.renderState,e)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return this}}]),t}(mn),On=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(g.a)(this,t),Object(D.a)(this,Object(C.a)(t).call(this,e,Object.assign({id:"clear-pass"},n)))}return Object(U.a)(t,e),Object(j.a)(t,[{key:"_renderPass",value:function(e){var t=e.gl,n=this.props.clearBits,r=void 0===n?16640:n;t.clear(r)}}]),t}(pn),En=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.a)(this,t);var n=e.id,r=void 0===n?Object(c.i)("cube-geometry"):n;return Object(D.a)(this,Object(C.a)(t).call(this,Object.assign({},e,{id:r,attributes:{indices:new Uint16Array(wn),positions:new Float32Array(jn),normals:new Float32Array(xn),texCoords:new Float32Array(An)}})))}return Object(U.a)(t,e),t}(ht),wn=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),jn=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),xn=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),An=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]);var kn=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(g.a)(this,t);var r=n.id,i=void 0===r?Object(c.i)("cube"):r;return Object(D.a)(this,Object(C.a)(t).call(this,e,Object.assign({},n,{id:i,geometry:new En(n)})))}return Object(U.a)(t,e),t}(hn),Tn="attribute vec2 aClipSpacePosition;\nattribute vec2 aTexCoord;\nattribute vec2 aCoordinate;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main(void) {\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n  position = aClipSpacePosition;\n  coordinate = aCoordinate;\n  uv = aTexCoord;\n}\n",Sn=[-1,-1,1,-1,-1,1,1,1],Pn=function(e){function t(e,n){var r;Object(g.a)(this,t);var i=Sn.map(function(e){return-1===e?0:e});return(r=Object(D.a)(this,Object(C.a)(t).call(this,e,Object.assign({},n,{vs:Tn,geometry:new ht({drawMode:5,vertexCount:4,attributes:{aClipSpacePosition:{size:2,value:new Float32Array(Sn)},aTexCoord:{size:2,value:new Float32Array(i)},aCoordinate:{size:2,value:new Float32Array(i)}}})})))).setVertexCount(4),r}return Object(U.a)(t,e),t}(hn),Ln="uniform sampler2D uDiffuseSampler;\nuniform float uOpacity;\n\nvarying vec2 uv;\n\nvoid main() {\n  vec4 texel = texture2D(uDiffuseSampler, uv);\n  gl_FragColor = uOpacity * texel;\n}\n",Fn=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(g.a)(this,t),(n=Object(D.a)(this,Object(C.a)(t).call(this,e,Object.assign({id:"copy-pass",swap:!0},r)))).clipspace=new Pn(e,{id:"copy-pass",fs:Ln}),n}return Object(U.a)(t,e),Object(j.a)(t,[{key:"_renderPass",value:function(e){var t=e.inputBuffer,n=this.props.opacity,r=void 0===n?1:n;this.clipspace.draw({uniforms:{uDiffuseSampler:t,uOpacity:r},parameters:{depthWrite:!1,depthTest:!1}})}}]),t}(pn),In="uniform sampler2D uDiffuseSampler;\nuniform float uOpacity;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 texel = texture2D(uDiffuseSampler, uv);\n  gl_FragColor = uOpacity * texel;\n}\n",Rn=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(g.a)(this,t),n=Object(D.a)(this,Object(C.a)(t).call(this,e,Object.assign({id:"texture-pass"},r)));var i=r.texture,a=r.opacity,o=void 0===a?1:a;return n.clipspace=new Pn(e,{id:"texture-pass",fs:In,uniforms:{uDiffuseSampler:i,uOpacity:o}}),n}return Object(U.a)(t,e),Object(j.a)(t,[{key:"_renderPass",value:function(){this.clipspace.draw({parameters:{depthWrite:!1,depthTest:!1}})}}]),t}(pn);n(253);n.d(t,"i",function(){return L}),n.d(t,"k",function(){return F.b}),n.d(t,"d",function(){return Z.a}),n.d(t,"c",function(){return hn}),n.d(t,"a",function(){return gn}),n.d(t,"g",function(){return _n}),n.d(t,"e",function(){return On}),n.d(t,"f",function(){return Fn}),n.d(t,"h",function(){return Rn}),n.d(t,"b",function(){return kn}),n.d(t,"j",function(){return Jt}),n(186)},function(e,t,n){"use strict";var r=n(0),i=n.n(r),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=i.a.createContext&&i.a.createContext(a),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};function c(e){return function(t){return i.a.createElement(l,s({attr:s({},e.attr)},t),function e(t){return t&&t.map(function(t,n){return i.a.createElement(t.tag,s({key:n},t.attr),e(t.child))})}(e.child))}}function l(e){var t=function(t){var n,r=e.size||t.size||"1em";t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className);var a=e.attr,o=u(e,["attr"]);return i.a.createElement("svg",s({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,o,{className:n,style:s({color:e.color||t.color},t.style,e.style),height:r,width:r}),e.children)};return void 0!==o?i.a.createElement(o.Consumer,null,function(e){return t(e)}):t(a)}n.d(t,"a",function(){return f});var f=function(e){return c({tag:"svg",attr:{viewBox:"0 0 14 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74L14 6z"}}]})(e)};f.displayName="GoStar"},function(e,t,n){"use strict";var r=n(150),i=n(166),a=n(132),o=n(133),s=n(135),u=n(134),c=n(136),l=n(185),f=n(165),h=n(174),d=n(251),v=n.n(d),g=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(a.a)(this,t),e=Object(s.a)(this,Object(u.a)(t).call(this)),Array.isArray(n)&&1===arguments.length?e.copy(n):e.set(n,r),e}return Object(c.a)(t,e),Object(o.a)(t,[{key:"cross",value:function(e){return v()(this,this,e),this.check()}},{key:"horizontalAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function(){return Math.atan2(this.x,this.y)}},{key:"operation",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,[this,this].concat(n)),this.check()}},{key:"ELEMENTS",get:function(){return 2}}]),t}(h.a),b=n(223),p=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return Object(a.a)(this,t),e=Object(s.a)(this,Object(u.a)(t).call(this)),Array.isArray(n)&&1===arguments.length?e.copy(n):e.set(n,r,i,o),e}return Object(c.a)(t,e),Object(o.a)(t,[{key:"applyMatrix4",value:function(e){return e.transformVector(this,this),this}},{key:"ELEMENTS",get:function(){return 4}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=Object(f.a)(e)}},{key:"w",get:function(){return this[3]},set:function(e){return this[3]=Object(f.a)(e)}}]),t}(h.a),m=n(232),y=n.n(m),_=n(233),O=n.n(_),E=n(234),w=n.n(E),j=n(235),x=n.n(j),A=n(237),k=n.n(A),T=n(238),S=n.n(T),P=n(239),L=n.n(P),F=n(240),I=n.n(F),R=n(241),M=n.n(R),N=n(242),B=n.n(N),D=n(243),C=n.n(D),U=n(244),G=n.n(U),W=n(245),V=n.n(W),z=n(246),H=n.n(z),X=n(247),q=n.n(X),Q=n(248),K=n.n(Q),Y=n(249),$=n.n(Y),J=n(250),Z=n.n(J);n.d(t,"a",function(){return ne});var ee=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function te(e,t){return e.length===t&&e.every(Number.isFinite)}var ne=function(e){function t(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Object(a.a)(this,t),e=Object(s.a)(this,Object(u.a)(t).call(this)),Array.isArray(r[0])&&1===arguments.length?e.copy(r[0]):e.identity(),e}return Object(c.a)(t,e),Object(o.a)(t,[{key:"setRowMajor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,d=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,v=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,g=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=e,this[1]=i,this[2]=u,this[3]=h,this[4]=t,this[5]=a,this[6]=c,this[7]=d,this[8]=n,this[9]=o,this[10]=l,this[11]=v,this[12]=r,this[13]=s,this[14]=f,this[15]=g,this.check()}},{key:"setColumnMajor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,d=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,v=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,g=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=e,this[1]=t,this[2]=n,this[3]=r,this[4]=i,this[5]=a,this[6]=o,this[7]=s,this[8]=u,this[9]=c,this[10]=l,this[11]=f,this[12]=h,this[13]=d,this[14]=v,this[15]=g,this.check()}},{key:"copy",value:function(e){return this.setColumnMajor.apply(this,Object(i.a)(e))}},{key:"set",value:function(){return this.setColumnMajor.apply(this,arguments)}},{key:"getElement",value:function(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this[e][t]:this[t][e]}},{key:"setElement",value:function(e,t,n){return arguments.length>3&&void 0!==arguments[3]&&arguments[3]?this[e][t]=Object(f.a)(n):this[t][e]=Object(f.a)(n),this}},{key:"determinant",value:function(){return y()(this)}},{key:"identity",value:function(){return this.copy(ee)}},{key:"fromQuaternion",value:function(e){return O()(this,e),this.check()}},{key:"frustum",value:function(e){var t=e.left,n=e.right,r=e.bottom,i=e.top,a=e.near,o=e.far;return w()(this,t,n,r,i,a,o),this.check()}},{key:"lookAt",value:function(e){var t=e.eye,n=e.center,r=void 0===n?[0,0,0]:n,i=e.up,a=void 0===i?[0,1,0]:i;return x()(this,t,r,a),this.check()}},{key:"ortho",value:function(e){var t=e.left,n=e.right,r=e.bottom,i=e.top,a=e.near,o=void 0===a?.1:a,s=e.far,u=void 0===s?500:s;return k()(this,t,n,r,i,o,u),this.check()}},{key:"orthographic",value:function(e){var n=e.fovy,r=void 0===n?45*Math.PI/180:n,i=e.aspect,a=void 0===i?1:i,o=e.focalDistance,s=void 0===o?1:o,u=e.near,c=void 0===u?.1:u,l=e.far,f=void 0===l?500:l;if(r>2*Math.PI)throw Error("radians");var h=r/2,d=s*Math.tan(h),v=d*a;return(new t).ortho({left:-v,right:v,bottom:-d,top:d,near:c,far:f})}},{key:"perspective",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fovy,n=e.fov,r=void 0===n?45*Math.PI/180:n,i=e.aspect,a=void 0===i?1:i,o=e.near,s=void 0===o?.1:o,u=e.far,c=void 0===u?500:u;if((t=t||r)>2*Math.PI)throw Error("radians");return S()(this,t,a,s,c),this.check()}},{key:"transpose",value:function(){return L()(this,this),this.check()}},{key:"invert",value:function(){return I()(this,this),this.check()}},{key:"multiplyLeft",value:function(e){return M()(this,e,this),this.check()}},{key:"multiplyRight",value:function(e){return M()(this,this,e),this.check()}},{key:"rotateX",value:function(e){return K()(this,this,e),this.check()}},{key:"rotateY",value:function(e){return $()(this,this,e),this.check()}},{key:"rotateZ",value:function(e){return Z()(this,this,e),this.check()}},{key:"rotateXYZ",value:function(e){var t=Object(r.a)(e,3),n=t[0],i=t[1],a=t[2];return this.rotateX(n).rotateY(i).rotateZ(a)}},{key:"rotateAxis",value:function(e,t){return B()(this,this,e,t),this.check()}},{key:"scale",value:function(e){return C()(this,this,e),this.check()}},{key:"translate",value:function(e){return G()(this,this,e),this.check()}},{key:"transformVector2",value:function(e,t){return t=t||new g,V()(t,e,this),te(t,2),t}},{key:"transformVector3",value:function(e,t){return t=t||new b.a,H()(t,e,this),te(t,3),t}},{key:"transformVector4",value:function(e,t){return t=t||new p,q()(t,e,this),te(t,4),t.check()}},{key:"transformVector",value:function(e,t){switch(e.length){case 2:return this.transformVector2(e,t);case 3:return this.transformVector3(e,t);case 4:return this.transformVector4(e,t);default:throw new Error("Illegal vector")}}},{key:"transformDirection",value:function(e,t){return this._transformVector(e,t,0)}},{key:"transformPoint",value:function(e,t){return this._transformVector(e,t,1)}},{key:"_transformVector",value:function(e,t,n){switch(e.length){case 2:t=t||new g,q()(t,[e[0],e[1],0,n],this),t.length=2,te(t,2);break;case 3:t=t||new b.a,q()(t,[e[0],e[1],e[2],n],this),t.length=3,te(t,3);break;case 4:if(Boolean(n)!==Boolean(e[3]))throw new Error("math.gl: Matrix4.transformPoint - invalid vector");t=t||new p,q()(t,e,this),te(t,4);break;default:throw new Error("Illegal vector")}return t}},{key:"makeRotationX",value:function(e){return this.identity().rotateX(e)}},{key:"makeTranslation",value:function(e,t,n){return this.identity().translate([e,t,n])}},{key:"ELEMENTS",get:function(){return 16}}]),t}(l.a)}])]);
//# sourceMappingURL=8-6f4ea420c5d3f44d698b.js.map